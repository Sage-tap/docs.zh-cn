---
description: 了解详细信息：传输配额
title: 传输配额
ms.date: 03/30/2017
helpviewer_keywords:
- transport quotas [WCF]
ms.assetid: 3e71dd3d-f981-4d9c-9c06-ff8abb61b717
ms.openlocfilehash: 0359d088402235a34b8cf1d13820c0a7c920b023
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/06/2021
ms.locfileid: "99752621"
---
# <a name="transport-quotas"></a><span data-ttu-id="64d0b-103">传输配额</span><span class="sxs-lookup"><span data-stu-id="64d0b-103">Transport Quotas</span></span>

<span data-ttu-id="64d0b-104">传输配额是一种策略机制，用于决定连接何时正在占用过多资源。</span><span class="sxs-lookup"><span data-stu-id="64d0b-104">Transport quotas are a policy mechanism for deciding when a connection is consuming excessive resources.</span></span> <span data-ttu-id="64d0b-105">配额是一种硬性限制，它在超出配额值时立即禁止使用其他资源。</span><span class="sxs-lookup"><span data-stu-id="64d0b-105">A quota is a hard limit that prevents the use of additional resources once the quota value is exceeded.</span></span> <span data-ttu-id="64d0b-106">传输配额可防止恶意或无意的拒绝服务攻击。</span><span class="sxs-lookup"><span data-stu-id="64d0b-106">Transport quotas prevent either malicious or unintentional denial of service attacks.</span></span>  
  
 <span data-ttu-id="64d0b-107">Windows Communication Foundation (WCF) 传输的默认配额值基于资源的保守分配。</span><span class="sxs-lookup"><span data-stu-id="64d0b-107">Windows Communication Foundation (WCF) transports have default quota values that are based on a conservative allocation of resources.</span></span> <span data-ttu-id="64d0b-108">这些默认值适合于开发环境和小型安装方案。</span><span class="sxs-lookup"><span data-stu-id="64d0b-108">These default values are suitable for development environments and small installation scenarios.</span></span> <span data-ttu-id="64d0b-109">如果某个安装耗尽了资源或是连接受到限制，则无论是否还有其他资源可用，服务管理员都应检查传输配额并调整各个配额值。</span><span class="sxs-lookup"><span data-stu-id="64d0b-109">Service administrators should review transport quotas and tune individual quota values if an installation is running out of resources or if connections are being limited despite the availability of additional resources.</span></span>  
  
## <a name="types-of-transport-quotas"></a><span data-ttu-id="64d0b-110">传输配额的类型</span><span class="sxs-lookup"><span data-stu-id="64d0b-110">Types of Transport Quotas</span></span>  

 <span data-ttu-id="64d0b-111">WCF 传输具有三种类型的配额：</span><span class="sxs-lookup"><span data-stu-id="64d0b-111">WCF transports have three types of quotas:</span></span>  
  
- <span data-ttu-id="64d0b-112">*超时* 可降低依赖于长时间占用资源的拒绝服务攻击。</span><span class="sxs-lookup"><span data-stu-id="64d0b-112">*Timeouts* mitigate denial of service attacks that rely on tying up resources for an extended period of time.</span></span>  
  
- <span data-ttu-id="64d0b-113">*内存分配限制* 可防止单一连接耗尽系统内存，并拒绝服务连接到其他连接。</span><span class="sxs-lookup"><span data-stu-id="64d0b-113">*Memory allocation limits* prevent a single connection from exhausting system memory and denying service to other connections.</span></span>  
  
- <span data-ttu-id="64d0b-114">*集合大小限制会限制* 间接分配内存或处于有限供应中的资源消耗。</span><span class="sxs-lookup"><span data-stu-id="64d0b-114">*Collection size limits* bound the consumption of resources that indirectly allocate memory or are in limited supply.</span></span>  
  
## <a name="transport-quota-descriptions"></a><span data-ttu-id="64d0b-115">传输配额说明</span><span class="sxs-lookup"><span data-stu-id="64d0b-115">Transport Quota Descriptions</span></span>  

 <span data-ttu-id="64d0b-116">本部分介绍可用于标准 WCF 传输的传输配额： HTTP (S) 、TCP/IP 和命名管道。</span><span class="sxs-lookup"><span data-stu-id="64d0b-116">This section describes the transport quotas available for the standard WCF transports: HTTP(S), TCP/IP, and named pipes.</span></span> <span data-ttu-id="64d0b-117">自定义传输可以公开它们自己的、未包含在此列表中的可配置配额。</span><span class="sxs-lookup"><span data-stu-id="64d0b-117">Custom transports can expose their own configurable quotas not included in this list.</span></span> <span data-ttu-id="64d0b-118">若要了解自定义传输的配额，请参考自定义传输的文档。</span><span class="sxs-lookup"><span data-stu-id="64d0b-118">Consult the documentation for a custom transport to find out about its quotas.</span></span>  
  
 <span data-ttu-id="64d0b-119">每个配额设置都有类型、最小值和默认值。</span><span class="sxs-lookup"><span data-stu-id="64d0b-119">Each quota setting has a type, minimum value, and default value.</span></span> <span data-ttu-id="64d0b-120">配额的最大值由其类型限制。</span><span class="sxs-lookup"><span data-stu-id="64d0b-120">The maximum value of a quota is limited by its type.</span></span> <span data-ttu-id="64d0b-121">由于计算机的限制，并不总是可以将配额设置为它的最大值。</span><span class="sxs-lookup"><span data-stu-id="64d0b-121">Due to machine limitations, it is not always possible to set a quota to its maximum value.</span></span>  
  
|<span data-ttu-id="64d0b-122">名称</span><span class="sxs-lookup"><span data-stu-id="64d0b-122">Name</span></span>|<span data-ttu-id="64d0b-123">类型</span><span class="sxs-lookup"><span data-stu-id="64d0b-123">Type</span></span>|<span data-ttu-id="64d0b-124">最小值</span><span class="sxs-lookup"><span data-stu-id="64d0b-124">Min.</span></span><br /><br /> <span data-ttu-id="64d0b-125">value</span><span class="sxs-lookup"><span data-stu-id="64d0b-125">value</span></span>|<span data-ttu-id="64d0b-126">默认</span><span class="sxs-lookup"><span data-stu-id="64d0b-126">Default</span></span><br /><br /> <span data-ttu-id="64d0b-127">value</span><span class="sxs-lookup"><span data-stu-id="64d0b-127">value</span></span>|<span data-ttu-id="64d0b-128">描述</span><span class="sxs-lookup"><span data-stu-id="64d0b-128">Description</span></span>|  
|----------|----------|--------------------|-----------------------|-----------------|  
|`ChannelInitializationTimeout`|<span data-ttu-id="64d0b-129">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-129">TimeSpan</span></span>|<span data-ttu-id="64d0b-130">1 个计时周期</span><span class="sxs-lookup"><span data-stu-id="64d0b-130">1 tick</span></span>|<span data-ttu-id="64d0b-131">5 秒</span><span class="sxs-lookup"><span data-stu-id="64d0b-131">5 sec</span></span>|<span data-ttu-id="64d0b-132">初始读取过程中等待连接发送前导码的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-132">Maximum time to wait for a connection to send the preamble during the initial read.</span></span> <span data-ttu-id="64d0b-133">此数据在进行身份验证前接收。</span><span class="sxs-lookup"><span data-stu-id="64d0b-133">This data is received before authentication occurs.</span></span> <span data-ttu-id="64d0b-134">此设置通常要比 `ReceiveTimeout` 配额值小得多。</span><span class="sxs-lookup"><span data-stu-id="64d0b-134">This setting is generally much smaller than the `ReceiveTimeout` quota value.</span></span>|  
|`CloseTimeout`|<span data-ttu-id="64d0b-135">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-135">TimeSpan</span></span>|<span data-ttu-id="64d0b-136">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-136">0</span></span>|<span data-ttu-id="64d0b-137">1 分钟</span><span class="sxs-lookup"><span data-stu-id="64d0b-137">1 min</span></span>|<span data-ttu-id="64d0b-138">在传输引发异常之前等待连接关闭的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-138">Maximum time to wait for a connection to close before the transport raises an exception.</span></span>|  
|`ConnectionBufferSize`|<span data-ttu-id="64d0b-139">Integer</span><span class="sxs-lookup"><span data-stu-id="64d0b-139">Integer</span></span>|<span data-ttu-id="64d0b-140">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-140">1</span></span>|<span data-ttu-id="64d0b-141">8 KB</span><span class="sxs-lookup"><span data-stu-id="64d0b-141">8 KB</span></span>|<span data-ttu-id="64d0b-142">基础传输的传输和接收缓冲区的大小（以字节为单位）。</span><span class="sxs-lookup"><span data-stu-id="64d0b-142">Size, in bytes, of the transmit and receive buffers of the underlying transport.</span></span> <span data-ttu-id="64d0b-143">增加缓冲区大小可以在发送较大消息时提高吞吐量。</span><span class="sxs-lookup"><span data-stu-id="64d0b-143">Increasing the buffer size can improve throughput when sending large messages.</span></span>|  
|`IdleTimeout`|<span data-ttu-id="64d0b-144">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-144">TimeSpan</span></span>|<span data-ttu-id="64d0b-145">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-145">0</span></span>|<span data-ttu-id="64d0b-146">2 分钟</span><span class="sxs-lookup"><span data-stu-id="64d0b-146">2 min</span></span>|<span data-ttu-id="64d0b-147">已入池连接在关闭前可以保持空闲状态的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-147">Maximum time a pooled connection can remain idle before being closed.</span></span><br /><br /> <span data-ttu-id="64d0b-148">此设置仅适用于入池连接。</span><span class="sxs-lookup"><span data-stu-id="64d0b-148">This setting only applies to pooled connections.</span></span>|  
|`LeaseTimeout`|<span data-ttu-id="64d0b-149">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-149">TimeSpan</span></span>|<span data-ttu-id="64d0b-150">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-150">0</span></span>|<span data-ttu-id="64d0b-151">5 分钟</span><span class="sxs-lookup"><span data-stu-id="64d0b-151">5 min</span></span>|<span data-ttu-id="64d0b-152">已入池的活动连接的最长生存期。</span><span class="sxs-lookup"><span data-stu-id="64d0b-152">Maximum lifetime of an active pooled connection.</span></span> <span data-ttu-id="64d0b-153">在指定时间过后，连接会在当前请求得到服务后立即关闭。</span><span class="sxs-lookup"><span data-stu-id="64d0b-153">After the specified time elapses, the connection closes once the current request is serviced.</span></span><br /><br /> <span data-ttu-id="64d0b-154">此设置仅适用于入池连接。</span><span class="sxs-lookup"><span data-stu-id="64d0b-154">This setting only applies to pooled connections.</span></span>|  
|`ListenBacklog`|<span data-ttu-id="64d0b-155">Integer</span><span class="sxs-lookup"><span data-stu-id="64d0b-155">Integer</span></span>|<span data-ttu-id="64d0b-156">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-156">1</span></span>|<span data-ttu-id="64d0b-157">10</span><span class="sxs-lookup"><span data-stu-id="64d0b-157">10</span></span>|<span data-ttu-id="64d0b-158">在通往该终结点的其他连接被拒绝之前，侦听器可以拥有的尚未得到服务的连接的最大数量。</span><span class="sxs-lookup"><span data-stu-id="64d0b-158">Maximum number of connections that the listener can have unserviced before additional connections to that endpoint are denied.</span></span>|  
|`MaxBufferPoolSize`|<span data-ttu-id="64d0b-159">Long</span><span class="sxs-lookup"><span data-stu-id="64d0b-159">Long</span></span>|<span data-ttu-id="64d0b-160">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-160">0</span></span>|<span data-ttu-id="64d0b-161">512 KB</span><span class="sxs-lookup"><span data-stu-id="64d0b-161">512 KB</span></span>|<span data-ttu-id="64d0b-162">传输用于形成可重用消息缓冲池的最大内存（以字节为单位）。</span><span class="sxs-lookup"><span data-stu-id="64d0b-162">Maximum memory, in bytes, that the transport devotes to pooling reusable message buffers.</span></span> <span data-ttu-id="64d0b-163">当池无法提供消息缓冲区时，系统会分配新的缓冲区以供临时使用。</span><span class="sxs-lookup"><span data-stu-id="64d0b-163">When the pool cannot supply a message buffer, a new buffer is allocated for temporary use.</span></span><br /><br /> <span data-ttu-id="64d0b-164">创建许多通道工厂或侦听器的安装可能会为缓冲池分配大量内存。</span><span class="sxs-lookup"><span data-stu-id="64d0b-164">Installations that create many channel factories or listeners can allocate large amounts of memory for buffer pools.</span></span> <span data-ttu-id="64d0b-165">在这种情况下，减小此缓冲区大小可以极大地降低内存使用率。</span><span class="sxs-lookup"><span data-stu-id="64d0b-165">Reducing this buffer size can greatly reduce memory usage in this scenario.</span></span>|  
|`MaxBufferSize`|<span data-ttu-id="64d0b-166">Integer</span><span class="sxs-lookup"><span data-stu-id="64d0b-166">Integer</span></span>|<span data-ttu-id="64d0b-167">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-167">1</span></span>|<span data-ttu-id="64d0b-168">64 KB</span><span class="sxs-lookup"><span data-stu-id="64d0b-168">64 KB</span></span>|<span data-ttu-id="64d0b-169">用于对数据进行流处理的缓冲区的最大大小（以字节为单位）。</span><span class="sxs-lookup"><span data-stu-id="64d0b-169">Maximum size, in bytes, of a buffer used for streaming data.</span></span> <span data-ttu-id="64d0b-170">如果未设置此传输配额，或传输未使用流，则该配额值与 `MaxReceivedMessageSize` 配额值和 <xref:System.Int32.MaxValue> 中的较小值相同。</span><span class="sxs-lookup"><span data-stu-id="64d0b-170">If this transport quota is not set, or the transport is not using streaming, then the quota value is the same as the smaller of the `MaxReceivedMessageSize` quota value and <xref:System.Int32.MaxValue>.</span></span>|  
|`MaxOutboundConnectionsPerEndpoint`|<span data-ttu-id="64d0b-171">Integer</span><span class="sxs-lookup"><span data-stu-id="64d0b-171">Integer</span></span>|<span data-ttu-id="64d0b-172">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-172">1</span></span>|<span data-ttu-id="64d0b-173">10</span><span class="sxs-lookup"><span data-stu-id="64d0b-173">10</span></span>|<span data-ttu-id="64d0b-174">可以与特定终结点相关联的传出连接的最大数量。</span><span class="sxs-lookup"><span data-stu-id="64d0b-174">Maximum number of outgoing connections that can be associated with a particular endpoint.</span></span><br /><br /> <span data-ttu-id="64d0b-175">此设置仅适用于入池连接。</span><span class="sxs-lookup"><span data-stu-id="64d0b-175">This setting only applies to pooled connections.</span></span>|  
|`MaxOutputDelay`|<span data-ttu-id="64d0b-176">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-176">TimeSpan</span></span>|<span data-ttu-id="64d0b-177">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-177">0</span></span>|<span data-ttu-id="64d0b-178">200 毫秒</span><span class="sxs-lookup"><span data-stu-id="64d0b-178">200 ms</span></span>|<span data-ttu-id="64d0b-179">在执行发送操作后为在单个操作中批处理其他消息而等待的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-179">Maximum time to wait after a send operation for batching additional messages in a single operation.</span></span> <span data-ttu-id="64d0b-180">如果基础传输的缓冲区变满，则消息会较早发送。</span><span class="sxs-lookup"><span data-stu-id="64d0b-180">Messages are sent earlier if the buffer of the underlying transport becomes full.</span></span> <span data-ttu-id="64d0b-181">发送其他消息不会重置延迟期。</span><span class="sxs-lookup"><span data-stu-id="64d0b-181">Sending additional messages does not reset the delay period.</span></span>|  
|`MaxPendingAccepts`|<span data-ttu-id="64d0b-182">Integer</span><span class="sxs-lookup"><span data-stu-id="64d0b-182">Integer</span></span>|<span data-ttu-id="64d0b-183">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-183">1</span></span>|<span data-ttu-id="64d0b-184">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-184">1</span></span>|<span data-ttu-id="64d0b-185">侦听器可拥有并等待的最大通道接受数。</span><span class="sxs-lookup"><span data-stu-id="64d0b-185">Maximum number of accepts for channels that the listener can have waiting.</span></span><br /><br /> <span data-ttu-id="64d0b-186">在接受完成与新的接受开始之间有一个时间间隔。</span><span class="sxs-lookup"><span data-stu-id="64d0b-186">There is an interval of time between the accept completing and a new accept starting.</span></span> <span data-ttu-id="64d0b-187">增加此集合大小可以防止在此时间间隔中连接的客户端被丢弃。</span><span class="sxs-lookup"><span data-stu-id="64d0b-187">Increasing this collection size can prevent clients that connect during this interval from being dropped.</span></span>|  
|`MaxPendingConnections`|<span data-ttu-id="64d0b-188">Integer</span><span class="sxs-lookup"><span data-stu-id="64d0b-188">Integer</span></span>|<span data-ttu-id="64d0b-189">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-189">1</span></span>|<span data-ttu-id="64d0b-190">10</span><span class="sxs-lookup"><span data-stu-id="64d0b-190">10</span></span>|<span data-ttu-id="64d0b-191">侦听器可以拥有的正在等待应用程序接受的最大连接数。</span><span class="sxs-lookup"><span data-stu-id="64d0b-191">Maximum number of connections that the listener can have waiting to be accepted by the application.</span></span> <span data-ttu-id="64d0b-192">超出此配额值时，新的传入连接会被丢弃而不是等待接受。</span><span class="sxs-lookup"><span data-stu-id="64d0b-192">When this quota value is exceeded, new incoming connections are dropped rather than waiting to be accepted.</span></span><br /><br /> <span data-ttu-id="64d0b-193">连接功能（如消息安全）可能会使客户端打开多个连接。</span><span class="sxs-lookup"><span data-stu-id="64d0b-193">Connection features such as message security can cause a client to open more than one connection.</span></span> <span data-ttu-id="64d0b-194">在设置此配额值时，服务管理员应该考虑这些额外的连接。</span><span class="sxs-lookup"><span data-stu-id="64d0b-194">Service administrators should account for these additional connections when setting this quota value.</span></span>|  
|`MaxReceivedMessageSize`|<span data-ttu-id="64d0b-195">Long</span><span class="sxs-lookup"><span data-stu-id="64d0b-195">Long</span></span>|<span data-ttu-id="64d0b-196">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-196">1</span></span>|<span data-ttu-id="64d0b-197">64 KB</span><span class="sxs-lookup"><span data-stu-id="64d0b-197">64 KB</span></span>|<span data-ttu-id="64d0b-198">所接收消息（包括消息头）的最大大小（以字节为单位）；超出此大小，传输将引发异常。</span><span class="sxs-lookup"><span data-stu-id="64d0b-198">Maximum size, in bytes, of a received message, including headers, before the transport raises an exception.</span></span>|  
|`OpenTimeout`|<span data-ttu-id="64d0b-199">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-199">TimeSpan</span></span>|<span data-ttu-id="64d0b-200">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-200">0</span></span>|<span data-ttu-id="64d0b-201">1 分钟</span><span class="sxs-lookup"><span data-stu-id="64d0b-201">1 min</span></span>|<span data-ttu-id="64d0b-202">在传输引发异常之前等待连接建立的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-202">Maximum time to wait for a connection to be established before the transport raises an exception.</span></span>|  
|`ReceiveTimeout`|<span data-ttu-id="64d0b-203">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64d0b-203">TimeSpan</span></span>|<span data-ttu-id="64d0b-204">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-204">0</span></span>|<span data-ttu-id="64d0b-205">10 分钟</span><span class="sxs-lookup"><span data-stu-id="64d0b-205">10 min</span></span>|<span data-ttu-id="64d0b-206">在传输引发异常之前等待读取操作完成的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-206">Maximum time to wait for a read operation to complete before the transport raises an exception.</span></span>|  
|`SendTimeout`|<span data-ttu-id="64d0b-207">Timespan</span><span class="sxs-lookup"><span data-stu-id="64d0b-207">Timespan</span></span>|<span data-ttu-id="64d0b-208">0</span><span class="sxs-lookup"><span data-stu-id="64d0b-208">0</span></span>|<span data-ttu-id="64d0b-209">1 分钟</span><span class="sxs-lookup"><span data-stu-id="64d0b-209">1 min</span></span>|<span data-ttu-id="64d0b-210">在传输引发异常之前等待写入操作完成的最长时间。</span><span class="sxs-lookup"><span data-stu-id="64d0b-210">Maximum time to wait for a write operation to complete before the transport raises an exception.</span></span>|  
  
 <span data-ttu-id="64d0b-211">在通过绑定或配置进行设置时，传输配额 `MaxPendingConnections` 和 `MaxOutboundConnectionsPerEndpoint` 被组合为单个传输配额，称为 `MaxConnections`。</span><span class="sxs-lookup"><span data-stu-id="64d0b-211">The transport quotas `MaxPendingConnections` and `MaxOutboundConnectionsPerEndpoint` are combined into a single transport quota called `MaxConnections` when set through the binding or configuration.</span></span> <span data-ttu-id="64d0b-212">只有使用绑定元素才能分别设置这些配额值。</span><span class="sxs-lookup"><span data-stu-id="64d0b-212">Only the binding element allows setting these quota values individually.</span></span> <span data-ttu-id="64d0b-213">`MaxConnections` 传输配额具有相同的最小值和默认值。</span><span class="sxs-lookup"><span data-stu-id="64d0b-213">The `MaxConnections` transport quota has the same minimum and default values.</span></span>  
  
## <a name="setting-transport-quotas"></a><span data-ttu-id="64d0b-214">设置传输配额</span><span class="sxs-lookup"><span data-stu-id="64d0b-214">Setting Transport Quotas</span></span>  

 <span data-ttu-id="64d0b-215">传输配额通过传输绑定元素、传输绑定、应用程序配置或主机策略进行设置。</span><span class="sxs-lookup"><span data-stu-id="64d0b-215">Transport quotas are set through the transport binding element, the transport binding, application configuration, or host policy.</span></span> <span data-ttu-id="64d0b-216">本文档不涉及通过宿主策略设置传输的内容。</span><span class="sxs-lookup"><span data-stu-id="64d0b-216">This document does not cover setting transports through host policy.</span></span> <span data-ttu-id="64d0b-217">若要了解宿主策略配额的设置，请参考基础传输的文档。</span><span class="sxs-lookup"><span data-stu-id="64d0b-217">Consult the documentation for the underlying transport to discover the settings for host policy quotas.</span></span> <span data-ttu-id="64d0b-218">[配置 HTTP 和 HTTPS](configuring-http-and-https.md)主题介绍了 Http.sys 驱动程序的配额设置。</span><span class="sxs-lookup"><span data-stu-id="64d0b-218">The [Configuring HTTP and HTTPS](configuring-http-and-https.md) topic describes quota settings for the Http.sys driver.</span></span> <span data-ttu-id="64d0b-219">有关对 HTTP、TCP/IP 和命名管道连接配置 Windows 限制的更多信息，请参见 Microsoft 知识库。</span><span class="sxs-lookup"><span data-stu-id="64d0b-219">Search the Microsoft Knowledge Base for more information about configuring Windows limits on HTTP, TCP/IP, and named pipe connections.</span></span>  
  
 <span data-ttu-id="64d0b-220">其他类型的配额间接应用于传输。</span><span class="sxs-lookup"><span data-stu-id="64d0b-220">Other types of quotas apply indirectly to transports.</span></span> <span data-ttu-id="64d0b-221">传输用来将消息转换为字节的消息编码器可以具有它自己的配额设置。</span><span class="sxs-lookup"><span data-stu-id="64d0b-221">The message encoder that the transport uses to transform a message into bytes can have its own quota settings.</span></span> <span data-ttu-id="64d0b-222">但是，这些配额独立于所使用的传输类型。</span><span class="sxs-lookup"><span data-stu-id="64d0b-222">However, these quotas are independent of the type of transport being used.</span></span>  
  
### <a name="controlling-transport-quotas-from-the-binding-element"></a><span data-ttu-id="64d0b-223">通过绑定元素控制传输配额</span><span class="sxs-lookup"><span data-stu-id="64d0b-223">Controlling Transport Quotas from the Binding Element</span></span>  

 <span data-ttu-id="64d0b-224">通过绑定元素设置传输配额为控制传输行为提供了最大的灵活性。</span><span class="sxs-lookup"><span data-stu-id="64d0b-224">Setting transport quotas through the binding element offers the greatest flexibility in controlling the transport's behavior.</span></span> <span data-ttu-id="64d0b-225">生成通道时，将从绑定中获取关闭、打开、接收和发送操作的默认超时值。</span><span class="sxs-lookup"><span data-stu-id="64d0b-225">The default timeouts for Close, Open, Receive, and Send operations are taken from the binding when a channel is built.</span></span>  
  
|<span data-ttu-id="64d0b-226">名称</span><span class="sxs-lookup"><span data-stu-id="64d0b-226">Name</span></span>|<span data-ttu-id="64d0b-227">HTTP</span><span class="sxs-lookup"><span data-stu-id="64d0b-227">HTTP</span></span>|<span data-ttu-id="64d0b-228">TCP/IP</span><span class="sxs-lookup"><span data-stu-id="64d0b-228">TCP/IP</span></span>|<span data-ttu-id="64d0b-229">命名管道</span><span class="sxs-lookup"><span data-stu-id="64d0b-229">Named pipe</span></span>|  
|----------|----------|-------------|----------------|  
|`ChannelInitializationTimeout`||<span data-ttu-id="64d0b-230">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-230">X</span></span>|<span data-ttu-id="64d0b-231">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-231">X</span></span>|  
|`CloseTimeout`||||  
|`ConnectionBufferSize`||<span data-ttu-id="64d0b-232">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-232">X</span></span>|<span data-ttu-id="64d0b-233">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-233">X</span></span>|  
|`IdleTimeout`||<span data-ttu-id="64d0b-234">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-234">X</span></span>|<span data-ttu-id="64d0b-235">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-235">X</span></span>|  
|`LeaseTimeout`||<span data-ttu-id="64d0b-236">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-236">X</span></span>||  
|`ListenBacklog`||<span data-ttu-id="64d0b-237">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-237">X</span></span>||  
|`MaxBufferPoolSize`|<span data-ttu-id="64d0b-238">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-238">X</span></span>|<span data-ttu-id="64d0b-239">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-239">X</span></span>|<span data-ttu-id="64d0b-240">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-240">X</span></span>|  
|`MaxBufferSize`|<span data-ttu-id="64d0b-241">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-241">X</span></span>|<span data-ttu-id="64d0b-242">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-242">X</span></span>|<span data-ttu-id="64d0b-243">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-243">X</span></span>|  
|`MaxOutboundConnectionsPerEndpoint`||<span data-ttu-id="64d0b-244">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-244">X</span></span>|<span data-ttu-id="64d0b-245">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-245">X</span></span>|  
|`MaxOutputDelay`||<span data-ttu-id="64d0b-246">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-246">X</span></span>|<span data-ttu-id="64d0b-247">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-247">X</span></span>|  
|`MaxPendingAccepts`||<span data-ttu-id="64d0b-248">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-248">X</span></span>|<span data-ttu-id="64d0b-249">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-249">X</span></span>|  
|`MaxPendingConnections`||<span data-ttu-id="64d0b-250">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-250">X</span></span>|<span data-ttu-id="64d0b-251">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-251">X</span></span>|  
|`MaxReceivedMessageSize`|<span data-ttu-id="64d0b-252">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-252">X</span></span>|<span data-ttu-id="64d0b-253">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-253">X</span></span>|<span data-ttu-id="64d0b-254">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-254">X</span></span>|  
|`OpenTimeout`||||  
|`ReceiveTimeout`||||  
|`SendTimeout`||||  
  
### <a name="controlling-transport-quotas-from-the-binding"></a><span data-ttu-id="64d0b-255">通过绑定控制传输配额</span><span class="sxs-lookup"><span data-stu-id="64d0b-255">Controlling Transport Quotas from the Binding</span></span>  

 <span data-ttu-id="64d0b-256">通过绑定设置传输配额可提供一组简化的配额以供选择，同时仍然提供对最常用配额值的访问。</span><span class="sxs-lookup"><span data-stu-id="64d0b-256">Setting transport quotas through the binding offers a simplified set of quotas to choose from while still giving access to the most common quota values.</span></span>  
  
|<span data-ttu-id="64d0b-257">名称</span><span class="sxs-lookup"><span data-stu-id="64d0b-257">Name</span></span>|<span data-ttu-id="64d0b-258">HTTP</span><span class="sxs-lookup"><span data-stu-id="64d0b-258">HTTP</span></span>|<span data-ttu-id="64d0b-259">TCP/IP</span><span class="sxs-lookup"><span data-stu-id="64d0b-259">TCP/IP</span></span>|<span data-ttu-id="64d0b-260">命名管道</span><span class="sxs-lookup"><span data-stu-id="64d0b-260">Named pipe</span></span>|  
|----------|----------|-------------|----------------|  
|`ChannelInitializationTimeout`||||  
|`CloseTimeout`|<span data-ttu-id="64d0b-261">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-261">X</span></span>|<span data-ttu-id="64d0b-262">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-262">X</span></span>|<span data-ttu-id="64d0b-263">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-263">X</span></span>|  
|`ConnectionBufferSize`||||  
|`IdleTimeout`||||  
|`LeaseTimeout`||||  
|`ListenBacklog`||<span data-ttu-id="64d0b-264">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-264">X</span></span>||  
|`MaxBufferPoolSize`|<span data-ttu-id="64d0b-265">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-265">X</span></span>|<span data-ttu-id="64d0b-266">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-266">X</span></span>|<span data-ttu-id="64d0b-267">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-267">X</span></span>|  
|`MaxBufferSize`|<span data-ttu-id="64d0b-268">1</span><span class="sxs-lookup"><span data-stu-id="64d0b-268">1</span></span>|<span data-ttu-id="64d0b-269">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-269">X</span></span>|<span data-ttu-id="64d0b-270">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-270">X</span></span>|  
|`MaxOutboundConnectionsPerEndpoint`||<span data-ttu-id="64d0b-271">2</span><span class="sxs-lookup"><span data-stu-id="64d0b-271">2</span></span>|<span data-ttu-id="64d0b-272">2</span><span class="sxs-lookup"><span data-stu-id="64d0b-272">2</span></span>|  
|`MaxOutputDelay`||||  
|`MaxPendingAccepts`||||  
|`MaxPendingConnections`||<span data-ttu-id="64d0b-273">2</span><span class="sxs-lookup"><span data-stu-id="64d0b-273">2</span></span>|<span data-ttu-id="64d0b-274">2</span><span class="sxs-lookup"><span data-stu-id="64d0b-274">2</span></span>|  
|`MaxReceivedMessageSize`|<span data-ttu-id="64d0b-275">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-275">X</span></span>|<span data-ttu-id="64d0b-276">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-276">X</span></span>|<span data-ttu-id="64d0b-277">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-277">X</span></span>|  
|`OpenTimeout`|<span data-ttu-id="64d0b-278">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-278">X</span></span>|<span data-ttu-id="64d0b-279">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-279">X</span></span>|<span data-ttu-id="64d0b-280">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-280">X</span></span>|  
|`ReceiveTimeout`|<span data-ttu-id="64d0b-281">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-281">X</span></span>|<span data-ttu-id="64d0b-282">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-282">X</span></span>|<span data-ttu-id="64d0b-283">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-283">X</span></span>|  
|`SendTimeout`|<span data-ttu-id="64d0b-284">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-284">X</span></span>|<span data-ttu-id="64d0b-285">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-285">X</span></span>|<span data-ttu-id="64d0b-286">X</span><span class="sxs-lookup"><span data-stu-id="64d0b-286">X</span></span>|  
  
1. <span data-ttu-id="64d0b-287">`MaxBufferSize` 传输配额仅在 `BasicHttp` 绑定上可用。</span><span class="sxs-lookup"><span data-stu-id="64d0b-287">The `MaxBufferSize` transport quota is only available on the `BasicHttp` binding.</span></span> <span data-ttu-id="64d0b-288">`WSHttp` 绑定适用于不支持流式传输模式的情况。</span><span class="sxs-lookup"><span data-stu-id="64d0b-288">The `WSHttp` bindings are for scenarios that do not support streamed transport modes.</span></span>  
  
2. <span data-ttu-id="64d0b-289">传输配额 `MaxPendingConnections` 和 `MaxOutboundConnectionsPerEndpoint` 被组合为单个传输配额，称为 `MaxConnections`。</span><span class="sxs-lookup"><span data-stu-id="64d0b-289">The transport quotas `MaxPendingConnections` and `MaxOutboundConnectionsPerEndpoint` are combined into a single transport quota called `MaxConnections`.</span></span>  
  
### <a name="controlling-transport-quotas-from-configuration"></a><span data-ttu-id="64d0b-290">通过配置控制传输配额</span><span class="sxs-lookup"><span data-stu-id="64d0b-290">Controlling Transport Quotas from Configuration</span></span>  

 <span data-ttu-id="64d0b-291">应用程序配置可以设置与直接访问绑定上的属性一样的传输配额。</span><span class="sxs-lookup"><span data-stu-id="64d0b-291">Application configuration can set the same transport quotas as directly accessing properties on a binding.</span></span> <span data-ttu-id="64d0b-292">在配置文件中，传输配额的名称总是以小写字母开头。</span><span class="sxs-lookup"><span data-stu-id="64d0b-292">In configuration files, the name of a transport quota always starts with a lowercase letter.</span></span> <span data-ttu-id="64d0b-293">例如，绑定上的 `CloseTimeout` 属性对应于配置中的 `closeTimeout` 设置，而绑定上的 `MaxConnections` 属性对应于配置中的 `maxConnections` 设置。</span><span class="sxs-lookup"><span data-stu-id="64d0b-293">For example, the `CloseTimeout` property on a binding corresponds to the `closeTimeout` setting in configuration and the `MaxConnections` property on a binding corresponds to the `maxConnections` setting in configuration.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="64d0b-294">请参阅</span><span class="sxs-lookup"><span data-stu-id="64d0b-294">See also</span></span>

- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>
- <xref:System.ServiceModel.Channels.HttpTransportBindingElement>
- <xref:System.ServiceModel.Channels.TcpTransportBindingElement>
- <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>
- <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement>
- <xref:System.ServiceModel.Channels.TransportBindingElement>

---
description: '了解详细信息：实体框架的迁移注意事项 () '
title: 迁移注意事项（实体框架）
ms.date: 03/30/2017
ms.assetid: c85b6fe8-cc32-4642-8f0a-dc0e5a695936
ms.openlocfilehash: 6824d28fecc743e17046c826b887900218c90f3c
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/06/2021
ms.locfileid: "99739243"
---
# <a name="migration-considerations-entity-framework"></a><span data-ttu-id="9307f-103">迁移注意事项（实体框架）</span><span class="sxs-lookup"><span data-stu-id="9307f-103">Migration Considerations (Entity Framework)</span></span>

<span data-ttu-id="9307f-104">ADO.NET 实体框架为现有应用程序提供了几个优点。</span><span class="sxs-lookup"><span data-stu-id="9307f-104">The ADO.NET Entity Framework provides several benefits to an existing application.</span></span> <span data-ttu-id="9307f-105">其中最重要的益处之一在于能够使用概念模型将应用程序使用的数据结构与数据源中的架构分离。</span><span class="sxs-lookup"><span data-stu-id="9307f-105">One of the most important of these benefits is the ability to use a conceptual model to separate data structures used by the application from the schema in the data source.</span></span> <span data-ttu-id="9307f-106">这样，日后便可轻松地对存储模型或数据源本身进行更改，而无需对应用程序进行补偿更改。</span><span class="sxs-lookup"><span data-stu-id="9307f-106">This enables you to easily make future changes to the storage model or to the data source itself without making compensating changes to the application.</span></span> <span data-ttu-id="9307f-107">有关使用实体框架的好处的详细信息，请参阅 [实体框架概述](overview.md) 和 [实体数据模型](../entity-data-model.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-107">For more information about the benefits of using the Entity Framework, see [Entity Framework Overview](overview.md) and [Entity Data Model](../entity-data-model.md).</span></span>  
  
 <span data-ttu-id="9307f-108">若要利用实体框架的优势，可以将现有应用程序迁移到实体框架中。</span><span class="sxs-lookup"><span data-stu-id="9307f-108">To take advantage of the benefits of the Entity Framework, you can migrate an existing application to the Entity Framework.</span></span> <span data-ttu-id="9307f-109">某些任务对于所有迁移的应用程序是通用的。</span><span class="sxs-lookup"><span data-stu-id="9307f-109">Some tasks are common to all migrated applications.</span></span> <span data-ttu-id="9307f-110">这些常见任务包括升级应用程序以使用从3.5 版 Service Pack 1 (SP1) 、定义模型和映射和配置实体框架开始 .NET Framework。</span><span class="sxs-lookup"><span data-stu-id="9307f-110">These common tasks include upgrading the application to use the .NET Framework starting with version 3.5 Service Pack 1 (SP1), defining models and mapping, and configuring the Entity Framework.</span></span> <span data-ttu-id="9307f-111">将应用程序迁移到实体框架时，还需要考虑其他注意事项。</span><span class="sxs-lookup"><span data-stu-id="9307f-111">When you migrate an application to the Entity Framework, there are additional considerations that apply.</span></span> <span data-ttu-id="9307f-112">相关注意事项取决于要迁移的应用程序的类型及具体功能。</span><span class="sxs-lookup"><span data-stu-id="9307f-112">These considerations depend on the type of application being migrated and on the specific functionality of the application.</span></span> <span data-ttu-id="9307f-113">本主题提供的信息可帮助您为现有应用程序选择最佳的升级途径。</span><span class="sxs-lookup"><span data-stu-id="9307f-113">This topic provides information to help you choose the best approach to use when you upgrade an existing application.</span></span>  
  
## <a name="general-migration-considerations"></a><span data-ttu-id="9307f-114">有关迁移的一般注意事项</span><span class="sxs-lookup"><span data-stu-id="9307f-114">General Migration Considerations</span></span>  

 <span data-ttu-id="9307f-115">将任何应用程序迁移到实体框架时，请注意以下事项：</span><span class="sxs-lookup"><span data-stu-id="9307f-115">The following considerations apply when you migrate any application to the Entity Framework:</span></span>  
  
- <span data-ttu-id="9307f-116">只要应用程序使用的数据源的数据提供程序支持实体框架，任何使用从版本 3.5 SP1 开始的 .NET Framework 的应用程序都可以迁移到实体框架。</span><span class="sxs-lookup"><span data-stu-id="9307f-116">Any application that uses the .NET Framework starting with version 3.5 SP1 can be migrated to the Entity Framework, as long as the data provider for the data source that is used by the application supports the Entity Framework.</span></span>  
  
- <span data-ttu-id="9307f-117">即使某个数据源提供程序支持实体框架，实体框架也可能不支持该提供程序的所有功能。</span><span class="sxs-lookup"><span data-stu-id="9307f-117">The Entity Framework may not support all the functionality of a data source provider, even if that provider supports the Entity Framework.</span></span>  
  
- <span data-ttu-id="9307f-118">对于大型或复杂的应用程序，不需要一次性地将整个应用程序迁移到实体框架。</span><span class="sxs-lookup"><span data-stu-id="9307f-118">For a large or complex application, you are not required to migrate the whole application to the Entity Framework at one time.</span></span> <span data-ttu-id="9307f-119">但是，在数据源发生更改时，仍然需要更改应用程序中不使用实体框架的任何部分。</span><span class="sxs-lookup"><span data-stu-id="9307f-119">However, any part of the application that does not use the Entity Framework must still be changed when the data source changes.</span></span>  
  
- <span data-ttu-id="9307f-120">实体框架使用的数据提供程序连接可以与应用程序的其他部分共享，因为实体框架使用 ADO.NET 数据提供程序访问数据源。</span><span class="sxs-lookup"><span data-stu-id="9307f-120">The data provider connection used by the Entity Framework can be shared with other parts of your application because the Entity Framework uses ADO.NET data providers to access the data source.</span></span> <span data-ttu-id="9307f-121">例如，实体框架使用 SqlClient 提供程序访问 SQL Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="9307f-121">For example, the SqlClient provider is used by the Entity Framework to access a SQL Server database.</span></span> <span data-ttu-id="9307f-122">有关详细信息，请参阅 [用于 Entity Framework 的 EntityClient 提供程序](entityclient-provider-for-the-entity-framework.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-122">For more information, see [EntityClient Provider for the Entity Framework](entityclient-provider-for-the-entity-framework.md).</span></span>  
  
## <a name="common-migration-tasks"></a><span data-ttu-id="9307f-123">通用迁移任务</span><span class="sxs-lookup"><span data-stu-id="9307f-123">Common Migration Tasks</span></span>  

 <span data-ttu-id="9307f-124">将现有应用程序迁移到实体框架的路径取决于应用程序的类型和现有的数据访问策略。</span><span class="sxs-lookup"><span data-stu-id="9307f-124">The path to migrate an existing application to the Entity Framework depends both on the type of application and on the existing data access strategy.</span></span> <span data-ttu-id="9307f-125">但是，在将现有应用程序迁移到实体框架时，必须始终执行以下任务。</span><span class="sxs-lookup"><span data-stu-id="9307f-125">However, you must always perform the following tasks when you migrate an existing application to the Entity Framework.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9307f-126">从 Visual Studio 2008 开始使用实体数据模型工具时，将自动执行所有这些任务。</span><span class="sxs-lookup"><span data-stu-id="9307f-126">All of these tasks are performed automatically when you use the Entity Data Model tools starting with Visual Studio 2008.</span></span> <span data-ttu-id="9307f-127">有关详细信息，请参阅 [如何：使用实体数据模型向导](/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-127">For more information, see [How to: Use the Entity Data Model Wizard](/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100)).</span></span>  
  
1. <span data-ttu-id="9307f-128">升级应用程序。</span><span class="sxs-lookup"><span data-stu-id="9307f-128">Upgrade the application.</span></span>  
  
     <span data-ttu-id="9307f-129">使用早期版本的 Visual Studio 和 .NET Framework 创建的项目必须升级为使用 Visual Studio 2008 SP1 和从版本 3.5 SP1 开始 .NET Framework。</span><span class="sxs-lookup"><span data-stu-id="9307f-129">A project created by using an earlier version of Visual Studio and the .NET Framework must be upgraded to use Visual Studio 2008 SP1 and the .NET Framework starting with version 3.5 SP1.</span></span>  
  
2. <span data-ttu-id="9307f-130">定义模型和映射。</span><span class="sxs-lookup"><span data-stu-id="9307f-130">Define the models and mapping.</span></span>  
  
     <span data-ttu-id="9307f-131">模型和映射文件定义概念模型中的实体、数据源中的结构（如表、存储过程和视图）以及实体与数据源结构之间的映射。</span><span class="sxs-lookup"><span data-stu-id="9307f-131">The model and mapping files define entities in the conceptual model; structures in the data source, such as tables, stored procedures, and views; and the mapping between the entities and data source structures.</span></span> <span data-ttu-id="9307f-132">有关详细信息，请参阅 [如何：手动定义模型和映射文件](/previous-versions/dotnet/netframework-4.0/bb399785(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-132">For more information, see [How to: Manually Define the Model and Mapping Files](/previous-versions/dotnet/netframework-4.0/bb399785(v=vs.100)).</span></span>  
  
     <span data-ttu-id="9307f-133">在存储模型中定义的类型必须与数据源中对象的名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="9307f-133">Types that are defined in the storage model must match the name of objects in the data source.</span></span> <span data-ttu-id="9307f-134">如果现有应用程序将数据作为对象公开，则必须确保在概念模型中定义的实体和属性与这些现有数据类和属性的名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="9307f-134">If the existing application exposes data as objects, you must ensure that the entities and properties that are defined in the conceptual model match the names of these existing data classes and properties.</span></span> <span data-ttu-id="9307f-135">有关详细信息，请参阅 [如何：自定义建模和映射文件以使用自定义对象](/previous-versions/dotnet/netframework-4.0/bb738625(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-135">For more information, see [How to: Customize Modeling and Mapping Files to Work with Custom Objects](/previous-versions/dotnet/netframework-4.0/bb738625(v=vs.100)).</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="9307f-136">可以使用实体数据模型设计器重命名概念模型中的实体以匹配现有对象。</span><span class="sxs-lookup"><span data-stu-id="9307f-136">The Entity Data Model Designer can be used to rename entities in the conceptual model to match existing objects.</span></span> <span data-ttu-id="9307f-137">有关详细信息，请参阅 [实体数据模型设计器](/previous-versions/dotnet/netframework-4.0/cc716685(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-137">For more information, see [Entity Data Model Designer](/previous-versions/dotnet/netframework-4.0/cc716685(v=vs.100)).</span></span>  
  
3. <span data-ttu-id="9307f-138">定义连接字符串。</span><span class="sxs-lookup"><span data-stu-id="9307f-138">Define the connection string.</span></span>  
  
     <span data-ttu-id="9307f-139">实体框架在针对概念模型执行查询时使用特殊格式的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="9307f-139">The Entity Framework uses a specially formatted connection string when executing queries against a conceptual model.</span></span> <span data-ttu-id="9307f-140">此连接字符串包装有关模型和映射文件和到数据源的连接的信息。</span><span class="sxs-lookup"><span data-stu-id="9307f-140">This connection string encapsulates information about the model and mapping files and the connection to the data source.</span></span> <span data-ttu-id="9307f-141">有关详细信息，请参阅 [如何：定义连接字符串](how-to-define-the-connection-string.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-141">For more information, see [How to: Define the Connection String](how-to-define-the-connection-string.md).</span></span>  
  
4. <span data-ttu-id="9307f-142">配置 Visual Studio 项目。</span><span class="sxs-lookup"><span data-stu-id="9307f-142">Configure the Visual Studio project.</span></span>  
  
     <span data-ttu-id="9307f-143">必须将对实体框架程序集和模型和映射文件的引用添加到 Visual Studio 项目中。</span><span class="sxs-lookup"><span data-stu-id="9307f-143">References to Entity Framework assemblies and the model and mapping files must be added to the Visual Studio project.</span></span> <span data-ttu-id="9307f-144">可以将这些映射文件添加到项目中，以确保这些文件随应用程序一起部署在连接字符串中所指示的位置。</span><span class="sxs-lookup"><span data-stu-id="9307f-144">You can add these mapping files to the project to ensure that they are deployed with the application in the location that is indicated in the connection string.</span></span> <span data-ttu-id="9307f-145">有关详细信息，请参阅 [如何：手动配置实体框架项目](/previous-versions/dotnet/netframework-4.0/bb738546(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-145">For more information, see [How to: Manually Configure an Entity Framework Project](/previous-versions/dotnet/netframework-4.0/bb738546(v=vs.100)).</span></span>  
  
## <a name="considerations-for-applications-with-existing-objects"></a><span data-ttu-id="9307f-146">有关包含现有对象的应用程序的注意事项</span><span class="sxs-lookup"><span data-stu-id="9307f-146">Considerations for Applications with Existing Objects</span></span>  

 <span data-ttu-id="9307f-147">从 .NET Framework 4 开始，实体框架支持 (POCO) 的 "纯旧" CLR 对象（也称为持久性未知对象）。</span><span class="sxs-lookup"><span data-stu-id="9307f-147">Starting with the .NET Framework 4, the Entity Framework supports "plain old" CLR objects (POCO), also called persistence-ignorant objects.</span></span> <span data-ttu-id="9307f-148">在大多数情况下，你的现有对象可通过进行少量更改来处理实体框架。</span><span class="sxs-lookup"><span data-stu-id="9307f-148">In most cases, your existing objects can work with the Entity Framework by making minor changes.</span></span> <span data-ttu-id="9307f-149">有关详细信息，请参阅使用 [POCO 实体](/previous-versions/dotnet/netframework-4.0/dd456853(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-149">For more information, see [Working with POCO Entities](/previous-versions/dotnet/netframework-4.0/dd456853(v=vs.100)).</span></span> <span data-ttu-id="9307f-150">你还可以将应用程序迁移到实体框架，并使用实体框架工具生成的数据类。</span><span class="sxs-lookup"><span data-stu-id="9307f-150">You can also migrate an application to the Entity Framework and use the data classes that are generated by the Entity Framework tools.</span></span> <span data-ttu-id="9307f-151">有关详细信息，请参阅 [如何：使用实体数据模型向导](/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-151">For more information, see [How to: Use the Entity Data Model Wizard](/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100)).</span></span>  
  
## <a name="considerations-for-applications-that-use-adonet-providers"></a><span data-ttu-id="9307f-152">有关使用 ADO.NET 提供程序的应用程序的注意事项</span><span class="sxs-lookup"><span data-stu-id="9307f-152">Considerations for Applications that Use ADO.NET Providers</span></span>  

 <span data-ttu-id="9307f-153">使用 ADO.NET 提供程序（如 SqlClient），您可以查询数据源以返回表格数据。</span><span class="sxs-lookup"><span data-stu-id="9307f-153">ADO.NET providers, such as SqlClient, enable you to query a data source to return tabular data.</span></span> <span data-ttu-id="9307f-154">还可以将数据加载到 ADO.NET 数据集中。</span><span class="sxs-lookup"><span data-stu-id="9307f-154">Data can also be loaded into an ADO.NET DataSet.</span></span> <span data-ttu-id="9307f-155">以下列表描述了升级使用现有 ADO.NET 提供程序的应用程序时的注意事项：</span><span class="sxs-lookup"><span data-stu-id="9307f-155">The following list describes considerations for upgrading an application that uses an existing ADO.NET provider:</span></span>  
  
- <span data-ttu-id="9307f-156">使用数据读取器显示表格格式数据。</span><span class="sxs-lookup"><span data-stu-id="9307f-156">Displaying tabular data by using a data reader.</span></span>  

  <span data-ttu-id="9307f-157">可以考虑 [!INCLUDE[esql](../../../../../includes/esql-md.md)] 使用 EntityClient 提供程序执行查询并枚举返回的 <xref:System.Data.EntityClient.EntityDataReader> 对象。</span><span class="sxs-lookup"><span data-stu-id="9307f-157">You may consider executing an [!INCLUDE[esql](../../../../../includes/esql-md.md)] query using the EntityClient provider and enumerating through the returned <xref:System.Data.EntityClient.EntityDataReader> object.</span></span> <span data-ttu-id="9307f-158">仅当应用程序使用数据读取器显示表格格式数据，且不需要实体框架提供的工具将数据具体化为对象、跟踪更改和进行更新时，才执行此操作。</span><span class="sxs-lookup"><span data-stu-id="9307f-158">Do this only if your application displays tabular data using a data reader and does not require the facilities provided by the Entity Framework for materializing data into objects, tracking changes, and making updates.</span></span> <span data-ttu-id="9307f-159">可以继续使用对数据源进行更新的现有数据访问代码，但可以使用从 <xref:System.Data.EntityClient.EntityConnection.StoreConnection%2A> 的 <xref:System.Data.EntityClient.EntityConnection> 属性访问的现有连接。</span><span class="sxs-lookup"><span data-stu-id="9307f-159">You can continue to use existing data access code that makes updates to the data source, but you can use the existing connection accessed from the <xref:System.Data.EntityClient.EntityConnection.StoreConnection%2A> property of <xref:System.Data.EntityClient.EntityConnection>.</span></span> <span data-ttu-id="9307f-160">有关详细信息，请参阅 [用于 Entity Framework 的 EntityClient 提供程序](entityclient-provider-for-the-entity-framework.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-160">For more information, see [EntityClient Provider for the Entity Framework](entityclient-provider-for-the-entity-framework.md).</span></span>  
  
- <span data-ttu-id="9307f-161">使用数据集。</span><span class="sxs-lookup"><span data-stu-id="9307f-161">Working with DataSets.</span></span>  

  <span data-ttu-id="9307f-162">实体框架提供了许多与数据集提供的功能相同的功能，包括内存中持久性、更改跟踪、数据绑定以及将对象序列化为 XML 数据。</span><span class="sxs-lookup"><span data-stu-id="9307f-162">The Entity Framework provides many of the same functionalities provided by DataSet, including in-memory persistence, change tracking, data binding, and serializing objects as XML data.</span></span> <span data-ttu-id="9307f-163">有关详细信息，请参阅使用 [对象](working-with-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-163">For more information, see [Working with Objects](working-with-objects.md).</span></span>  
  
  <span data-ttu-id="9307f-164">如果实体框架未提供应用程序所需的数据集功能，仍然可以通过使用 LINQ to DataSet 来利用 LINQ 查询的优点。</span><span class="sxs-lookup"><span data-stu-id="9307f-164">If the Entity Framework does not provide the functionality of DataSet needed by your application, you can still take advantage of the benefits of LINQ queries by using LINQ to DataSet.</span></span> <span data-ttu-id="9307f-165">有关详细信息，请参阅 [LINQ to DataSet](../linq-to-dataset.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-165">For more information, see [LINQ to DataSet](../linq-to-dataset.md).</span></span>  
  
## <a name="considerations-for-applications-that-bind-data-to-controls"></a><span data-ttu-id="9307f-166">有关将数据绑定到控件的应用程序的注意事项</span><span class="sxs-lookup"><span data-stu-id="9307f-166">Considerations for Applications that Bind Data to Controls</span></span>  

 <span data-ttu-id="9307f-167">.NET Framework 允许您在数据源（例如数据集或 ASP.NET 数据源控件）中封装数据，然后将用户界面元素绑定到这些数据控件。</span><span class="sxs-lookup"><span data-stu-id="9307f-167">The .NET Framework lets you encapsulate data in a data source, such as a DataSet or an ASP.NET data source control, and then bind user interface elements to those data controls.</span></span> <span data-ttu-id="9307f-168">下表介绍将控件绑定到实体框架数据时的注意事项。</span><span class="sxs-lookup"><span data-stu-id="9307f-168">The following list describes considerations for binding controls to Entity Framework data.</span></span>  
  
- <span data-ttu-id="9307f-169">将数据绑定到控件。</span><span class="sxs-lookup"><span data-stu-id="9307f-169">Binding data to controls.</span></span>  

  <span data-ttu-id="9307f-170">在查询概念模型时，实体框架以实体类型实例的对象的形式返回数据。</span><span class="sxs-lookup"><span data-stu-id="9307f-170">When you query the conceptual model, the Entity Framework returns the data as objects that are instances of entity types.</span></span> <span data-ttu-id="9307f-171">这些对象可以直接绑定到控件，此绑定支持更新。</span><span class="sxs-lookup"><span data-stu-id="9307f-171">These objects can be bound directly to controls, and this binding supports updates.</span></span> <span data-ttu-id="9307f-172">这意味着对控件中的数据（如中的行）所做的更改 <xref:System.Windows.Forms.DataGridView> 会在调用方法时自动保存到数据库 <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> 。</span><span class="sxs-lookup"><span data-stu-id="9307f-172">This means that changes to data in a control, such as a row in a <xref:System.Windows.Forms.DataGridView>, automatically get saved to the database when the <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> method is called.</span></span>  
  
  <span data-ttu-id="9307f-173">如果应用程序对查询结果进行枚举，以在 <xref:System.Windows.Forms.DataGridView> 或支持数据绑定的其他类型的控件中显示数据，则可以修改应用程序以将该控件绑定到 <xref:System.Data.Objects.ObjectQuery%601> 的结果。</span><span class="sxs-lookup"><span data-stu-id="9307f-173">If your application enumerates the results of a query to display data in a <xref:System.Windows.Forms.DataGridView> or other type of control that supports data binding, you can modify your application to bind the control to the result of an <xref:System.Data.Objects.ObjectQuery%601>.</span></span>  
  
  <span data-ttu-id="9307f-174">有关详细信息，请参阅 [将对象绑定到控件](/previous-versions/dotnet/netframework-4.0/bb738469(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-174">For more information, see [Binding Objects to Controls](/previous-versions/dotnet/netframework-4.0/bb738469(v=vs.100)).</span></span>  
  
- <span data-ttu-id="9307f-175">ASP.NET 数据源控件。</span><span class="sxs-lookup"><span data-stu-id="9307f-175">ASP.NET data source controls.</span></span>  

  <span data-ttu-id="9307f-176">实体框架包含用于简化 ASP.NET Web 应用程序中的数据绑定的数据源控件。</span><span class="sxs-lookup"><span data-stu-id="9307f-176">The Entity Framework includes a data source control designed to simplify data binding in ASP.NET Web applications.</span></span> <span data-ttu-id="9307f-177">有关详细信息，请参阅 [EntityDataSource Web 服务器控件概述](/previous-versions/aspnet/cc488502(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-177">For more information, see [EntityDataSource Web Server Control Overview](/previous-versions/aspnet/cc488502(v=vs.100)).</span></span>  
  
## <a name="other-considerations"></a><span data-ttu-id="9307f-178">其他注意事项</span><span class="sxs-lookup"><span data-stu-id="9307f-178">Other Considerations</span></span>  

 <span data-ttu-id="9307f-179">以下是在将特定类型的应用程序迁移到实体框架时可能需要考虑的一些注意事项。</span><span class="sxs-lookup"><span data-stu-id="9307f-179">The following are considerations that may apply when you migrate specific types of applications to the Entity Framework.</span></span>  
  
- <span data-ttu-id="9307f-180">公开数据服务的应用程序。</span><span class="sxs-lookup"><span data-stu-id="9307f-180">Applications that expose data services.</span></span>  

  <span data-ttu-id="9307f-181">基于 Windows Communication Foundation (WCF) 的 Web 服务和应用程序使用 XML 请求/响应消息格式公开基础数据源中的数据。</span><span class="sxs-lookup"><span data-stu-id="9307f-181">Web services and applications that are based on the Windows Communication Foundation (WCF) expose data from an underlying data source by using an XML request/response messaging format.</span></span> <span data-ttu-id="9307f-182">实体框架支持通过使用二进制、XML 或 WCF 数据协定序列化来序列化实体对象。</span><span class="sxs-lookup"><span data-stu-id="9307f-182">The Entity Framework supports the serialization of entity objects by using binary, XML, or WCF data contract serialization.</span></span> <span data-ttu-id="9307f-183">二进制和 WCF 序列化都支持对象图的整体序列化。</span><span class="sxs-lookup"><span data-stu-id="9307f-183">Binary and WCF serialization both support full serialization of object graphs.</span></span> <span data-ttu-id="9307f-184">有关详细信息，请参阅 [生成 N 层应用程序](/previous-versions/dotnet/netframework-4.0/bb896304(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-184">For more information, see [Building N-Tier Applications](/previous-versions/dotnet/netframework-4.0/bb896304(v=vs.100)).</span></span>  
  
- <span data-ttu-id="9307f-185">使用 XML 数据的应用程序。</span><span class="sxs-lookup"><span data-stu-id="9307f-185">Applications that use XML data.</span></span>  

  <span data-ttu-id="9307f-186">对象序列化允许您创建实体框架数据服务。</span><span class="sxs-lookup"><span data-stu-id="9307f-186">Object serialization enables you to create Entity Framework data services.</span></span> <span data-ttu-id="9307f-187">这些服务为使用 XML 数据的应用程序（如基于 AJAX 的 Internet 应用程序）提供数据。</span><span class="sxs-lookup"><span data-stu-id="9307f-187">These services provide data to applications that consume XML data, such as AJAX-based Internet applications.</span></span> <span data-ttu-id="9307f-188">在这些情况下，请考虑使用 WCF Data Services。</span><span class="sxs-lookup"><span data-stu-id="9307f-188">In these cases, consider using WCF Data Services.</span></span> <span data-ttu-id="9307f-189">这些数据服务基于实体数据模型，并使用标准具象状态传输 (REST) HTTP 操作（如 GET、PUT 和 POST）提供对实体数据的动态访问。</span><span class="sxs-lookup"><span data-stu-id="9307f-189">These data services are based on the Entity Data Model and provide dynamic access to entity data by using standard Representational State Transfer (REST) HTTP actions, such as GET, PUT, and POST.</span></span> <span data-ttu-id="9307f-190">有关详细信息，请参阅 [WCF Data Services 4.5](../../wcf/index.md)。</span><span class="sxs-lookup"><span data-stu-id="9307f-190">For more information, see [WCF Data Services 4.5](../../wcf/index.md).</span></span>  
  
  <span data-ttu-id="9307f-191">实体框架不支持本机 XML 数据类型。</span><span class="sxs-lookup"><span data-stu-id="9307f-191">The Entity Framework does not support a native-XML data type.</span></span> <span data-ttu-id="9307f-192">这意味着在将实体映射到包含 XML 列的表时，该 XML 列的等效实体属性是一个字符串。</span><span class="sxs-lookup"><span data-stu-id="9307f-192">This means that when an entity is mapped to a table with an XML column, the equivalent entity property for the XML column is a string.</span></span> <span data-ttu-id="9307f-193">对象可以断开连接，并序列化为 XML。</span><span class="sxs-lookup"><span data-stu-id="9307f-193">Objects can be disconnected and serialized as XML.</span></span> <span data-ttu-id="9307f-194">有关详细信息，请参阅 [序列化对象](/previous-versions/dotnet/netframework-4.0/bb738446(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-194">For more information, see [Serializing Objects](/previous-versions/dotnet/netframework-4.0/bb738446(v=vs.100)).</span></span>  
  
  <span data-ttu-id="9307f-195">如果应用程序需要查询 XML 数据，则仍然可以通过使用 LINQ to XML 来利用 LINQ 查询的优点。</span><span class="sxs-lookup"><span data-stu-id="9307f-195">If your application requires the ability to query XML data, you can still take advantage of the benefits of LINQ queries by using LINQ to XML.</span></span> <span data-ttu-id="9307f-196">有关详细信息，请参阅 [LINQ to XML (c # ) ](../../../../standard/linq/linq-xml-overview.md) 或 [LINQ to XML (](../../../../standard/linq/linq-xml-overview.md)Visual Basic) 。</span><span class="sxs-lookup"><span data-stu-id="9307f-196">For more information, see [LINQ to XML (C#)](../../../../standard/linq/linq-xml-overview.md) or [LINQ to XML (Visual Basic)](../../../../standard/linq/linq-xml-overview.md).</span></span>  
  
- <span data-ttu-id="9307f-197">维护状态的应用程序。</span><span class="sxs-lookup"><span data-stu-id="9307f-197">Applications that maintain state.</span></span>  

  <span data-ttu-id="9307f-198">ASP.NET Web 应用程序必须经常维护网页或用户会话的状态。</span><span class="sxs-lookup"><span data-stu-id="9307f-198">ASP.NET Web applications must frequently maintain the state of a Web page or of a user session.</span></span> <span data-ttu-id="9307f-199">实例中的对象 <xref:System.Data.Objects.ObjectContext> 可以存储在客户端视图状态或服务器上的会话状态中，之后检索和重新附加到新的对象上下文。</span><span class="sxs-lookup"><span data-stu-id="9307f-199">Objects in an <xref:System.Data.Objects.ObjectContext> instance can be stored in the client view state or in the session state on the server, and later retrieved and reattached to a new object context.</span></span> <span data-ttu-id="9307f-200">有关详细信息，请参阅 [附加和分离对象](/previous-versions/dotnet/netframework-4.0/bb896271(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9307f-200">For more information, see [Attaching and Detaching Objects](/previous-versions/dotnet/netframework-4.0/bb896271(v=vs.100)).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9307f-201">请参阅</span><span class="sxs-lookup"><span data-stu-id="9307f-201">See also</span></span>

- [<span data-ttu-id="9307f-202">部署注意事项</span><span class="sxs-lookup"><span data-stu-id="9307f-202">Deployment Considerations</span></span>](deployment-considerations.md)
- [<span data-ttu-id="9307f-203">实体框架术语</span><span class="sxs-lookup"><span data-stu-id="9307f-203">Entity Framework Terminology</span></span>](terminology.md)

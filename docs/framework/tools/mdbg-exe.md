---
title: MDbg.exe（.NET Framework 命令行调试程序）
description: 了解 MDbg.exe，它是 .NET 的命令行调试器，可帮助工具供应商和应用程序开发人员查找和修复面向 CLR 的程序中的错误。
ms.date: 03/30/2017
helpviewer_keywords:
- command-line debugger [.NET Framework]
- MDbg.exe
ms.assetid: 28a3f509-07e2-4dbe-81df-874c5e969cc4
ms.openlocfilehash: 927547a9ab2da43462038b01405a8046d89a184e
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2021
ms.locfileid: "102258938"
---
# <a name="mdbgexe-net-framework-command-line-debugger"></a><span data-ttu-id="a5903-103">MDbg.exe（.NET Framework 命令行调试程序）</span><span class="sxs-lookup"><span data-stu-id="a5903-103">MDbg.exe (.NET Framework Command-Line Debugger)</span></span>

<span data-ttu-id="a5903-104">.NET Framework 命令行调试器可以帮助工具供应商和应用程序开发人员查找并修复面向 .NET Framework 公共语言运行时的程序中的 Bug。</span><span class="sxs-lookup"><span data-stu-id="a5903-104">The NET Framework Command-Line Debugger helps tools vendors and application developers find and fix bugs in programs that target the .NET Framework common language runtime.</span></span> <span data-ttu-id="a5903-105">此工具使用运行时调试 API 提供调试服务。</span><span class="sxs-lookup"><span data-stu-id="a5903-105">This tool uses the runtime debugging API to provide debugging services.</span></span> <span data-ttu-id="a5903-106">可以使用 MDbg.exe 来仅调试托管代码；不支持调试非托管代码。</span><span class="sxs-lookup"><span data-stu-id="a5903-106">You can use MDbg.exe to debug only managed code; there is no support for debugging unmanaged code.</span></span>  
  
<span data-ttu-id="a5903-107">通过 NuGet 可以使用此工具。</span><span class="sxs-lookup"><span data-stu-id="a5903-107">This tool is available through NuGet.</span></span> <span data-ttu-id="a5903-108">有关安装信息，请参阅 [MDbg 0.1.0](https://www.nuget.org/packages/MDbg/0.1.0)。</span><span class="sxs-lookup"><span data-stu-id="a5903-108">For installation information, see [MDbg 0.1.0](https://www.nuget.org/packages/MDbg/0.1.0).</span></span> <span data-ttu-id="a5903-109">若要运行该工具，请使用程序包管理器控制台。</span><span class="sxs-lookup"><span data-stu-id="a5903-109">To run the tool, use the Package Manager Console.</span></span> <span data-ttu-id="a5903-110">有关如何使用程序包管理器控制台的详细信息，请参阅[程序包管理器控制台](/nuget/tools/package-manager-console)一文。</span><span class="sxs-lookup"><span data-stu-id="a5903-110">For more information about how to use the Package Manager Console, see the [Package Manager Console](/nuget/tools/package-manager-console) article.</span></span>
  
<span data-ttu-id="a5903-111">在“程序包管理器”提示符处，键入以下内容：</span><span class="sxs-lookup"><span data-stu-id="a5903-111">At the Package Manager prompt, type the following:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="a5903-112">语法</span><span class="sxs-lookup"><span data-stu-id="a5903-112">Syntax</span></span>  
  
```console  
MDbg [ProgramName[arguments]] [options]  
```  
  
## <a name="commands"></a><span data-ttu-id="a5903-113">命令</span><span class="sxs-lookup"><span data-stu-id="a5903-113">Commands</span></span>  

 <span data-ttu-id="a5903-114">在调试器中（由 **mdbg>** 提示指示），键入下一节中所述的命令之一：</span><span class="sxs-lookup"><span data-stu-id="a5903-114">When you are in the debugger (as indicated by the **mdbg>** prompt), type one of the commands described in the next section:</span></span>  
  
 <span data-ttu-id="a5903-115">**command** [*arguments*]</span><span class="sxs-lookup"><span data-stu-id="a5903-115">**command** [*arguments*]</span></span>  
  
 <span data-ttu-id="a5903-116">MDbg.exe 命令区分大小写。</span><span class="sxs-lookup"><span data-stu-id="a5903-116">MDbg.exe commands are case-sensitive.</span></span>  
  
|<span data-ttu-id="a5903-117">命令</span><span class="sxs-lookup"><span data-stu-id="a5903-117">Command</span></span>|<span data-ttu-id="a5903-118">描述</span><span class="sxs-lookup"><span data-stu-id="a5903-118">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="a5903-119">**ap**[**rocess**] [*number*]</span><span class="sxs-lookup"><span data-stu-id="a5903-119">**ap**[**rocess**] [*number*]</span></span>|<span data-ttu-id="a5903-120">切换到另一个调试的进程或打印可用进程。</span><span class="sxs-lookup"><span data-stu-id="a5903-120">Switches to another debugged process or prints available processes.</span></span> <span data-ttu-id="a5903-121">数字不是真正的进程 ID (PID)，而是一个从 0 开始索引的列表。</span><span class="sxs-lookup"><span data-stu-id="a5903-121">The numbers are not real process IDs (PIDs), but a 0-indexed list.</span></span>|  
|<span data-ttu-id="a5903-122">**a**[**ttach**] [*pid*]</span><span class="sxs-lookup"><span data-stu-id="a5903-122">**a**[**ttach**] [*pid*]</span></span>|<span data-ttu-id="a5903-123">附加到进程或打印可用进程。</span><span class="sxs-lookup"><span data-stu-id="a5903-123">Attaches to a process or prints available processes.</span></span>|  
|<span data-ttu-id="a5903-124">**b**[**reak**] [*ClassName.Method* &#124 *FileName:LineNo*]</span><span class="sxs-lookup"><span data-stu-id="a5903-124">**b**[**reak**] [*ClassName.Method* &#124; *FileName:LineNo*]</span></span>|<span data-ttu-id="a5903-125">在指定方法处设置断点。</span><span class="sxs-lookup"><span data-stu-id="a5903-125">Sets a breakpoint at the specified method.</span></span> <span data-ttu-id="a5903-126">按顺序扫描模块。</span><span class="sxs-lookup"><span data-stu-id="a5903-126">Modules are scanned sequentially.</span></span><br /><br /> <span data-ttu-id="a5903-127">-   break FileName:LineNo 在源中的某个位置设置断点。</span><span class="sxs-lookup"><span data-stu-id="a5903-127">-   **break** *FileName:LineNo* sets a breakpoint at a location in the source.</span></span><br /><span data-ttu-id="a5903-128">-   break ~number 在当前使用 x 命令显示的符号处设置断点。</span><span class="sxs-lookup"><span data-stu-id="a5903-128">-   **break** *~number* sets a breakpoint on a symbol recently displayed with the **x** command.</span></span><br /><span data-ttu-id="a5903-129">-   break module!ClassName.Method+IlOffset 在完全限定的位置设置断点。</span><span class="sxs-lookup"><span data-stu-id="a5903-129">-   **break** *module!ClassName.Method+IlOffset* sets a breakpoint on the fully qualified location.</span></span>|  
|<span data-ttu-id="a5903-130">block[ingObjects] </span><span class="sxs-lookup"><span data-stu-id="a5903-130">**block**[**ingObjects**]</span></span>|<span data-ttu-id="a5903-131">显示用来阻止线程的监视器锁。</span><span class="sxs-lookup"><span data-stu-id="a5903-131">Displays monitor locks, which are blocking threads.</span></span>|  
|<span data-ttu-id="a5903-132">ca[tch] [exceptionType] </span><span class="sxs-lookup"><span data-stu-id="a5903-132">**ca**[**tch**] [*exceptionType*]</span></span>|<span data-ttu-id="a5903-133">使调试器在所有异常（而不只是未经处理的异常）上中断。</span><span class="sxs-lookup"><span data-stu-id="a5903-133">Causes the debugger to break on all exceptions, and not just on the unhandled exceptions.</span></span>|  
|<span data-ttu-id="a5903-134">cl[earException] </span><span class="sxs-lookup"><span data-stu-id="a5903-134">**cl**[**earException**]</span></span>|<span data-ttu-id="a5903-135">将当前异常标记为已处理，以便继续执行。</span><span class="sxs-lookup"><span data-stu-id="a5903-135">Marks the current exception as handled so that execution can continue.</span></span> <span data-ttu-id="a5903-136">如果不处理异常的原因，异常可能会很快再次引发。</span><span class="sxs-lookup"><span data-stu-id="a5903-136">If the cause of the exception has not been dealt with, the exception may be quickly rethrown.</span></span>|  
|<span data-ttu-id="a5903-137">conf[ig] [option value] </span><span class="sxs-lookup"><span data-stu-id="a5903-137">**conf**[**ig**] [*option value*]</span></span>|<span data-ttu-id="a5903-138">显示所有可配置选项并显示在无任何选项值的情况下如何调用选项。</span><span class="sxs-lookup"><span data-stu-id="a5903-138">Displays all configurable options and shows how the options are invoked without any optional values.</span></span> <span data-ttu-id="a5903-139">如果指定了选项，请将 `value` 设置为当前选项。</span><span class="sxs-lookup"><span data-stu-id="a5903-139">If the option is specified, sets `value` as the current option.</span></span> <span data-ttu-id="a5903-140">当前，下列选项可用：</span><span class="sxs-lookup"><span data-stu-id="a5903-140">The following options are currently available:</span></span><br /><br /> <span data-ttu-id="a5903-141">-   `extpath`：设置路径，使用 `load` 命令时在该路径中搜索扩展。</span><span class="sxs-lookup"><span data-stu-id="a5903-141">-   `extpath` sets the path to search for  extensions when the `load` command is used.</span></span><br /><span data-ttu-id="a5903-142">-   `extpath+`：添加用于加载扩展的路径。</span><span class="sxs-lookup"><span data-stu-id="a5903-142">-   `extpath+` adds a path for loading extensions.</span></span>|  
|<span data-ttu-id="a5903-143">del[ete] </span><span class="sxs-lookup"><span data-stu-id="a5903-143">**del**[**ete**]</span></span>|<span data-ttu-id="a5903-144">删除断点。</span><span class="sxs-lookup"><span data-stu-id="a5903-144">Deletes a breakpoint.</span></span>|  
|<span data-ttu-id="a5903-145">de[tach] </span><span class="sxs-lookup"><span data-stu-id="a5903-145">**de**[**tach**]</span></span>|<span data-ttu-id="a5903-146">与调试的进程分离。</span><span class="sxs-lookup"><span data-stu-id="a5903-146">Detaches from a debugged process.</span></span>|  
|<span data-ttu-id="a5903-147">d[own] [frames] </span><span class="sxs-lookup"><span data-stu-id="a5903-147">**d**[**own**] [*frames*]</span></span>|<span data-ttu-id="a5903-148">下移活动堆栈帧。</span><span class="sxs-lookup"><span data-stu-id="a5903-148">Moves the active stack frame down.</span></span>|  
|<span data-ttu-id="a5903-149">echo</span><span class="sxs-lookup"><span data-stu-id="a5903-149">**echo**</span></span>|<span data-ttu-id="a5903-150">向控制台回显消息。</span><span class="sxs-lookup"><span data-stu-id="a5903-150">Echoes a message to the console.</span></span>|  
|<span data-ttu-id="a5903-151">enableNotif[ication] typeName 0&#1241 </span><span class="sxs-lookup"><span data-stu-id="a5903-151">**enableNotif**[**ication**] *typeName* 0&#124;1</span></span>|<span data-ttu-id="a5903-152">为指定类型启用 (1) 或禁用 (0) 自定义通知。</span><span class="sxs-lookup"><span data-stu-id="a5903-152">Enables (1) or disables (0) custom notifications for the specified type.</span></span>|  
|<span data-ttu-id="a5903-153">ex[it] [exitcode] </span><span class="sxs-lookup"><span data-stu-id="a5903-153">**ex**[**it**] [*exitcode*]</span></span>|<span data-ttu-id="a5903-154">退出 MDbg.exe shell，并选择指定进程退出代码。</span><span class="sxs-lookup"><span data-stu-id="a5903-154">Exits the MDbg.exe shell, and optionally specifies the process exit code.</span></span>|  
|<span data-ttu-id="a5903-155">fo[reach] [OtherCommand] </span><span class="sxs-lookup"><span data-stu-id="a5903-155">**fo**[**reach**] [*OtherCommand*]</span></span>|<span data-ttu-id="a5903-156">对所有线程执行命令。</span><span class="sxs-lookup"><span data-stu-id="a5903-156">Performs a command on all threads.</span></span> <span data-ttu-id="a5903-157">OtherCommand 是对一个线程执行的有效命令；foreach OtherCommand 对所有线程执行同一命令。</span><span class="sxs-lookup"><span data-stu-id="a5903-157">*OtherCommand* is a valid command that operates on one thread; **foreach** *OtherCommand* performs the same command on all threads.</span></span>|  
|<span data-ttu-id="a5903-158">**f**[**unceval**] [`-ad` *Num*] *functionName* [*args ...* ]</span><span class="sxs-lookup"><span data-stu-id="a5903-158">**f**[**unceval**] [`-ad` *Num*] *functionName* [*args ...* ]</span></span>|<span data-ttu-id="a5903-159">对当前活动线程进行函数求值，其中，要求值的函数为 functionName。</span><span class="sxs-lookup"><span data-stu-id="a5903-159">Performs a function evaluation on the current active thread where the function to evaluate is *functionName*.</span></span> <span data-ttu-id="a5903-160">函数名必须完全限定，包括命名空间。</span><span class="sxs-lookup"><span data-stu-id="a5903-160">The function name must be fully qualified, including namespaces.</span></span><br /><br /> <span data-ttu-id="a5903-161">`-ad` 选项指定用于解析函数的应用程序域。</span><span class="sxs-lookup"><span data-stu-id="a5903-161">The `-ad` option specifies the application domain to use to resolve the function.</span></span> <span data-ttu-id="a5903-162">如果未指定 `-ad` 选项，则用于解析的应用程序域默认为用于函数求值的线程所在的应用程序域。</span><span class="sxs-lookup"><span data-stu-id="a5903-162">If the `-ad` option is not specified, the application domain for resolution defaults to the application domain where the thread that is used for function evaluation is located.</span></span><br /><br /> <span data-ttu-id="a5903-163">如果要进行求值的函数不是静态的，则传入的第一个参数应为 `this` 指针。</span><span class="sxs-lookup"><span data-stu-id="a5903-163">If the function that is being evaluated is not static, the first parameter passed in should be a `this` pointer.</span></span> <span data-ttu-id="a5903-164">在所有应用程序域中搜索函数求值所需的参数。</span><span class="sxs-lookup"><span data-stu-id="a5903-164">All application domains are searched for arguments to the function evaluation..</span></span><br /><br /> <span data-ttu-id="a5903-165">若要请求应用程序域值，请使用模块和应用程序域名为变量添加前缀；例如 `funceval -ad 0 System.Object.ToString hello.exe#0!MyClass.g_rootRef`。</span><span class="sxs-lookup"><span data-stu-id="a5903-165">To request a value from an application domain, prefix the variable with the module and application domain name; for example, `funceval -ad 0 System.Object.ToString hello.exe#0!MyClass.g_rootRef`.</span></span> <span data-ttu-id="a5903-166">此命令在应用程序域 `System.Object.ToString` 中对函数 `0` 进行求值。</span><span class="sxs-lookup"><span data-stu-id="a5903-166">This command evaluates the function `System.Object.ToString` in the application domain `0`.</span></span> <span data-ttu-id="a5903-167">由于 `ToString` 方法为实例函数，因此，第一个参数必须为 `this` 指针。</span><span class="sxs-lookup"><span data-stu-id="a5903-167">Because the `ToString` method is an instance function, the first parameter must be a `this` pointer.</span></span>|  
|<span data-ttu-id="a5903-168">g[o] </span><span class="sxs-lookup"><span data-stu-id="a5903-168">**g**[**o**]</span></span>|<span data-ttu-id="a5903-169">使程序继续直到其遇到断点，退出程序，或事件（例如，未经处理的异常）使程序停止。</span><span class="sxs-lookup"><span data-stu-id="a5903-169">Causes the program to continue until it encounters a breakpoint, the program exits, or an event (for example, an unhandled exception) causes the program to stop.</span></span>|  
|<span data-ttu-id="a5903-170">h[elp] [command] </span><span class="sxs-lookup"><span data-stu-id="a5903-170">**h**[**elp**] [*command*]</span></span><br /><br /> <span data-ttu-id="a5903-171">\- 或 -</span><span class="sxs-lookup"><span data-stu-id="a5903-171">-or-</span></span><br /><br /> <span data-ttu-id="a5903-172">**?**</span><span class="sxs-lookup"><span data-stu-id="a5903-172">**?**</span></span> <span data-ttu-id="a5903-173">[command]</span><span class="sxs-lookup"><span data-stu-id="a5903-173">[*command*]</span></span>|<span data-ttu-id="a5903-174">显示所有命令的说明或对指定命令的详细说明。</span><span class="sxs-lookup"><span data-stu-id="a5903-174">Displays a description of all commands or a detailed description of a specified command.</span></span>|  
|<span data-ttu-id="a5903-175">ig[nore] [event] </span><span class="sxs-lookup"><span data-stu-id="a5903-175">**ig**[**nore**] [*event*]</span></span>|<span data-ttu-id="a5903-176">让调试器仅在遇到未经处理的异常时停止。</span><span class="sxs-lookup"><span data-stu-id="a5903-176">Causes the debugger to stop on unhandled exceptions only.</span></span>|  
|<span data-ttu-id="a5903-177">int[ercept] FrameNumber </span><span class="sxs-lookup"><span data-stu-id="a5903-177">**int**[**ercept**] *FrameNumber*</span></span>|<span data-ttu-id="a5903-178">将调试器回滚到指定的帧号码。</span><span class="sxs-lookup"><span data-stu-id="a5903-178">Rolls the debugger back to a specified frame number.</span></span><br /><br /> <span data-ttu-id="a5903-179">如果调试器遇到异常，使用此命令可以将调试器回滚到指定的帧号码。</span><span class="sxs-lookup"><span data-stu-id="a5903-179">If the debugger encounters an exception, use this command to roll the debugger back to the specified frame number.</span></span> <span data-ttu-id="a5903-180">可通过使用 set 命令来更改程序状态并通过使用 go 命令继续操作。 </span><span class="sxs-lookup"><span data-stu-id="a5903-180">You can change the program state by using the **set** command and continue by using the **go** command.</span></span>|  
|<span data-ttu-id="a5903-181">k[ill] </span><span class="sxs-lookup"><span data-stu-id="a5903-181">**k**[**ill**]</span></span>|<span data-ttu-id="a5903-182">停止活动进程。</span><span class="sxs-lookup"><span data-stu-id="a5903-182">Stops the active process.</span></span>|  
|<span data-ttu-id="a5903-183">l[ist] [modules &#124 appdomains &#124 assemblies]   </span><span class="sxs-lookup"><span data-stu-id="a5903-183">**l**[**ist**] [*modules* &#124; *appdomains* &#124; *assemblies*]</span></span>|<span data-ttu-id="a5903-184">显示已加载的模块、应用程序域或程序集。</span><span class="sxs-lookup"><span data-stu-id="a5903-184">Displays the loaded modules, application domains, or assemblies.</span></span>|  
|<span data-ttu-id="a5903-185">lo[ad] assemblyName </span><span class="sxs-lookup"><span data-stu-id="a5903-185">**lo**[**ad**] *assemblyName*</span></span>|<span data-ttu-id="a5903-186">按以下方式加载扩展：加载指定的程序集，然后尝试从 `LoadExtension` 类型运行静态方法 `Microsoft.Tools.Mdbg.Extension.Extension`。</span><span class="sxs-lookup"><span data-stu-id="a5903-186">Loads an extension in the following manner: The specified assembly is loaded and an attempt is then made to run the static method `LoadExtension` from the `Microsoft.Tools.Mdbg.Extension.Extension` type.</span></span>|  
|<span data-ttu-id="a5903-187">log [eventType]</span><span class="sxs-lookup"><span data-stu-id="a5903-187">**log** [*eventType*]</span></span>|<span data-ttu-id="a5903-188">设置或显示要记录的事件。</span><span class="sxs-lookup"><span data-stu-id="a5903-188">Set or display the events to be logged.</span></span>|  
|<span data-ttu-id="a5903-189">mo[de] [option on/off] </span><span class="sxs-lookup"><span data-stu-id="a5903-189">**mo**[**de**] [*option on/off*]</span></span>|<span data-ttu-id="a5903-190">设置不同的调试器选项。</span><span class="sxs-lookup"><span data-stu-id="a5903-190">Sets different debugger options.</span></span> <span data-ttu-id="a5903-191">使用不带任何选项的 `mode` 来获取调试模式及其当前设置的列表。</span><span class="sxs-lookup"><span data-stu-id="a5903-191">Use `mode` with no options to get a list of the debugging modes and their current settings.</span></span>|  
|<span data-ttu-id="a5903-192">mon[itorInfo] monitorReference </span><span class="sxs-lookup"><span data-stu-id="a5903-192">**mon**[**itorInfo**] *monitorReference*</span></span>|<span data-ttu-id="a5903-193">显示对象监视器锁信息。</span><span class="sxs-lookup"><span data-stu-id="a5903-193">Displays object monitor lock information.</span></span>|  
|<span data-ttu-id="a5903-194">newo[bj] typeName [arguments...]  </span><span class="sxs-lookup"><span data-stu-id="a5903-194">**newo**[**bj**] *typeName* [*arguments...*]</span></span>|<span data-ttu-id="a5903-195">创建 typeName 类型的新对象。</span><span class="sxs-lookup"><span data-stu-id="a5903-195">Creates a new object of type *typeName*.</span></span>|  
|<span data-ttu-id="a5903-196">**n**[**ext**]</span><span class="sxs-lookup"><span data-stu-id="a5903-196">**n**[**ext**]</span></span>|<span data-ttu-id="a5903-197">运行代码并移动到下一行（即使下一行包含多个函数调用）。</span><span class="sxs-lookup"><span data-stu-id="a5903-197">Runs code and moves to the next line (even if the next line includes many function calls).</span></span>|  
|<span data-ttu-id="a5903-198">**Opendump** *pathToDumpFile*</span><span class="sxs-lookup"><span data-stu-id="a5903-198">**Opendump** *pathToDumpFile*</span></span>|<span data-ttu-id="a5903-199">打开指定的转储文件以进行调试。</span><span class="sxs-lookup"><span data-stu-id="a5903-199">Opens the specified dump file for debugging.</span></span>|  
|<span data-ttu-id="a5903-200">o[ut] </span><span class="sxs-lookup"><span data-stu-id="a5903-200">**o**[**ut**]</span></span>|<span data-ttu-id="a5903-201">移动到当前函数的末尾。</span><span class="sxs-lookup"><span data-stu-id="a5903-201">Moves to the end of the current function.</span></span>|  
|<span data-ttu-id="a5903-202">pa[th] [pathName] </span><span class="sxs-lookup"><span data-stu-id="a5903-202">**pa**[**th**] [*pathName*]</span></span>|<span data-ttu-id="a5903-203">如果二进制文件中的位置不可用，则搜索源文件的指定路径。</span><span class="sxs-lookup"><span data-stu-id="a5903-203">Searches the specified path for the source files if the location in the binaries is not available.</span></span>|  
|<span data-ttu-id="a5903-204">p[rint] [var] &#124 [-d] `-d`</span><span class="sxs-lookup"><span data-stu-id="a5903-204">**p**[**rint**] [*var*] &#124; [`-d`]</span></span>|<span data-ttu-id="a5903-205">打印相应范围内的所有变量 (print)，打印指定变量 (print var)，或者打印调试器变量 (print`-d`)。</span><span class="sxs-lookup"><span data-stu-id="a5903-205">Prints all variables in scope (**print**), prints the specified variable (**print** *var*), or prints the debugger variables (**print**`-d`).</span></span>|  
|<span data-ttu-id="a5903-206">printe[xception] [-r] </span><span class="sxs-lookup"><span data-stu-id="a5903-206">**printe**[**xception**] [*-r*]</span></span>|<span data-ttu-id="a5903-207">输出当前线程上的最后一个异常。</span><span class="sxs-lookup"><span data-stu-id="a5903-207">Prints the last exception on the current thread.</span></span> <span data-ttu-id="a5903-208">使用 `–r`（递归）选项遍历异常对象上的 `InnerException` 属性，以获取有关整个异常链的信息。</span><span class="sxs-lookup"><span data-stu-id="a5903-208">Use the `–r` (recursive) option to traverse the `InnerException` property on the exception object to get information about the entire chain of exceptions.</span></span>|  
|<span data-ttu-id="a5903-209">pro[cessenum] </span><span class="sxs-lookup"><span data-stu-id="a5903-209">**pro**[**cessenum**]</span></span>|<span data-ttu-id="a5903-210">显示活动进程。</span><span class="sxs-lookup"><span data-stu-id="a5903-210">Displays the active processes.</span></span>|  
|<span data-ttu-id="a5903-211">q[uit] [exitcode] </span><span class="sxs-lookup"><span data-stu-id="a5903-211">**q**[**uit**] [*exitcode*]</span></span>|<span data-ttu-id="a5903-212">退出 MDbg.exe shell，可以选择指定进程退出代码。</span><span class="sxs-lookup"><span data-stu-id="a5903-212">Quits the MDbg.exe shell, optionally specifying the process exit code.</span></span>|  
|<span data-ttu-id="a5903-213">re[sume] [`*` &#124 [`~`]threadNumber] </span><span class="sxs-lookup"><span data-stu-id="a5903-213">**re**[**sume**] [`*` &#124; [`~`]*threadNumber*]</span></span>|<span data-ttu-id="a5903-214">继续当前线程或由 threadNumber 参数指定的线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-214">Resumes the current thread or the thread specified by the *threadNumber* parameter.</span></span><br /><br /> <span data-ttu-id="a5903-215">如果指定 threadNumber 参数为 `*`，或者线程号以 `~` 开始，则该命令将应用于所有线程（threadNumber 指定的线程除外）。 </span><span class="sxs-lookup"><span data-stu-id="a5903-215">If the *threadNumber* parameter is specified as `*` or if the thread number starts with `~`, the command applies to all threads except the one specified by *threadNumber*.</span></span><br /><br /> <span data-ttu-id="a5903-216">无法继续未挂起的线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-216">Resuming a non-suspended thread has no effect.</span></span>|  
|<span data-ttu-id="a5903-217">r[un] [`-d`(`ebug`) &#124; -`o`(`ptimize`) &#124;`-enc`] [[path_to_exe] [args_to_exe]]  </span><span class="sxs-lookup"><span data-stu-id="a5903-217">**r**[**un**] [`-d`(`ebug`) &#124; -`o`(`ptimize`) &#124;`-enc`] [[*path_to_exe*] [*args_to_exe*]]</span></span>|<span data-ttu-id="a5903-218">停止当前进程（如果存在）并启动一个新进程。</span><span class="sxs-lookup"><span data-stu-id="a5903-218">Stops the current process (if there is one) and starts a new one.</span></span> <span data-ttu-id="a5903-219">如果未传递可执行参数，此命令将运行上次使用 `run` 命令执行的程序。</span><span class="sxs-lookup"><span data-stu-id="a5903-219">If no executable argument is passed, this command runs the program that was previously executed with the `run` command.</span></span> <span data-ttu-id="a5903-220">如果提供了可执行参数，将使用提供的可选参数运行指定的程序。</span><span class="sxs-lookup"><span data-stu-id="a5903-220">If the executable argument is provided, the specified program is run using the optionally supplied arguments.</span></span><br /><br /> <span data-ttu-id="a5903-221">如果忽略类加载、模块加载和线程启动事件（默认情况下如此），程序将在遇到主线程的第一条可执行指令时停止。</span><span class="sxs-lookup"><span data-stu-id="a5903-221">If class load, module load, and thread start events are ignored (as they are by default), the program stops on the first executable instruction of the main thread.</span></span><br /><br /> <span data-ttu-id="a5903-222">可通过使用下列三个标记之一迫使调试程序对代码进行实时 (JIT) 编译：</span><span class="sxs-lookup"><span data-stu-id="a5903-222">You can force the debugger to just-in-time (JIT) compile the code by using one of the following three flags:</span></span><br /><br /> <span data-ttu-id="a5903-223">-   `-d` ( `ebug` ) 禁用优化。 </span><span class="sxs-lookup"><span data-stu-id="a5903-223">-   `-d` *(* `ebug` *)* disables optimizations.</span></span> <span data-ttu-id="a5903-224">这是 MDbg.exe 的默认值。</span><span class="sxs-lookup"><span data-stu-id="a5903-224">This is the default for MDbg.exe.</span></span><br /><span data-ttu-id="a5903-225">-   `-o` ( `ptimize` ) 强制代码更像在调试器外部一样运行，而且也使调试体验更困难。 </span><span class="sxs-lookup"><span data-stu-id="a5903-225">-   `-o` *(* `ptimize` *)* forces the code to run more like it does outside the debugger, but also makes the debugging experience more difficult.</span></span> <span data-ttu-id="a5903-226">这是在调试器外部使用的默认值。</span><span class="sxs-lookup"><span data-stu-id="a5903-226">This is the default for use outside the debugger.</span></span><br /><span data-ttu-id="a5903-227">-   `-enc` 启用“编辑并继续”功能，但会导致性能问题。</span><span class="sxs-lookup"><span data-stu-id="a5903-227">-   `-enc` enables the Edit and Continue feature but incurs a performance hit.</span></span>|  
|<span data-ttu-id="a5903-228">**Set** *variable*=*value*</span><span class="sxs-lookup"><span data-stu-id="a5903-228">**Set** *variable*=*value*</span></span>|<span data-ttu-id="a5903-229">更改任意范围内变量的值。</span><span class="sxs-lookup"><span data-stu-id="a5903-229">Changes the value of any in-scope variable.</span></span><br /><br /> <span data-ttu-id="a5903-230">你还可以创建自己的调试器变量，然后在自己的应用程序中将引用值赋给这些变量。</span><span class="sxs-lookup"><span data-stu-id="a5903-230">You can also create your own debugger variables and assign reference values to them from within your application.</span></span> <span data-ttu-id="a5903-231">这些值充当原始值的句柄，即使原始值超出范围。</span><span class="sxs-lookup"><span data-stu-id="a5903-231">These values act as handles to the original value, and even the original value is out of scope.</span></span> <span data-ttu-id="a5903-232">所有调试器变量都必须以 `$` 开头（例如 `$var`）。</span><span class="sxs-lookup"><span data-stu-id="a5903-232">All debugger variables must begin with `$` (for example, `$var`).</span></span> <span data-ttu-id="a5903-233">使用以下命令将这些句柄设置为空，便可以清除这些句柄：</span><span class="sxs-lookup"><span data-stu-id="a5903-233">Clear these handles by setting them to nothing using the following command:</span></span><br /><br /> `set $var=`|  
|<span data-ttu-id="a5903-234">Setip [`-il`] number</span><span class="sxs-lookup"><span data-stu-id="a5903-234">**Setip** [`-il`] *number*</span></span>|<span data-ttu-id="a5903-235">将文件中的当前指令指针 (IP) 设置为指定位置。</span><span class="sxs-lookup"><span data-stu-id="a5903-235">Sets the current instruction pointer (IP) in the file to the specified position.</span></span> <span data-ttu-id="a5903-236">如果指定 `-il` 选项，则数字表示方法中的 Microsoft 中间语言 (MSIL) 偏移量。</span><span class="sxs-lookup"><span data-stu-id="a5903-236">If you specify the `-il` option, the number represents a Microsoft intermediate language (MSIL) offset in the method.</span></span> <span data-ttu-id="a5903-237">否则，数字表示源代码行号。</span><span class="sxs-lookup"><span data-stu-id="a5903-237">Otherwise, the number represents a source line number.</span></span>|  
|<span data-ttu-id="a5903-238">sh[ow] [lines] </span><span class="sxs-lookup"><span data-stu-id="a5903-238">**sh**[**ow**] [*lines*]</span></span>|<span data-ttu-id="a5903-239">指定要显示的行数。</span><span class="sxs-lookup"><span data-stu-id="a5903-239">Specifies the number of lines to show.</span></span>|  
|<span data-ttu-id="a5903-240">s[tep] </span><span class="sxs-lookup"><span data-stu-id="a5903-240">**s**[**tep**]</span></span>|<span data-ttu-id="a5903-241">开始执行当前行的下一个函数；如果没有要单步执行的函数，则移动到下一行。</span><span class="sxs-lookup"><span data-stu-id="a5903-241">Moves execution into the next function on the current line, or moves to the next line if there is no function to step into.</span></span>|  
|<span data-ttu-id="a5903-242">su[spend] [\* &#124; [~]threadNumber] </span><span class="sxs-lookup"><span data-stu-id="a5903-242">**su**[**spend**] [\* &#124; [~]*threadNumber*]</span></span>|<span data-ttu-id="a5903-243">挂起当前线程或 threadNumber 参数指定的线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-243">Suspends the current thread or the thread specified by the *threadNumber* parameter.</span></span>  <span data-ttu-id="a5903-244">如果 threadNumber 指定为 `*`，则该命令将应用于所有线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-244">If *threadNumber* is specified as `*`, the command applies to all threads.</span></span> <span data-ttu-id="a5903-245">如果线程号以 `~` 开头，则该命令应用于除 threadNumber 指定的线程之外的所有线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-245">If the thread number starts with `~`, the command applies to all threads except the one specified by *threadNumber*.</span></span> <span data-ttu-id="a5903-246">使用 go 或 step 命令运行进程时，不会运行挂起的线程。 </span><span class="sxs-lookup"><span data-stu-id="a5903-246">Suspended threads are excluded from running when the process is run by either the **go** or **step** command.</span></span> <span data-ttu-id="a5903-247">如果进程中没有未挂起的线程，即使发出 go 命令，该进程也不会继续。</span><span class="sxs-lookup"><span data-stu-id="a5903-247">If there are no non-suspended threads in the process and you issue the **go** command, the process will not continue.</span></span> <span data-ttu-id="a5903-248">在这种情况下，按 Ctrl-C 可中断进程。</span><span class="sxs-lookup"><span data-stu-id="a5903-248">In that case, press CTRL-C to break into the process.</span></span>|  
|<span data-ttu-id="a5903-249">sy[mbol] commandName [commandValue]  </span><span class="sxs-lookup"><span data-stu-id="a5903-249">**sy**[**mbol**] *commandName* [*commandValue*]</span></span>|<span data-ttu-id="a5903-250">指定下列命令之一：</span><span class="sxs-lookup"><span data-stu-id="a5903-250">Specifies one of the following commands:</span></span><br /><br /> <span data-ttu-id="a5903-251">-   `symbol path` [`"value"`] - 显示或设置当前符号路径。</span><span class="sxs-lookup"><span data-stu-id="a5903-251">-   `symbol path` [`"value"`] - Displays or sets the current symbol path.</span></span><br /><span data-ttu-id="a5903-252">-   `symbol addpath` `"value"` - 添加到当前符号路径。</span><span class="sxs-lookup"><span data-stu-id="a5903-252">-   `symbol addpath` `"value"` - Adds to your current symbol path.</span></span><br /><span data-ttu-id="a5903-253">-   `symbol reload` [`"module"`]- 重新加载所有符号或指定模块的符号。</span><span class="sxs-lookup"><span data-stu-id="a5903-253">-   `symbol reload` [`"module"`] - Reloads either all symbols or the symbols for the specified module.</span></span><br /><span data-ttu-id="a5903-254">-   `symbol list` [`module`] - 显示当前为所有模块或指定模块加载的符号。</span><span class="sxs-lookup"><span data-stu-id="a5903-254">-   `symbol list` [`module`] - Shows the currently loaded symbols for either all modules or the specified module.</span></span>|  
|<span data-ttu-id="a5903-255">t[hread] [newThread] [-nick nickname`]`  </span><span class="sxs-lookup"><span data-stu-id="a5903-255">**t**[**hread**] [*newThread*] [-*nick nickname*`]`</span></span>|<span data-ttu-id="a5903-256">不带参数的线程命令显示当前进程中的所有托管线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-256">The thread command with no parameters displays all managed threads in the current process.</span></span> <span data-ttu-id="a5903-257">线程通常由其线程号标识；但是，如果线程有分配的别名，则显示该别名。</span><span class="sxs-lookup"><span data-stu-id="a5903-257">Threads are usually identified by their thread numbers; however, if the thread has an assigned nickname, the nickname is displayed instead.</span></span> <span data-ttu-id="a5903-258">可使用 `-nick` 参数将别号分配给线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-258">You can use the `-nick` parameter to assign a nickname to a thread.</span></span><br /><br /> <span data-ttu-id="a5903-259">-   thread `-nick` threadName 为当前运行的线程分配一个昵称。</span><span class="sxs-lookup"><span data-stu-id="a5903-259">-   **thread** `-nick` *threadName* assigns a nickname to the currently running thread.</span></span><br /><br /> <span data-ttu-id="a5903-260">别名不能为数字。</span><span class="sxs-lookup"><span data-stu-id="a5903-260">Nicknames cannot be numbers.</span></span> <span data-ttu-id="a5903-261">如果已为当前线程分配了别名，则使用新的别名来替换旧的别名。</span><span class="sxs-lookup"><span data-stu-id="a5903-261">If the current thread already has an assigned nickname, the old nickname is replaced with the new one.</span></span> <span data-ttu-id="a5903-262">如果新别名为空字符串 ("")，则删除当前线程的别名并且不为线程分配新别名。</span><span class="sxs-lookup"><span data-stu-id="a5903-262">If the new nickname is an empty string (""), the nickname for the current thread is deleted and no new nickname is assigned to the thread.</span></span>|  
|<span data-ttu-id="a5903-263">u[p] </span><span class="sxs-lookup"><span data-stu-id="a5903-263">**u**[**p**]</span></span>|<span data-ttu-id="a5903-264">上移活动堆栈帧。</span><span class="sxs-lookup"><span data-stu-id="a5903-264">Moves the active stack frame up.</span></span>|  
|<span data-ttu-id="a5903-265">uwgc[handle] [var] &#124 [address]  </span><span class="sxs-lookup"><span data-stu-id="a5903-265">**uwgc**[**handle**] [*var*] &#124; [*address*]</span></span>|<span data-ttu-id="a5903-266">打印句柄所跟踪的变量。</span><span class="sxs-lookup"><span data-stu-id="a5903-266">Prints the variable tracked by a handle.</span></span> <span data-ttu-id="a5903-267">可以按名称或地址来指定句柄。</span><span class="sxs-lookup"><span data-stu-id="a5903-267">The handle can be specified by name or address.</span></span>|  
|<span data-ttu-id="a5903-268">**when**</span><span class="sxs-lookup"><span data-stu-id="a5903-268">**when**</span></span>|<span data-ttu-id="a5903-269">显示当前处于活动状态的 `when` 语句。</span><span class="sxs-lookup"><span data-stu-id="a5903-269">Displays the currently active `when` statements.</span></span><br /><br /> <span data-ttu-id="a5903-270">**when** **delete all** &#124; `num` [`num` [`num` …]] - 删除按编号指定的 `when` 语句，或所有 `when` 语句，前提是指定了 `all`。</span><span class="sxs-lookup"><span data-stu-id="a5903-270">**when** **delete all** &#124; `num` [`num` [`num` …]] - Deletes the `when` statement specified by the number, or all `when` statements if `all` is specified.</span></span><br /><br /> <span data-ttu-id="a5903-271">**when** `stopReason` [`specific_condition`] **do**`cmd` [`cmd` [`cmd` …] ] - stopReason 参数可以为下列参数之一：</span><span class="sxs-lookup"><span data-stu-id="a5903-271">**when** `stopReason` [`specific_condition`] **do**`cmd` [`cmd` [`cmd` …] ] - The *stopReason* parameter can be one of the following:</span></span><br /><br /> <span data-ttu-id="a5903-272">`StepComplete`, `ProcessExited`, `ThreadCreated`, `BreakpointHit`, `ModuleLoaded`, `ClassLoaded`, `AssemblyLoaded`, `AssemblyUnloaded`, `ControlCTrapped`, `ExceptionThrown`, `UnhandledExceptionThrown`, `AsyncStop`, `AttachComplete`, `UserBreak`, `EvalComplete`, `EvalException`, `RemapOpportunityReached`, `NativeStop`.</span><span class="sxs-lookup"><span data-stu-id="a5903-272">`StepComplete`, `ProcessExited`, `ThreadCreated`, `BreakpointHit`, `ModuleLoaded`, `ClassLoaded`, `AssemblyLoaded`, `AssemblyUnloaded`, `ControlCTrapped`, `ExceptionThrown`, `UnhandledExceptionThrown`, `AsyncStop`, `AttachComplete`, `UserBreak`, `EvalComplete`, `EvalException`, `RemapOpportunityReached`, `NativeStop`.</span></span><br /><br /> <span data-ttu-id="a5903-273">specific_condition 可以为下列情况之一：</span><span class="sxs-lookup"><span data-stu-id="a5903-273">*specific_condition* can be one of the following:</span></span><br /><br /> <span data-ttu-id="a5903-274">-   number - 对于 `ThreadCreated` 和 `BreakpointHit`，仅当具有相同值的线程 ID/断点号引起停止时才会触发操作。</span><span class="sxs-lookup"><span data-stu-id="a5903-274">-   *number* - For `ThreadCreated` and `BreakpointHit`, triggers action only when stopped by a thread ID/breakpoint number with same value.</span></span><br /><span data-ttu-id="a5903-275">-   [`!`]name - 对于 、`ModuleLoaded`、`ClassLoaded`、`AssemblyLoaded`、`AssemblyUnloaded`、`ExceptionThrown` 和 `UnhandledExceptionThrown`，仅当该名称与 stopReason 的名称匹配时才会触发操作。 </span><span class="sxs-lookup"><span data-stu-id="a5903-275">-   [`!`]*name* - For `ModuleLoaded`, `ClassLoaded`, `AssemblyLoaded`, `AssemblyUnloaded`, `ExceptionThrown`, and `UnhandledExceptionThrown`, triggers action only when the name matches the name of the *stopReason*.</span></span><br /><br /> <span data-ttu-id="a5903-276">对于 stopReason 的其他值，specific_condition 必须为空。 </span><span class="sxs-lookup"><span data-stu-id="a5903-276">*specific_condition* must be empty for other values of *stopReason*.</span></span>|  
|<span data-ttu-id="a5903-277">**w**[**here**] [`-v`] [`-c` *depth*] [*threadID*]</span><span class="sxs-lookup"><span data-stu-id="a5903-277">**w**[**here**] [`-v`] [`-c` *depth*] [*threadID*]</span></span>|<span data-ttu-id="a5903-278">显示有关堆栈帧的调试信息。</span><span class="sxs-lookup"><span data-stu-id="a5903-278">Displays debug information about stack frames.</span></span><br /><br /> <span data-ttu-id="a5903-279">-   `-v` 选项提供有关显示的每个堆栈帧的详细信息。</span><span class="sxs-lookup"><span data-stu-id="a5903-279">-   The `-v` option provides verbose information about each displayed stack frame.</span></span><br /><span data-ttu-id="a5903-280">-   为 `depth` 指定一个数字可限制显示的帧数。</span><span class="sxs-lookup"><span data-stu-id="a5903-280">-   Specifying a number for `depth` limits how many frames are displayed.</span></span> <span data-ttu-id="a5903-281">使用 all 命令可显示所有帧。</span><span class="sxs-lookup"><span data-stu-id="a5903-281">Use the **all** command to display all frames.</span></span> <span data-ttu-id="a5903-282">默认值为 100。</span><span class="sxs-lookup"><span data-stu-id="a5903-282">The default is 100.</span></span><br /><span data-ttu-id="a5903-283">-   如果指定 threadID 参数，则可以控制与堆栈关联的线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-283">-   If you specify the *threadID* parameter, you can control which thread is associated with the stack.</span></span> <span data-ttu-id="a5903-284">默认只与当前线程关联。</span><span class="sxs-lookup"><span data-stu-id="a5903-284">The default is the current thread only.</span></span> <span data-ttu-id="a5903-285">使用 all 命令可获取所有线程。</span><span class="sxs-lookup"><span data-stu-id="a5903-285">Use the **all** command to get all threads.</span></span>|  
|<span data-ttu-id="a5903-286">x [`-c`numSymbols] [module[`!`pattern]]  </span><span class="sxs-lookup"><span data-stu-id="a5903-286">**x** [`-c`*numSymbols*] [*module*[`!`*pattern*]]</span></span>|<span data-ttu-id="a5903-287">显示匹配模块的 `pattern` 的函数。</span><span class="sxs-lookup"><span data-stu-id="a5903-287">Displays functions that match the `pattern` for a module.</span></span><br /><br /> <span data-ttu-id="a5903-288">如果指定了 numSymbols，则输出将限制为指定数目。</span><span class="sxs-lookup"><span data-stu-id="a5903-288">If *numSymbols* is specified, the output is limited to the specified number.</span></span> <span data-ttu-id="a5903-289">如果未针对 pattern 指定 `!`（指示正则表达式），则会显示所有函数。</span><span class="sxs-lookup"><span data-stu-id="a5903-289">If `!` (indicating a regular expression) is not specified for *pattern*, all functions are displayed.</span></span> <span data-ttu-id="a5903-290">如果未提供 module，则显示加载的所有模块。</span><span class="sxs-lookup"><span data-stu-id="a5903-290">If *module* is not provided, all loaded modules are displayed.</span></span> <span data-ttu-id="a5903-291">符号 (~#) 可用于通过 break 命令设置断点。</span><span class="sxs-lookup"><span data-stu-id="a5903-291">Symbols (*~#*) can be used to set breakpoints using the **break** command.</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="a5903-292">备注</span><span class="sxs-lookup"><span data-stu-id="a5903-292">Remarks</span></span>  

 <span data-ttu-id="a5903-293">使用编译器特定的标志编译要调试的应用程序会使你的编译器生成调试符号。</span><span class="sxs-lookup"><span data-stu-id="a5903-293">Compile the application to be debugged by using compiler-specific flags that cause your compiler to generate debugging symbols.</span></span> <span data-ttu-id="a5903-294">有关这些标志的详细信息，请参阅编译器的文档。</span><span class="sxs-lookup"><span data-stu-id="a5903-294">Refer to your compiler's documentation for more information about these flags.</span></span> <span data-ttu-id="a5903-295">可以调试优化的应用程序，但某些调试信息将缺失。</span><span class="sxs-lookup"><span data-stu-id="a5903-295">You can debug optimized applications, but some debugging information will be missing.</span></span> <span data-ttu-id="a5903-296">例如，许多局部变量将无法看到，并且源代码行也会变得不准确。</span><span class="sxs-lookup"><span data-stu-id="a5903-296">For example, many local variables will not be visible and source lines will be inaccurate.</span></span>  
  
 <span data-ttu-id="a5903-297">在编译应用程序之后，在命令提示符下键入 mdbg 以启动调试会话，如以下示例所示。</span><span class="sxs-lookup"><span data-stu-id="a5903-297">After you compile your application, type **mdbg** at the command prompt to start a debugging session, as shown in the following example.</span></span>  
  
```console  
C:\Program Files\Microsoft Visual Studio 8\VC>mdbg  
MDbg (Managed debugger) v2.0.50727.42 (RTM.050727-4200) started.  
Copyright (C) Microsoft Corporation. All rights reserved.  
  
For information about commands type "help";  
to exit program type "quit".  
mdbg>  
```  
  
 <span data-ttu-id="a5903-298">`mdbg>` 提示符指示你处于调试器中。</span><span class="sxs-lookup"><span data-stu-id="a5903-298">The `mdbg>` prompt indicates that you are in the debugger.</span></span>  
  
 <span data-ttu-id="a5903-299">处于调试器中之后，请使用上一部分所述的命令和参数。</span><span class="sxs-lookup"><span data-stu-id="a5903-299">Once you are in the debugger, use the commands and arguments described in the previous section.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a5903-300">请参阅</span><span class="sxs-lookup"><span data-stu-id="a5903-300">See also</span></span>

- [<span data-ttu-id="a5903-301">工具</span><span class="sxs-lookup"><span data-stu-id="a5903-301">Tools</span></span>](index.md)
- [<span data-ttu-id="a5903-302">开发人员命令行 shell</span><span class="sxs-lookup"><span data-stu-id="a5903-302">Developer command-line shells</span></span>](/visualstudio/ide/reference/command-prompt-powershell)

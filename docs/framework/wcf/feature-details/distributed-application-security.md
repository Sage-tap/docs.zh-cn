---
description: 了解详细信息：分布式应用程序安全性
title: 分布式应用程序安全
ms.date: 03/30/2017
helpviewer_keywords:
- distributed application security [WCF]
- security [WCF], transfer
ms.assetid: 53928a10-e474-46d0-ab90-5f98f8d7b668
ms.openlocfilehash: 79e206157e7bb0a242b66064d345038d4272cf3b
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/06/2021
ms.locfileid: "99743156"
---
# <a name="distributed-application-security"></a><span data-ttu-id="4a2bd-103">分布式应用程序安全</span><span class="sxs-lookup"><span data-stu-id="4a2bd-103">Distributed Application Security</span></span>

<span data-ttu-id="4a2bd-104">Windows Communication Foundation (WCF) 安全性分为三个主要功能区域：传输安全、访问控制和审核。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-104">Windows Communication Foundation (WCF) security is broken into three major functional areas: transfer security, access control, and auditing.</span></span> <span data-ttu-id="4a2bd-105">传输安全提供完整性、保密性和身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-105">Transfer security provides integrity, confidentiality, and authentication.</span></span> <span data-ttu-id="4a2bd-106">传输安全由传送安全、消息安全或 `TransportWithMessageCredential` 实现。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-106">Transfer security is provided by one of the following: transport security, message security, or `TransportWithMessageCredential`.</span></span>  
  
 <span data-ttu-id="4a2bd-107">有关 WCF 消息安全的概述，请参阅 [安全性概述](security-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-107">For an overview of WCF message security, see [Security Overview](security-overview.md).</span></span> <span data-ttu-id="4a2bd-108">有关 WCF 安全的其他两个部分的详细信息，请参阅 [授权](authorization-in-wcf.md) 和 [审核](auditing-security-events.md)。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-108">For more information about the other two pieces of WCF security, see [Authorization](authorization-in-wcf.md) and [Auditing](auditing-security-events.md).</span></span>  
  
## <a name="transfer-security-scenarios"></a><span data-ttu-id="4a2bd-109">传输安全方案</span><span class="sxs-lookup"><span data-stu-id="4a2bd-109">Transfer Security Scenarios</span></span>  

 <span data-ttu-id="4a2bd-110">采用 WCF 传输安全性的常见方案包括：</span><span class="sxs-lookup"><span data-stu-id="4a2bd-110">Common scenarios that employ WCF transfer security include the following:</span></span>  
  
- <span data-ttu-id="4a2bd-111">使用 Windows 确保传输安全。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-111">Secure transfer using Windows.</span></span> <span data-ttu-id="4a2bd-112">WCF 客户端和服务部署在 Windows 域中 (或 Windows 林中) 。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-112">A WCF client and service are deployed in a Windows domain (or a Windows forest).</span></span> <span data-ttu-id="4a2bd-113">消息包含个人数据，因此要求客户端和服务相互进行身份验证，要求实现消息完整性和消息保密性。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-113">The messages contain personal data, so requirements include mutual authentication of the client and service, message integrity, and message confidentiality.</span></span> <span data-ttu-id="4a2bd-114">此外，还需要有已发生特定事务的证明，例如，消息的接收方应记录签名信息。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-114">In addition, proof is required that a particular transaction occurred, for example, the receiver of the message should record the signature information.</span></span>  
  
- <span data-ttu-id="4a2bd-115">使用 `UserName` 和 HTTPS 确保传输安全。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-115">Secure transfer using `UserName` and HTTPS.</span></span> <span data-ttu-id="4a2bd-116">需要开发 WCF 客户端和服务才能在 Internet 上工作。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-116">A WCF client and service need to be developed to work across the Internet.</span></span> <span data-ttu-id="4a2bd-117">客户端凭据根据数据库（其中的内容为用户名/密码对）进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-117">The client credentials authenticate against a database of user name/password pairs.</span></span> <span data-ttu-id="4a2bd-118">服务是用受信任的安全套接字层 (SSL) 证书部署在一个 HTTPS 地址的。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-118">The service is deployed at an HTTPS address using a trusted Secure Sockets Layer (SSL) certificate.</span></span> <span data-ttu-id="4a2bd-119">由于消息是通过 Internet 传输的，因此，客户端和服务需要相互进行身份验证，并且必须在传输过程中保持消息的保密性和完整性。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-119">Because the messages travel over the Internet, the client and service need to be mutually authenticated, and the messages' confidentiality and integrity must be preserved during transfer.</span></span>  
  
- <span data-ttu-id="4a2bd-120">使用证书确保传输安全。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-120">Secure transfer using certificates.</span></span> <span data-ttu-id="4a2bd-121">需要开发 WCF 客户端和服务才能在公共 internet 上工作。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-121">A WCF client and service need to be developed to work over the public internet.</span></span> <span data-ttu-id="4a2bd-122">客户端和服务都具有可用于确保消息安全的证书。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-122">The client and service both have certificates that can be used to secure the messages.</span></span> <span data-ttu-id="4a2bd-123">客户端和服务通过 Internet 进行相互通信，执行要求消息完整性、保密性和相互身份验证的重要事务。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-123">The client and service use the Internet to communicate with each other and to perform high-value transactions that require message integrity, confidentiality, and mutual authentication.</span></span>  
  
## <a name="integrity-confidentiality-and-authentication"></a><span data-ttu-id="4a2bd-124">完整性、保密性和身份验证</span><span class="sxs-lookup"><span data-stu-id="4a2bd-124">Integrity, Confidentiality, and Authentication</span></span>  

 <span data-ttu-id="4a2bd-125">三项功能 — 完整性、保密性和身份验证 — 合称为传输安全。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-125">Three functions—integrity, confidentiality and authentication—are together called transfer security.</span></span> <span data-ttu-id="4a2bd-126">传输安全提供的这些功能，有助于减轻对分布式应用程序的威胁。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-126">Transfer security provides the functions that help to mitigate the threats to a distributed application.</span></span> <span data-ttu-id="4a2bd-127">下表简要介绍构成传输安全的三项功能。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-127">The following table briefly describes the three functions that make up transfer security.</span></span>  
  
|<span data-ttu-id="4a2bd-128">函数</span><span class="sxs-lookup"><span data-stu-id="4a2bd-128">Function</span></span>|<span data-ttu-id="4a2bd-129">说明</span><span class="sxs-lookup"><span data-stu-id="4a2bd-129">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="4a2bd-130">完整性</span><span class="sxs-lookup"><span data-stu-id="4a2bd-130">Integrity</span></span>|<span data-ttu-id="4a2bd-131">*完整性* 是指数据是完整且准确的，尤其是在从一个点到另一个点并可能被多个参与者读取后。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-131">*Integrity* is the assurance that data is complete and accurate, especially after it has traversed from one point to another, and possibly been read by many actors.</span></span> <span data-ttu-id="4a2bd-132">完整性必须得到维护，以免数据被篡改，这通常是由消息的数字签名实现的。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-132">Integrity must be maintained to prevent tampering with the data, and is usually achieved by digital signing of a message.</span></span>|  
|<span data-ttu-id="4a2bd-133">机密性</span><span class="sxs-lookup"><span data-stu-id="4a2bd-133">Confidentiality</span></span>|<span data-ttu-id="4a2bd-134">*机密性* 是指确保消息尚未被预期读者之外的任何人读取。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-134">*Confidentiality* is the assurance that a message has not been read by anyone other than the intended reader.</span></span> <span data-ttu-id="4a2bd-135">例如，信用卡号在通过 Internet 发送时必须保密。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-135">For example, a credit card number must be kept confidential as it is sent over the Internet.</span></span> <span data-ttu-id="4a2bd-136">保密性通常是用公钥/私钥方案进行数据加密实现的。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-136">Confidentiality is often provided by the encryption of data using a public key/private key scheme.</span></span>|  
|<span data-ttu-id="4a2bd-137">身份验证</span><span class="sxs-lookup"><span data-stu-id="4a2bd-137">Authentication</span></span>|<span data-ttu-id="4a2bd-138">*身份验证* 是验证声明的标识。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-138">*Authentication* is the verification of a claimed identity.</span></span> <span data-ttu-id="4a2bd-139">例如，当使用银行帐户时，必须只允许帐户的实际所有者取款。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-139">For example, when using a bank account, it is imperative that only the actual owner of the account be allowed to withdraw funds.</span></span> <span data-ttu-id="4a2bd-140">有多种方式可以实现身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-140">Authentication can be provided by a variety of means.</span></span> <span data-ttu-id="4a2bd-141">一个常用方法是使用用户/密码系统。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-141">One common method is the user/password system.</span></span> <span data-ttu-id="4a2bd-142">第二个方法是使用第三方提供的 X.509 证书。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-142">A second is the use of an X.509 certificate that is provided by a third party.</span></span>|  
  
## <a name="security-modes"></a><span data-ttu-id="4a2bd-143">安全模式</span><span class="sxs-lookup"><span data-stu-id="4a2bd-143">Security Modes</span></span>  

 <span data-ttu-id="4a2bd-144">WCF 具有几种传输安全性模式，下表对此进行了说明。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-144">WCF has several modes of transfer security, which are described in the following table.</span></span>  
  
|<span data-ttu-id="4a2bd-145">“模式”</span><span class="sxs-lookup"><span data-stu-id="4a2bd-145">Mode</span></span>|<span data-ttu-id="4a2bd-146">说明</span><span class="sxs-lookup"><span data-stu-id="4a2bd-146">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="4a2bd-147">无</span><span class="sxs-lookup"><span data-stu-id="4a2bd-147">None</span></span>|<span data-ttu-id="4a2bd-148">传输层和消息层都不提供安全措施。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-148">No security is provided at the transport layer or at the message layer.</span></span> <span data-ttu-id="4a2bd-149">默认情况下，任何预定义绑定都不会使用此模式（元素除外），也不会使用 [\<basicHttpBinding>](../../configure-apps/file-schema/wcf/basichttpbinding.md) <xref:System.ServiceModel.BasicHttpBinding> 类。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-149">None of the predefined bindings use this mode by default except the [\<basicHttpBinding>](../../configure-apps/file-schema/wcf/basichttpbinding.md) element or, when using code, the <xref:System.ServiceModel.BasicHttpBinding> class.</span></span>|  
|<span data-ttu-id="4a2bd-150">Transport</span><span class="sxs-lookup"><span data-stu-id="4a2bd-150">Transport</span></span>|<span data-ttu-id="4a2bd-151">使用安全传送（如 HTTPS）实现完整性、保密性和相互身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-151">Uses a secure transport such as HTTPS for integrity, confidentiality, and mutual authentication.</span></span>|  
|<span data-ttu-id="4a2bd-152">消息</span><span class="sxs-lookup"><span data-stu-id="4a2bd-152">Message</span></span>|<span data-ttu-id="4a2bd-153">使用 SOAP 消息安全实现完整性、保密性和相互身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-153">Uses SOAP-message security for integrity, confidentiality, and mutual authentication.</span></span> <span data-ttu-id="4a2bd-154">SOAP 消息是按照 WS-Security 标准获得保护的。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-154">SOAP messages are secured according to the WS-Security standards.</span></span>|  
|<span data-ttu-id="4a2bd-155">混合模式</span><span class="sxs-lookup"><span data-stu-id="4a2bd-155">Mixed Mode</span></span>|<span data-ttu-id="4a2bd-156">使用传送安全实现完整性、保密性和服务器身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-156">Uses transport security for integrity, confidentiality, and server authentication.</span></span> <span data-ttu-id="4a2bd-157">使用消息安全（WS-Security 和其他标准）实现客户端身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-157">Uses message security (WS-Security and other standards) for client authentication.</span></span><br /><br /> <span data-ttu-id="4a2bd-158">（此模式的枚举值是 `TransportWithMessageCredential`。）</span><span class="sxs-lookup"><span data-stu-id="4a2bd-158">(This enumeration for this mode is `TransportWithMessageCredential`.)</span></span>|  
|<span data-ttu-id="4a2bd-159">推送、请求和匿名</span><span class="sxs-lookup"><span data-stu-id="4a2bd-159">Both</span></span>|<span data-ttu-id="4a2bd-160">在传送级别和消息级别都执行保护和身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-160">Performs protection and authentication at both levels.</span></span> <span data-ttu-id="4a2bd-161">此模式仅在元素中可用 [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) 。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-161">This mode is available only in the [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) element.</span></span>|  
  
## <a name="credentials-and-transfer-security"></a><span data-ttu-id="4a2bd-162">凭据和传输安全</span><span class="sxs-lookup"><span data-stu-id="4a2bd-162">Credentials and Transfer Security</span></span>  

 <span data-ttu-id="4a2bd-163">*凭据* 是用于建立声明的标识或功能的数据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-163">A *credential* is data that is presented to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="4a2bd-164">提交凭据涉及出示数据以及数据的所有权证明。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-164">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="4a2bd-165">WCF 在传输和消息安全级别支持多种凭据类型。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-165">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="4a2bd-166">可以为 WCF 绑定指定凭据类型。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-166">You can specify a type of credential for a WCF binding.</span></span>  
  
 <span data-ttu-id="4a2bd-167">在许多国家和地区，驾驶执照就是凭据的一个示例。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-167">In many countries or regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="4a2bd-168">该执照中包含表示个人身份和能力的数据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-168">A license contains data representing one's identity and capabilities.</span></span> <span data-ttu-id="4a2bd-169">它以持有人照片的形式包含所有权证明。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-169">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="4a2bd-170">该执照由受信任的颁发机构颁发，通常是获得许可的政府部门。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-170">The license is issued by a trusted authority, usually a governmental licensing department.</span></span> <span data-ttu-id="4a2bd-171">该执照采用密封形式且包含一张全息图，表明它未经改动或伪造。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-171">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="4a2bd-172">作为示例，请考虑 WCF 中支持的两种凭据类型：用户名和 (x.509) 证书凭据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-172">As an example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="4a2bd-173">对于用户名凭据，用户名表示已声明标识，密码表示所有权证明。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-173">For the user name credential, the user name represents the claimed identity and the password presents the proof of possession.</span></span> <span data-ttu-id="4a2bd-174">这种情况下，受信任的颁发机构则是验证用户名和密码的系统。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-174">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="4a2bd-175">在证书凭据中，主题名称、主题备用名称或证书中的特定字段可用于表示已声明标识和/或功能。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-175">In the certificate credential, the subject name, subject alternative name, or specific fields within the certificate can be used to represent the claimed identity and/or capabilities.</span></span> <span data-ttu-id="4a2bd-176">凭据中的数据所有权证明的建立，是用关联私钥生成签名实现的。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-176">Proof of possession of the data in the credential is established by using the associated private key to generate a signature.</span></span>  
  
 <span data-ttu-id="4a2bd-177">有关如何对传输安全性进行编程和指定凭据的详细信息，请参阅 [绑定和安全](bindings-and-security.md) 和 [安全行为](security-behaviors-in-wcf.md)。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-177">For more information about programming transfer security and specifying credentials, see [Bindings and Security](bindings-and-security.md) and [Security Behaviors](security-behaviors-in-wcf.md).</span></span>  
  
### <a name="transport-client-credential-types"></a><span data-ttu-id="4a2bd-178">传送客户端凭据类型</span><span class="sxs-lookup"><span data-stu-id="4a2bd-178">Transport Client Credential Types</span></span>  

 <span data-ttu-id="4a2bd-179">下表列出了在创建使用传输安全的应用程序时可能使用的值。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-179">The following table shows the possible values used when creating an application that uses transfer security.</span></span> <span data-ttu-id="4a2bd-180">在代码或绑定设置中，可以使用这些值。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-180">You can use these values in either code or binding settings.</span></span>  
  
|<span data-ttu-id="4a2bd-181">设置</span><span class="sxs-lookup"><span data-stu-id="4a2bd-181">Setting</span></span>|<span data-ttu-id="4a2bd-182">说明</span><span class="sxs-lookup"><span data-stu-id="4a2bd-182">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="4a2bd-183">无</span><span class="sxs-lookup"><span data-stu-id="4a2bd-183">None</span></span>|<span data-ttu-id="4a2bd-184">指定客户端不需要提供任何凭据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-184">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="4a2bd-185">这相当于匿名客户端。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-185">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="4a2bd-186">基本</span><span class="sxs-lookup"><span data-stu-id="4a2bd-186">Basic</span></span>|<span data-ttu-id="4a2bd-187">指定基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-187">Specifies basic authentication.</span></span> <span data-ttu-id="4a2bd-188">有关详细信息，请参阅 RFC2617 "[HTTP Authentication：基本和摘要式身份验证](http://schemas.xmlsoap.org/ws/2004/10/discovery/ws-discovery.pdf)"。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-188">For more information, see RFC2617, "[HTTP Authentication: Basic and Digest Authentication](http://schemas.xmlsoap.org/ws/2004/10/discovery/ws-discovery.pdf)."</span></span>|  
|<span data-ttu-id="4a2bd-189">摘要</span><span class="sxs-lookup"><span data-stu-id="4a2bd-189">Digest</span></span>|<span data-ttu-id="4a2bd-190">指定摘要式身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-190">Specifies digest authentication.</span></span> <span data-ttu-id="4a2bd-191">有关详细信息，请参阅 RFC2617 "[HTTP Authentication：基本和摘要式身份验证](http://schemas.xmlsoap.org/ws/2004/10/discovery/ws-discovery.pdf)"。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-191">For more information, see RFC2617, "[HTTP Authentication: Basic and Digest Authentication](http://schemas.xmlsoap.org/ws/2004/10/discovery/ws-discovery.pdf)."</span></span>|  
|<span data-ttu-id="4a2bd-192">Ntlm</span><span class="sxs-lookup"><span data-stu-id="4a2bd-192">Ntlm</span></span>|<span data-ttu-id="4a2bd-193">指定在 Windows 域中使用 SSPI 协商进行 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-193">Specifies Windows authentication using SSPI negotiation on a Windows domain.</span></span><br /><br /> <span data-ttu-id="4a2bd-194">要使用 SSPI 协商，就需要使用 Kerberos 协议或 NT LanMan (NTLM)。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-194">SSPI negotiation results in using either the Kerberos protocol or NT LanMan (NTLM).</span></span>|  
|<span data-ttu-id="4a2bd-195">Windows</span><span class="sxs-lookup"><span data-stu-id="4a2bd-195">Windows</span></span>|<span data-ttu-id="4a2bd-196">指定在 Windows 域中使用 SSPI 进行 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-196">Specifies Windows authentication using SSPI on a Windows domain.</span></span> <span data-ttu-id="4a2bd-197">SSPI 选择 Kerberos 协议或 NTLM 作为身份验证服务。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-197">SSPI picks from either the Kerberos protocol or NTLM as authentication service.</span></span><br /><br /> <span data-ttu-id="4a2bd-198">SSPI 首先尝试 Kerberos 协议；如果失败，则使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-198">SSPI tries Kerberos protocol first; if that fails, it then uses NTLM.</span></span>|  
|<span data-ttu-id="4a2bd-199">证书</span><span class="sxs-lookup"><span data-stu-id="4a2bd-199">Certificate</span></span>|<span data-ttu-id="4a2bd-200">使用证书（通常是 X.509）执行客户端身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-200">Performs client authentication using a certificate, typically X.509.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="4a2bd-201">消息客户端凭据类型</span><span class="sxs-lookup"><span data-stu-id="4a2bd-201">Message Client Credential Types</span></span>  

 <span data-ttu-id="4a2bd-202">下表列出了在创建使用消息安全的应用程序时可能使用的值。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-202">The following table shows the possible values used when creating an application that uses message security.</span></span> <span data-ttu-id="4a2bd-203">在代码或绑定设置中，可以使用这些值。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-203">You can use these values in either code or binding settings.</span></span>  
  
|<span data-ttu-id="4a2bd-204">设置</span><span class="sxs-lookup"><span data-stu-id="4a2bd-204">Setting</span></span>|<span data-ttu-id="4a2bd-205">说明</span><span class="sxs-lookup"><span data-stu-id="4a2bd-205">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="4a2bd-206">无</span><span class="sxs-lookup"><span data-stu-id="4a2bd-206">None</span></span>|<span data-ttu-id="4a2bd-207">允许服务与匿名客户端交互。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-207">Allows the service to interact with anonymous clients.</span></span>|  
|<span data-ttu-id="4a2bd-208">Windows</span><span class="sxs-lookup"><span data-stu-id="4a2bd-208">Windows</span></span>|<span data-ttu-id="4a2bd-209">允许在 Windows 凭据的已通过身份验证的上下文中执行 SOAP 消息交换。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-209">Allows SOAP message exchanges to occur under the authenticated context of a Windows credential.</span></span> <span data-ttu-id="4a2bd-210">使用 SSPI 协商机制选择 Kerberos 协议或 NTLM 作为身份验证服务。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-210">Uses SSPI negotiation mechanism to pick from either the Kerberos protocol or NTLM as an authentication service.</span></span>|  
|<span data-ttu-id="4a2bd-211">用户名</span><span class="sxs-lookup"><span data-stu-id="4a2bd-211">Username</span></span>|<span data-ttu-id="4a2bd-212">允许服务可以要求使用用户名凭据对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-212">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="4a2bd-213">请注意，WCF 不允许使用用户名进行任何加密操作，例如生成签名或加密数据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-213">Note that WCF does not allow any cryptographic operations with the user name, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="4a2bd-214">因此，在使用用户名凭据时，WCF 会强制保护传输。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-214">As such, WCF enforces that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="4a2bd-215">证书</span><span class="sxs-lookup"><span data-stu-id="4a2bd-215">Certificate</span></span>|<span data-ttu-id="4a2bd-216">允许服务要求使用证书对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-216">Allows the service to require that the client be authenticated using a certificate.</span></span>|  
|<span data-ttu-id="4a2bd-217">CardSpace</span><span class="sxs-lookup"><span data-stu-id="4a2bd-217">CardSpace</span></span>|<span data-ttu-id="4a2bd-218">允许服务要求使用 CardSpace 对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-218">Allows the service to require that the client be authenticated using an CardSpace.</span></span>|  
  
### <a name="programming-credentials"></a><span data-ttu-id="4a2bd-219">凭据编程</span><span class="sxs-lookup"><span data-stu-id="4a2bd-219">Programming Credentials</span></span>  

 <span data-ttu-id="4a2bd-220">对于每个客户端凭据类型，WCF 编程模型允许您使用服务行为和通道行为来指定凭据值和凭据验证程序。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-220">For each of the client credential types, the WCF programming model allows you to specify the credential values and credential validators by using service behaviors and channel behaviors.</span></span>  
  
 <span data-ttu-id="4a2bd-221">WCF 安全性具有两种类型的凭据：服务凭据行为和通道凭据行为。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-221">WCF security has two types of credentials: service credential behaviors and channel credential behaviors.</span></span> <span data-ttu-id="4a2bd-222">WCF 中的凭据行为指定实际数据，即用于满足通过绑定表示的安全要求的凭据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-222">Credential behaviors in WCF specify the actual data, namely, credentials used to meet the security requirements expressed through bindings.</span></span> <span data-ttu-id="4a2bd-223">在 WCF 中，客户端类是在操作调用和消息之间进行转换的运行时组件。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-223">In WCF, a client class is the run-time component that converts between operation invocation and messages.</span></span> <span data-ttu-id="4a2bd-224">所有客户端都是从 <xref:System.ServiceModel.ClientBase%601> 类继承的。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-224">All clients inherit from the <xref:System.ServiceModel.ClientBase%601> class.</span></span> <span data-ttu-id="4a2bd-225">通过基类的 <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> 属性，可以指定不同的客户端凭据值。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-225">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the base class allows you to specify various values of client credentials.</span></span>  
  
 <span data-ttu-id="4a2bd-226">在 WCF 中，服务行为是应用于实现服务协定的类的特性 (接口) 以编程方式控制服务。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-226">In WCF, service behaviors are attributes applied to the class implementing a service contract (interface) to programmatically control the service.</span></span> <span data-ttu-id="4a2bd-227">使用 <xref:System.ServiceModel.Description.ServiceCredentials> 类，可以为服务凭据指定证书，也可以为不同的客户端凭据类型指定客户端验证设置。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-227">The <xref:System.ServiceModel.Description.ServiceCredentials> class allows you to specify certificates for service credential and client validation settings for various client credential types.</span></span>  
  
### <a name="negotiation-model-for-message-security"></a><span data-ttu-id="4a2bd-228">消息安全的协商模型</span><span class="sxs-lookup"><span data-stu-id="4a2bd-228">Negotiation Model for Message Security</span></span>  

 <span data-ttu-id="4a2bd-229">在消息安全模式中，通过执行传输安全，可以在客户端带外配置服务凭据。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-229">The message security mode allows you to perform transfer security so that the service credential is configured at the client out of band.</span></span> <span data-ttu-id="4a2bd-230">例如，如果使用的是存储在 Windows 证书存储区中的证书，则必须使用一个工具，如 Microsoft 管理控制台 (MMC) 单元。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-230">For example, if you are using a certificate stored in the Windows certificate store, you must use a tool such as a Microsoft Management Console (MMC) snap-in.</span></span>  
  
 <span data-ttu-id="4a2bd-231">在消息安全模式中，通过执行传输安全，还可以与客户端交换服务凭据，作为初始协商的一部分。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-231">The message security mode also allows you to perform transfer security so that the service credential is exchanged with the client as part of an initial negotiation.</span></span> <span data-ttu-id="4a2bd-232">若要启用协商，请将 <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> 属性设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="4a2bd-232">To enable negotiation, set the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> property to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4a2bd-233">请参阅</span><span class="sxs-lookup"><span data-stu-id="4a2bd-233">See also</span></span>

- [<span data-ttu-id="4a2bd-234">终结点创建概述</span><span class="sxs-lookup"><span data-stu-id="4a2bd-234">Endpoint Creation Overview</span></span>](../endpoint-creation-overview.md)
- [<span data-ttu-id="4a2bd-235">系统提供的绑定</span><span class="sxs-lookup"><span data-stu-id="4a2bd-235">System-Provided Bindings</span></span>](../system-provided-bindings.md)
- [<span data-ttu-id="4a2bd-236">安全性概述</span><span class="sxs-lookup"><span data-stu-id="4a2bd-236">Security Overview</span></span>](security-overview.md)
- <span data-ttu-id="4a2bd-237">[Windows Server App Fabric 的安全模型](/previous-versions/appfabric/ee677202(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="4a2bd-237">[Security Model for Windows Server App Fabric](/previous-versions/appfabric/ee677202(v=azure.10))</span></span>

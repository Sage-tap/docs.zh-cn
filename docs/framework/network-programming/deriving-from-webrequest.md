---
description: 详细了解：从 WebRequest 派生
title: 从 WebRequest 派生
ms.date: 03/30/2017
helpviewer_keywords:
- WebRequest class, pluggable protocols
- protocol-specific request handler
- sending data, pluggable protocols
- pluggable protocols, class criteria
- Internet, pluggable protocols
- receiving data, pluggable protocols
- protocols, pluggable
ms.assetid: 9810c177-973e-43d7-823c-14960bd625ea
ms.openlocfilehash: ede2480767f11ef66bccc79ab4e3a4bc8aafc1fb
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/06/2021
ms.locfileid: "99801899"
---
# <a name="deriving-from-webrequest"></a><span data-ttu-id="0c7e2-103">从 WebRequest 派生</span><span class="sxs-lookup"><span data-stu-id="0c7e2-103">Deriving from WebRequest</span></span>

<span data-ttu-id="0c7e2-104"><xref:System.Net.WebRequest> 类是一个抽象基类，可为创建适合 .NET Framework 可插入协议模型的协议特定的请求处理程序提供基本方法和属性。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-104">The <xref:System.Net.WebRequest> class is an abstract base class that provides the basic methods and properties for creating a protocol-specific request handler that fits the .NET Framework pluggable protocol model.</span></span> <span data-ttu-id="0c7e2-105">使用 WebRequest 类的应用程序可使用任何支持的协议请求数据，而无需指定所使用的协议。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-105">Applications that use the **WebRequest** class can request data using any supported protocol without needing to specify the protocol used.</span></span>  
  
 <span data-ttu-id="0c7e2-106">必须满足两个条件才能将协议特定的类用作可插入协议：该类必须实现 <xref:System.Net.IWebRequestCreate> 接口，并且必须使用 <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> 方法注册。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-106">Two criteria must be met in order for a protocol-specific class to be used as a pluggable protocol: The class must implement the <xref:System.Net.IWebRequestCreate> interface, and it must register with the <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="0c7e2-107">该类必须覆盖 WebRequest 的所有抽象方法和属性，才能提供可插入接口。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-107">The class must override all the abstract methods and properties of **WebRequest** to provide the pluggable interface.</span></span>  
  
 <span data-ttu-id="0c7e2-108">WebRequest 实例是一次性的，如果想再发出请求，请创建一个新的 WebRequest。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-108">**WebRequest** instances are intended for one-time use; if you want to make another request, create a new **WebRequest**.</span></span> <span data-ttu-id="0c7e2-109">WebRequest 支持 <xref:System.Runtime.Serialization.ISerializable> 接口，使开发人员能够序列化模板 WebRequest，然后针对其他请求重新构建模板。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-109">**WebRequest** supports the <xref:System.Runtime.Serialization.ISerializable> interface to enable developers to serialize a template **WebRequest** and then reconstruct the template for additional requests.</span></span>  
  
## <a name="iwebrequest-create-method"></a><span data-ttu-id="0c7e2-110">IWebRequest Create 方法</span><span class="sxs-lookup"><span data-stu-id="0c7e2-110">IWebRequest Create Method</span></span>  

 <span data-ttu-id="0c7e2-111"><xref:System.Net.IWebRequestCreate.Create%2A> 方法负责初始化协议特定的类的新实例。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-111">The <xref:System.Net.IWebRequestCreate.Create%2A> method is responsible for initializing a new instance of the protocol-specific class.</span></span> <span data-ttu-id="0c7e2-112">创建新 WebRequest 后，<xref:System.Net.WebRequest.Create%2A?displayProperty=nameWithType> 方法会将请求的 URI 与使用 RegisterPrefix 方法注册的 URI 前缀进行匹配。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-112">When a new **WebRequest** is created, the <xref:System.Net.WebRequest.Create%2A?displayProperty=nameWithType> method matches the requested URI with the URI prefixes registered with the **RegisterPrefix** method.</span></span> <span data-ttu-id="0c7e2-113">正确的协议特定后代的 Create 方法必须返回该后代的初始化实例，该实例能够为协议执行标准请求/响应事务，且不需要修改任何协议特定的字段。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-113">The **Create** method of the proper protocol-specific descendant must return an initialized instance of the descendant capable of performing a standard request/response transaction for the protocol without needing any protocol-specific fields modified.</span></span>  
  
## <a name="connectiongroupname-property"></a><span data-ttu-id="0c7e2-114">ConnectionGroupName 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-114">ConnectionGroupName Property</span></span>  

 <span data-ttu-id="0c7e2-115"><xref:System.Net.WebRequest.ConnectionGroupName%2A> 属性用于命名一组资源连接，以便可通过单个连接发出多个请求。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-115">The <xref:System.Net.WebRequest.ConnectionGroupName%2A> property is used to name a group of connections to a resource so that multiple requests can be made over a single connection.</span></span> <span data-ttu-id="0c7e2-116">若要实现连接共享，必须使用协议特定的方法来集中和分配连接。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-116">To implement connection-sharing, you must use a protocol-specific method of pooling and assigning connections.</span></span> <span data-ttu-id="0c7e2-117">例如，提供的 <xref:System.Net.ServicePointManager> 类实现 <xref:System.Net.HttpWebRequest> 类的连接共享。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-117">For example, the provided <xref:System.Net.ServicePointManager> class implements connection sharing for the <xref:System.Net.HttpWebRequest> class.</span></span> <span data-ttu-id="0c7e2-118">ServicePointManager 类创建可为每个连接组提供特定服务器连接的 <xref:System.Net.ServicePoint>。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-118">The **ServicePointManager** class creates a <xref:System.Net.ServicePoint> that provides a connection to a specific server for each connection group.</span></span>  
  
## <a name="contentlength-property"></a><span data-ttu-id="0c7e2-119">ContentLength 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-119">ContentLength Property</span></span>  

 <span data-ttu-id="0c7e2-120"><xref:System.Net.WebRequest.ContentLength%2A> 属性指定上传数据时将发送到服务器的数据的字节数。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-120">The <xref:System.Net.WebRequest.ContentLength%2A> property specifies the number of bytes of data that will be sent to the server when uploading data.</span></span>  
  
 <span data-ttu-id="0c7e2-121">通常，当 ContentLength 属性设置为大于零的值时，必须将 <xref:System.Net.WebRequest.Method%2A> 属性设置为表示正在上传。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-121">Typically the <xref:System.Net.WebRequest.Method%2A> property must be set to indicate that an upload is taking place when the **ContentLength** property is set to a value greater than zero.</span></span>  
  
## <a name="contenttype-property"></a><span data-ttu-id="0c7e2-122">ContentType 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-122">ContentType Property</span></span>  

 <span data-ttu-id="0c7e2-123"><xref:System.Net.WebRequest.ContentType%2A> 属性提供协议要求用户发送至服务器的所有特殊信息，以确定发送的内容的类型。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-123">The <xref:System.Net.WebRequest.ContentType%2A> property provides any special information that your protocol requires you to send to the server to identify the type of content that you are sending.</span></span> <span data-ttu-id="0c7e2-124">这通常是所有上传数据的 MIME 内容类型。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-124">Typically this is the MIME content type of any data uploaded.</span></span>  
  
## <a name="credentials-property"></a><span data-ttu-id="0c7e2-125">Credentials 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-125">Credentials Property</span></span>  

 <span data-ttu-id="0c7e2-126"><xref:System.Net.WebRequest.Credentials%2A> 属性包含服务器对请求进行身份验证所需的信息。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-126">The <xref:System.Net.WebRequest.Credentials%2A> property contains information needed to authenticate the request with the server.</span></span> <span data-ttu-id="0c7e2-127">用户必须实现协议的身份验证过程的详细信息。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-127">You must implement the details of the authentication process for your protocol.</span></span> <span data-ttu-id="0c7e2-128"><xref:System.Net.AuthenticationManager> 类负责对请求进行身份验证和提供身份验证令牌。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-128">The <xref:System.Net.AuthenticationManager> class is responsible for authenticating requests and providing an authentication token.</span></span> <span data-ttu-id="0c7e2-129">提供协议使用的凭据的类必须实现 <xref:System.Net.ICredentials> 接口。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-129">The class that provides the credentials used by your protocol must implement the <xref:System.Net.ICredentials> interface.</span></span>  
  
## <a name="headers-property"></a><span data-ttu-id="0c7e2-130">Headers 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-130">Headers Property</span></span>  

 <span data-ttu-id="0c7e2-131"><xref:System.Net.WebRequest.Headers%2A> 属性包含与请求相关联的元数据的名称/值对的任意集合。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-131">The <xref:System.Net.WebRequest.Headers%2A> property contains an arbitrary collection of name/value pairs of metadata associated with the request.</span></span> <span data-ttu-id="0c7e2-132">协议所需的任何可表示为名称/值对的元数据都可以包含在 Headers 属性中。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-132">Any metadata needed by the protocol that can be expressed as a name/value pair can be included in the **Headers** property.</span></span> <span data-ttu-id="0c7e2-133">通常，在调用 <xref:System.Net.WebRequest.GetRequestStream%2A> 或 <xref:System.Net.WebRequest.GetResponse%2A> 方法之前必须先设置此信息；一旦发出请求，元数据就会被视为只读。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-133">Typically this information must be set before calling the <xref:System.Net.WebRequest.GetRequestStream%2A> or <xref:System.Net.WebRequest.GetResponse%2A> methods; once the request has been made, the metadata is considered read-only.</span></span>  
  
 <span data-ttu-id="0c7e2-134">用户无需使用 Headers 属性即可使用标头元数据。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-134">You are not required to use the **Headers** property to use header metadata.</span></span> <span data-ttu-id="0c7e2-135">协议特定的元数据可作为属性公开，例如，<xref:System.Net.HttpWebRequest.UserAgent%2A?displayProperty=nameWithType> 属性公开了 User-Agent HTTP 标头。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-135">Protocol-specific metadata can be exposed as properties; for example, the <xref:System.Net.HttpWebRequest.UserAgent%2A?displayProperty=nameWithType> property exposes the **User-Agent** HTTP header.</span></span> <span data-ttu-id="0c7e2-136">将标头元数据作为属性公开时，应禁止使用 Headers 属性设置相同的属性。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-136">When you expose header metadata as a property, you should not allow the same property to be set using the **Headers** property.</span></span>  
  
## <a name="method-property"></a><span data-ttu-id="0c7e2-137">Method 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-137">Method Property</span></span>  

 <span data-ttu-id="0c7e2-138"><xref:System.Net.WebRequest.Method%2A> 属性包含请求要求服务器执行的动作或操作。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-138">The <xref:System.Net.WebRequest.Method%2A> property contains the verb or action that the request is asking the server to perform.</span></span> <span data-ttu-id="0c7e2-139">Method 属性的默认值必须启用标准请求/响应操作，无需设置任何协议特定的属性。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-139">The default for the **Method** property must enable a standard request/response action without requiring any protocol-specific properties to be set.</span></span> <span data-ttu-id="0c7e2-140">例如，<xref:System.Net.HttpWebResponse.Method%2A> 方法默认为 GET，该方法从 Web 服务器请求资源并返回响应。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-140">For example, the <xref:System.Net.HttpWebResponse.Method%2A> method defaults to GET, which requests a resource from a Web server and returns the response.</span></span>  
  
 <span data-ttu-id="0c7e2-141">通常，当 Method 属性设置为表明正在进行上传的动作或操作时，ContentLength 属性的值必须大于零。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-141">Typically the **ContentLength** property must be set to a value greater than zero when the **Method** property is set to a verb or action that indicates that an upload is taking place.</span></span>  
  
## <a name="preauthenticate-property"></a><span data-ttu-id="0c7e2-142">PreAuthenticate 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-142">PreAuthenticate Property</span></span>  

 <span data-ttu-id="0c7e2-143">应用程序设置 <xref:System.Net.WebRequest.PreAuthenticate%2A> 属性以指示应随初始请求一起发送身份验证信息，而不应等待身份验证质询。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-143">Applications set the <xref:System.Net.WebRequest.PreAuthenticate%2A> property to indicate that authentication information should be sent with the initial request rather than waiting for an authentication challenge.</span></span> <span data-ttu-id="0c7e2-144">仅当协议支持随初始请求一起发送的身份验证凭据时，PreAuthenticate 属性才有意义。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-144">The **PreAuthenticate** property is only meaningful if the protocol supports authentication credentials sent with the initial request.</span></span>  
  
## <a name="proxy-property"></a><span data-ttu-id="0c7e2-145">Proxy 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-145">Proxy Property</span></span>  

 <span data-ttu-id="0c7e2-146"><xref:System.Net.WebRequest.Proxy%2A> 属性包含用于访问所请求资源的 <xref:System.Net.IWebProxy> 接口。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-146">The <xref:System.Net.WebRequest.Proxy%2A> property contains an <xref:System.Net.IWebProxy> interface that is used to access the requested resource.</span></span> <span data-ttu-id="0c7e2-147">仅当协议支持代理请求时，Proxy 属性才有意义。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-147">The **Proxy** property is meaningful only if your protocol supports proxied requests.</span></span> <span data-ttu-id="0c7e2-148">如果协议需要代理，则必须设置默认代理。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-148">You must set the default proxy if one is required by your protocol.</span></span>  
  
 <span data-ttu-id="0c7e2-149">在某些环境中，例如公司防火墙后，可能会要求协议使用代理。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-149">In some environments, such as behind a corporate firewall, your protocol might be required to use a proxy.</span></span> <span data-ttu-id="0c7e2-150">在这种情况下，必须实现 IWebProxy 接口以创建可用于协议的代理类。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-150">In that case, you must implement the **IWebProxy** interface to create a proxy class that will work for your protocol.</span></span>  
  
## <a name="requesturi-property"></a><span data-ttu-id="0c7e2-151">RequestUri 属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-151">RequestUri Property</span></span>  

 <span data-ttu-id="0c7e2-152"><xref:System.Net.WebRequest.RequestUri%2A> 属性包含传递给 WebRequest.Create 方法的 URI。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-152">The <xref:System.Net.WebRequest.RequestUri%2A> property contains the URI that was passed to the **WebRequest.Create** method.</span></span> <span data-ttu-id="0c7e2-153">创建 WebRequest 后，它就为只读且不能更改。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-153">It is read-only and cannot be changed once the **WebRequest** has been created.</span></span> <span data-ttu-id="0c7e2-154">如果协议支持重定向，则可由其他 URI 所标识的资源发出响应。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-154">If your protocol supports redirection, the response can come from a resource identified by a different URI.</span></span> <span data-ttu-id="0c7e2-155">如需提供对响应 URI 的访问权限，则必须提供一个包含该 URI 的其他属性。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-155">If you need to provide access to the URI that responded, you must provide an additional property containing that URI.</span></span>  
  
## <a name="timeout-property"></a><span data-ttu-id="0c7e2-156">超时属性</span><span class="sxs-lookup"><span data-stu-id="0c7e2-156">Timeout Property</span></span>  

 <span data-ttu-id="0c7e2-157"><xref:System.Net.WebRequest.Timeout%2A> 属性包含请求超时并引发异常前等待的时长（以毫秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-157">The <xref:System.Net.WebRequest.Timeout%2A> property contains the length of time, in milliseconds, to wait before the request times out and throws an exception.</span></span> <span data-ttu-id="0c7e2-158">Timeout 仅适用于使用 <xref:System.Net.WebRequest.GetResponse%2A> 方法发出的同步请求，异步请求必须使用 <xref:System.Net.WebRequest.Abort%2A> 方法取消挂起的请求。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-158">**Timeout** applies only to synchronous requests made with the <xref:System.Net.WebRequest.GetResponse%2A> method; asynchronous requests must use the <xref:System.Net.WebRequest.Abort%2A> method to cancel a pending request.</span></span>  
  
 <span data-ttu-id="0c7e2-159">仅当协议特定的类实现超时过程时，设置 Timeout 属性才有意义。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-159">Setting the **Timeout** property is meaningful only if the protocol-specific class implements a time-out process.</span></span>  
  
## <a name="abort-method"></a><span data-ttu-id="0c7e2-160">Abort 方法</span><span class="sxs-lookup"><span data-stu-id="0c7e2-160">Abort Method</span></span>  

 <span data-ttu-id="0c7e2-161"><xref:System.Net.WebRequest.Abort%2A> 方法取消服务器的挂起异步请求。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-161">The <xref:System.Net.WebRequest.Abort%2A> method cancels a pending asynchronous request to a server.</span></span> <span data-ttu-id="0c7e2-162">取消请求后，调用 GetResponse、BeginGetResponse、EndGetResponse、GetRequestStream、BeginGetRequestStream 或 EndGetRequestStream 将引发 <xref:System.Net.WebException>，且<xref:System.Net.WebException.Status%2A> 属性被设置为 <xref:System.Net.WebExceptionStatus>。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-162">After the request has been canceled, calling **GetResponse**, **BeginGetResponse**, **EndGetResponse**, **GetRequestStream**, **BeginGetRequestStream**, or **EndGetRequestStream** will throw a <xref:System.Net.WebException> with the <xref:System.Net.WebException.Status%2A> property set to <xref:System.Net.WebExceptionStatus>.</span></span>  
  
## <a name="begingetrequeststream-and-endgetrequeststream-methods"></a><span data-ttu-id="0c7e2-163">BeginGetRequestStream 和 EndGetRequestStream 方法</span><span class="sxs-lookup"><span data-stu-id="0c7e2-163">BeginGetRequestStream and EndGetRequestStream Methods</span></span>  

 <span data-ttu-id="0c7e2-164"><xref:System.Net.WebRequest.BeginGetRequestStream%2A> 方法为用于将数据上传到服务器的流启动异步请求。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-164">The <xref:System.Net.WebRequest.BeginGetRequestStream%2A> method starts an asynchronous request for the stream that is used to upload data to the server.</span></span> <span data-ttu-id="0c7e2-165"><xref:System.Net.WebRequest.EndGetRequestStream%2A> 方法完成异步请求并返回所请求的流。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-165">The <xref:System.Net.WebRequest.EndGetRequestStream%2A> method completes the asynchronous request and returns the requested stream.</span></span> <span data-ttu-id="0c7e2-166">这些方法使用标准 .NET Framework 异步模式实现 GetRequestStream 方法。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-166">These methods implement the **GetRequestStream** method using the standard .NET Framework asynchronous pattern.</span></span>  
  
## <a name="begingetresponse-and-endgetresponse-methods"></a><span data-ttu-id="0c7e2-167">BeginGetResponse 和 EndGetResponse 方法</span><span class="sxs-lookup"><span data-stu-id="0c7e2-167">BeginGetResponse and EndGetResponse Methods</span></span>  

 <span data-ttu-id="0c7e2-168"><xref:System.Net.WebRequest.BeginGetResponse%2A> 方法启动服务器的异步请求。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-168">The <xref:System.Net.WebRequest.BeginGetResponse%2A> method starts an asynchronous request to a server.</span></span> <span data-ttu-id="0c7e2-169"><xref:System.Net.WebRequest.EndGetResponse%2A> 方法完成异步请求并返回请求的响应。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-169">The <xref:System.Net.WebRequest.EndGetResponse%2A> method completes the asynchronous request and returns the requested response.</span></span> <span data-ttu-id="0c7e2-170">这些方法使用标准 .NET Framework 异步模式实现 GetResponse 方法。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-170">These methods implement the **GetResponse** method using the standard .NET Framework asynchronous pattern.</span></span>  
  
## <a name="getrequeststream-method"></a><span data-ttu-id="0c7e2-171">GetRequestStream 方法</span><span class="sxs-lookup"><span data-stu-id="0c7e2-171">GetRequestStream Method</span></span>  

 <span data-ttu-id="0c7e2-172"><xref:System.Net.WebRequest.GetRequestStream%2A> 方法返回用于将数据写入请求的服务器的流。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-172">The <xref:System.Net.WebRequest.GetRequestStream%2A> method returns a stream that is used to write data to the requested server.</span></span> <span data-ttu-id="0c7e2-173">返回的流应为只写流，不会进行查找，它作为写入服务器的单向数据流。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-173">The stream returned should be a write-only stream that does not seek; it is intended as a one-way stream of data that is written to the server.</span></span> <span data-ttu-id="0c7e2-174">该流针对 <xref:System.IO.Stream.CanRead%2A> 和 <xref:System.IO.Stream.CanSeek%2A> 属性返回 false，针对 <xref:System.IO.Stream.CanWrite%2A> 属性返回 true。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-174">The stream returns false for the <xref:System.IO.Stream.CanRead%2A> and <xref:System.IO.Stream.CanSeek%2A> properties and true for the <xref:System.IO.Stream.CanWrite%2A> property.</span></span>  
  
 <span data-ttu-id="0c7e2-175">返回流之前，GetRequestStream 方法通常会与服务器建立连接，并发送指示正在将数据发送到服务器的标头信息。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-175">The **GetRequestStream** method typically opens a connection to the server and, before returning the stream, sends header information that indicates that data is being sent to the server.</span></span> <span data-ttu-id="0c7e2-176">由于 GetRequestStream 开始请求，因此在调用 GetRequestStream 后，通常不允许设置任何 Header 属性或 ContentLength 属性。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-176">Because **GetRequestStream** begins the request, setting any **Header** properties or the **ContentLength** property is typically not allowed after calling **GetRequestStream**.</span></span>  
  
## <a name="getresponse-method"></a><span data-ttu-id="0c7e2-177">GetResponse 方法</span><span class="sxs-lookup"><span data-stu-id="0c7e2-177">GetResponse Method</span></span>  

 <span data-ttu-id="0c7e2-178"><xref:System.Net.WebRequest.GetResponse%2A> 方法返回 <xref:System.Net.WebResponse> 类的协议特定的后代，表示来自服务器的响应。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-178">The <xref:System.Net.WebRequest.GetResponse%2A> method returns a protocol-specific descendant of the <xref:System.Net.WebResponse> class that represents the response from the server.</span></span> <span data-ttu-id="0c7e2-179">除非请求已经由 GetRequestStream 方法启动，否则 GetResponse 方法会与 RequestUri 标识的资源建立连接，发送标头信息，指示发出的请求的类型，然后从资源接收响应。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-179">Unless the request has already been initiated by the **GetRequestStream** method, the **GetResponse** method creates a connection to the resource identified by **RequestUri**, sends header information indicating the type of request being made, and then receives the response from the resource.</span></span>  
  
 <span data-ttu-id="0c7e2-180">调用 GetResponse 方法后，所有属性都应该被视为只读。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-180">Once the **GetResponse** method is called, all properties should be considered read-only.</span></span> <span data-ttu-id="0c7e2-181">WebRequest 实例是一次性的；如果想再发出请求，应创建一个新的 WebRequest。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-181">**WebRequest** instances are intended for one-time use; if you want to make another request, you should create a new **WebRequest**.</span></span>  
  
 <span data-ttu-id="0c7e2-182">GetResponse 方法负责创建适当的 WebResponse 后代来包含传入的响应。</span><span class="sxs-lookup"><span data-stu-id="0c7e2-182">The **GetResponse** method is responsible for creating an appropriate **WebResponse** descendant to contain the incoming response.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0c7e2-183">请参阅</span><span class="sxs-lookup"><span data-stu-id="0c7e2-183">See also</span></span>

- <xref:System.Net.WebRequest>
- <xref:System.Net.HttpWebRequest>
- <xref:System.Net.FileWebRequest>
- [<span data-ttu-id="0c7e2-184">对可插入协议进行编程</span><span class="sxs-lookup"><span data-stu-id="0c7e2-184">Programming Pluggable Protocols</span></span>](programming-pluggable-protocols.md)
- [<span data-ttu-id="0c7e2-185">从 WebResponse 派生</span><span class="sxs-lookup"><span data-stu-id="0c7e2-185">Deriving from WebResponse</span></span>](deriving-from-webresponse.md)

---
title: 何时为 Docker 容器选择 .NET 5
description: 适用于容器化 .NET 应用程序的 .NET 微服务体系结构 | 何时为 Docker 容器选择 .NET
ms.date: 01/13/2021
ms.openlocfilehash: 61909c91d795582af499456c65ae0d7b4f2911e2
ms.sourcegitcommit: a4cecb7389f02c27e412b743f9189bd2a6dea4d6
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/14/2021
ms.locfileid: "98189273"
---
# <a name="when-to-choose-net-for-docker-containers"></a><span data-ttu-id="2af24-103">何时为 Docker 容器选择 .NET</span><span class="sxs-lookup"><span data-stu-id="2af24-103">When to choose .NET for Docker containers</span></span>

<span data-ttu-id="2af24-104">.NET 5 的模块化和轻量级特点使其特别适用于容器。</span><span class="sxs-lookup"><span data-stu-id="2af24-104">The modularity and lightweight nature of .NET 5 makes it perfect for containers.</span></span> <span data-ttu-id="2af24-105">在部署和启动容器时，使用 .NET 5 时容器的映像大小要远小于使用 .NET Framework 时的大小。</span><span class="sxs-lookup"><span data-stu-id="2af24-105">When you deploy and start a container, its image is far smaller with .NET 5 than with .NET Framework.</span></span> <span data-ttu-id="2af24-106">与此相反，若要为某个容器使用 .NET Framework，必须以 Windows Server Core 映像作为映像的基础，此映像在体量上远大于用于 .NET 5 的 Windows Nano Server 或 Linux 映像。</span><span class="sxs-lookup"><span data-stu-id="2af24-106">In contrast, to use .NET Framework for a container, you must base your image on the Windows Server Core image, which is a lot heavier than the Windows Nano Server or Linux images that you use for .NET 5.</span></span>

<span data-ttu-id="2af24-107">此外，.NET 5 可跨平台应用，这样便可使用 Linux 或 Windows 容器映像部署服务器应用。</span><span class="sxs-lookup"><span data-stu-id="2af24-107">Additionally, .NET 5 is cross-platform, so you can deploy server apps with Linux or Windows container images.</span></span> <span data-ttu-id="2af24-108">但如果使用传统的 .NET Framework，只能够基于 Windows Server Core 部署映像。</span><span class="sxs-lookup"><span data-stu-id="2af24-108">However, if you are using the traditional .NET Framework, you can only deploy images based on Windows Server Core.</span></span>

<span data-ttu-id="2af24-109">以下是有关为何要选择 .NET 5 的详尽说明。</span><span class="sxs-lookup"><span data-stu-id="2af24-109">The following is a more detailed explanation of why to choose .NET 5.</span></span>

## <a name="developing-and-deploying-cross-platform"></a><span data-ttu-id="2af24-110">跨平台开发和部署</span><span class="sxs-lookup"><span data-stu-id="2af24-110">Developing and deploying cross platform</span></span>

<span data-ttu-id="2af24-111">显然，如果目标是获得可在 Docker 支持的多个平台（Linux 和 Windows）上运行的应用程序（Web 应用或服务），正确的选择是 .NET 5，因为 .NET Framework 仅支持 Windows。</span><span class="sxs-lookup"><span data-stu-id="2af24-111">Clearly, if your goal is to have an application (web app or service) that can run on multiple platforms supported by Docker (Linux and Windows), the right choice is .NET 5, because .NET Framework only supports Windows.</span></span>

<span data-ttu-id="2af24-112">.NET 5 还支持将 macOS 用作开发平台。</span><span class="sxs-lookup"><span data-stu-id="2af24-112">.NET 5 also supports macOS as a development platform.</span></span> <span data-ttu-id="2af24-113">但如果要将容器部署到 Docker 主机，该主机必须（当前）基于 Linux 或 Windows。</span><span class="sxs-lookup"><span data-stu-id="2af24-113">However, when you deploy containers to a Docker host, that host must (currently) be based on Linux or Windows.</span></span> <span data-ttu-id="2af24-114">例如，在开发环境中，可使用 Mac 上运行的 Linux VM。</span><span class="sxs-lookup"><span data-stu-id="2af24-114">For example, in a development environment, you could use a Linux VM running on a Mac.</span></span>

<span data-ttu-id="2af24-115">[Visual Studio](https://www.visualstudio.com/vs/) 提供用于 Windows 的集成开发环境 (IDE) 并支持 Docker 开发。</span><span class="sxs-lookup"><span data-stu-id="2af24-115">[Visual Studio](https://www.visualstudio.com/vs/) provides an integrated development environment (IDE) for Windows and supports Docker development.</span></span>

<span data-ttu-id="2af24-116">[Visual Studio for Mac](https://www.visualstudio.com/vs/visual-studio-mac/) 是一个 IDE，由 Xamarin Studio 演变而来，在 macOS 上运行并支持基于 Docker 的应用程序环境。</span><span class="sxs-lookup"><span data-stu-id="2af24-116">[Visual Studio for Mac](https://www.visualstudio.com/vs/visual-studio-mac/) is an IDE, evolution of Xamarin Studio, that runs on macOS and supports Docker-based application development.</span></span> <span data-ttu-id="2af24-117">对于使用 Mac 计算机工作而又希望使用功能强大的 IDE 的开发者而言，此工具应当是理想之选。</span><span class="sxs-lookup"><span data-stu-id="2af24-117">This tool should be the preferred choice for developers working in Mac machines who also want to use a powerful IDE.</span></span>

<span data-ttu-id="2af24-118">还可在 macOS、Linux 和 Windows 中使用 [Visual Studio Code](https://code.visualstudio.com/)。</span><span class="sxs-lookup"><span data-stu-id="2af24-118">You can also use [Visual Studio Code](https://code.visualstudio.com/) on macOS, Linux, and Windows.</span></span> <span data-ttu-id="2af24-119">Visual Studio 5 完全支持 .NET Core，包括 IntelliSense 和调试。</span><span class="sxs-lookup"><span data-stu-id="2af24-119">Visual Studio Code fully supports .NET 5, including IntelliSense and debugging.</span></span> <span data-ttu-id="2af24-120">由于 VS Code 是轻量型编辑器，可以使用它，同时结合使用 Docker CLI 和 [.NET CLI](../../../core/tools/index.md) 在计算机上开发容器化应用。</span><span class="sxs-lookup"><span data-stu-id="2af24-120">Because VS Code is a lightweight editor, you can use it to develop containerized apps on the machine in conjunction with the Docker CLI and the [.NET CLI](../../../core/tools/index.md).</span></span> <span data-ttu-id="2af24-121">还可以使用大多数第三方编辑器（如 Sublime、Emacs、VI）和同时提供 IntelliSense 支持的开源 OmniSharp 项目来面向 .NET 5。</span><span class="sxs-lookup"><span data-stu-id="2af24-121">You can also target .NET 5 with most third-party editors like Sublime, Emacs, vi, and the open-source OmniSharp project, which also provides IntelliSense support.</span></span>

<span data-ttu-id="2af24-122">除了 IDE 和编辑器，还可为所有支持的平台使用 [.NET CLI](../../../core/tools/index.md)。</span><span class="sxs-lookup"><span data-stu-id="2af24-122">In addition to the IDEs and editors, you can use the [.NET CLI](../../../core/tools/index.md) for all supported platforms.</span></span>

## <a name="using-containers-for-new-green-field-projects"></a><span data-ttu-id="2af24-123">为新（“绿地”）项目使用容器</span><span class="sxs-lookup"><span data-stu-id="2af24-123">Using containers for new ("green-field") projects</span></span>

<span data-ttu-id="2af24-124">虽然容器通常与微服务体系结构结合使用，但是也可用于对遵循任何体系结构模式的 Web 应用或服务进行容器化。</span><span class="sxs-lookup"><span data-stu-id="2af24-124">Containers are commonly used in conjunction with a microservices architecture, although they can also be used to containerize web apps or services that follow any architectural pattern.</span></span> <span data-ttu-id="2af24-125">虽然能够将 .NET Framework 用于 Windows 容器，但 .NET 5 的模块化和轻型特点使之成为容器和微服务体系结构的最佳选择。</span><span class="sxs-lookup"><span data-stu-id="2af24-125">You can use .NET Framework on Windows Containers, but the modularity and lightweight nature of .NET 5 makes it perfect for containers and microservices architectures.</span></span> <span data-ttu-id="2af24-126">在创建和部署容器时，使用 .NET Core 时容器的映像大小要远小于使用 .NET Framework 时的大小。</span><span class="sxs-lookup"><span data-stu-id="2af24-126">When you create and deploy a container, its image is far smaller with .NET Core than with .NET Framework.</span></span>

## <a name="create-and-deploy-microservices-on-containers"></a><span data-ttu-id="2af24-127">在容器上创建和部署微服务</span><span class="sxs-lookup"><span data-stu-id="2af24-127">Create and deploy microservices on containers</span></span>

<span data-ttu-id="2af24-128">可使用传统 .NET Framework，通过使用普通进程构建基于微服务的应用程序（不含容器）。</span><span class="sxs-lookup"><span data-stu-id="2af24-128">You could use the traditional .NET Framework for building microservices-based applications (without containers) by using plain processes.</span></span> <span data-ttu-id="2af24-129">通过这种方式，由于已安装 .NET Framework 并在进程之间共享，进程变得轻量，从而可快速启动。</span><span class="sxs-lookup"><span data-stu-id="2af24-129">That way, because the .NET Framework is already installed and shared across processes, processes are light and fast to start.</span></span> <span data-ttu-id="2af24-130">但如果使用容器，传统 .NET Framework 的映像便也基于 Windows Server Core，这样的话，它对于“容器上微服务”方法，就显得体量过于庞大。</span><span class="sxs-lookup"><span data-stu-id="2af24-130">However, if you are using containers, the image for the traditional .NET Framework is also based on Windows Server Core and that makes it too heavy for a microservices-on-containers approach.</span></span> <span data-ttu-id="2af24-131">但是，团队也一直在寻找机会来改善 .NET Framework 用户体验。</span><span class="sxs-lookup"><span data-stu-id="2af24-131">However, teams have been looking for opportunities to improve the experience for .NET Framework users as well.</span></span> <span data-ttu-id="2af24-132">最近，[Windows Server Core 容器映像的大小已减小 40% 以上](https://devblogs.microsoft.com/dotnet/we-made-windows-server-core-container-images-40-smaller)。</span><span class="sxs-lookup"><span data-stu-id="2af24-132">Recently, size of the [Windows Server Core container images have been reduced to >40% smaller](https://devblogs.microsoft.com/dotnet/we-made-windows-server-core-container-images-40-smaller).</span></span>

<span data-ttu-id="2af24-133">另一方面，如果要使用基于容器的面向微服务的系统，.NET 5 是最佳选择，因为它体量轻。</span><span class="sxs-lookup"><span data-stu-id="2af24-133">On the other hand, .NET 5 is the best candidate if you're embracing a microservices-oriented system that is based on containers, because .NET 5 is lightweight.</span></span> <span data-ttu-id="2af24-134">此外，与之相关的容器映像，无论是 Linux 还是 Windows Nano Server，都精简而小巧，让容器变得轻量，从而能够快速启动。</span><span class="sxs-lookup"><span data-stu-id="2af24-134">In addition, its related container images, for either Linux or Windows Nano Server, are lean and small, making containers light and fast to start.</span></span>

<span data-ttu-id="2af24-135">微服务意味着尽可能得小：可轻松访问、占用空间小、小型的界定上下文（检查 DDD、[域驱动设计](https://en.wikipedia.org/wiki/Domain-driven_design)）、较少的关注度、能够快速启动和停止。</span><span class="sxs-lookup"><span data-stu-id="2af24-135">A microservice is meant to be as small as possible: to be light when spinning up, to have a small footprint, to have a small Bounded Context (check DDD, [Domain-Driven Design](https://en.wikipedia.org/wiki/Domain-driven_design)), to represent a small area of concerns, and to be able to start and stop fast.</span></span> <span data-ttu-id="2af24-136">为满足这些要求，需要使用可快速实例化的轻量型容器映像，例如 .NET 5 容器映像。</span><span class="sxs-lookup"><span data-stu-id="2af24-136">For those requirements, you will want to use small and fast-to-instantiate container images like the .NET 5 container image.</span></span>

<span data-ttu-id="2af24-137">微服务体系结构还允许跨服务边界，组合使用技术。</span><span class="sxs-lookup"><span data-stu-id="2af24-137">A microservices architecture also allows you to mix technologies across a service boundary.</span></span> <span data-ttu-id="2af24-138">对于与其他微服务或使用 Node.js、Python、Java、GoLang 或其他技术开发的服务结合使用的新微服务，此方法可以使其逐步迁移到 .NET 5。</span><span class="sxs-lookup"><span data-stu-id="2af24-138">This approach enables a gradual migration to .NET 5 for new microservices that work in conjunction with other microservices or with services developed with Node.js, Python, Java, GoLang, or other technologies.</span></span>

## <a name="deploying-high-density-in-scalable-systems"></a><span data-ttu-id="2af24-139">在可缩放的系统中部署高密度</span><span class="sxs-lookup"><span data-stu-id="2af24-139">Deploying high density in scalable systems</span></span>

<span data-ttu-id="2af24-140">如果基于容器的系统需要实现最佳密度、粒度和性能，.NET 和 ASP.NET Core 是最佳选择。</span><span class="sxs-lookup"><span data-stu-id="2af24-140">When your container-based system needs the best possible density, granularity, and performance, .NET and ASP.NET Core are your best options.</span></span> <span data-ttu-id="2af24-141">ASP.NET Core 的运行速度比传统 .NET Framework 中的 ASP.NET 高出 10 倍，领先于其他用于微服务的受欢迎行业技术（例如 Java servlets、Go 和 Node.js）。</span><span class="sxs-lookup"><span data-stu-id="2af24-141">ASP.NET Core is up to 10 times faster than ASP.NET in the traditional .NET Framework, and it leads other popular industry technologies for microservices, such as Java servlets, Go, and Node.js.</span></span>

<span data-ttu-id="2af24-142">此方法特别适用于微服务体系结构，在该体系结构中，可以运行数百个微服务（容器）。</span><span class="sxs-lookup"><span data-stu-id="2af24-142">This approach is especially relevant for microservices architectures, where you could have hundreds of microservices (containers) running.</span></span> <span data-ttu-id="2af24-143">在 Linux 或 Windows Nano 上使用 ASP.NET Core 映像（基于 .NET 运行时），运行系统时所需的服务器或 VM 数量要少得多，最终可以节省基础结构和托管的费用。</span><span class="sxs-lookup"><span data-stu-id="2af24-143">With ASP.NET Core images (based on the .NET runtime) on Linux or Windows Nano, you can run your system with a much lower number of servers or VMs, ultimately saving costs in infrastructure and hosting.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2af24-144">[上一页](general-guidance.md)
>[下一页](net-framework-container-scenarios.md)</span><span class="sxs-lookup"><span data-stu-id="2af24-144">[Previous](general-guidance.md)
[Next](net-framework-container-scenarios.md)</span></span>

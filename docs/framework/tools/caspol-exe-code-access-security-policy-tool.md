---
title: Caspol.exe（代码访问安全策略工具）
description: 查看 Caspol.exe，即代码访问安全 (CAS) 策略工具。 此工具可让用户和管理员修改不同策略级别的安全策略。
ms.date: 03/30/2017
helpviewer_keywords:
- permission sets, modifying security policy
- security policy [.NET Framework], Code Access Security Policy tool
- enterprise security policy
- referencing code groups and permission sets
- user security policy
- Caspol.exe
- Code Access Security Policy tool
- code groups, modifying security policy
- application development [.NET Framework], security
- machine security policy
- security policy [.NET Framework], modifying
- manually editing security configuration files
ms.assetid: d2bf6123-7b0c-4e60-87ad-a39a1c3eb2e0
ms.openlocfilehash: d26443d07dd76d8d18e0d21112d1e40de5b83c83
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2021
ms.locfileid: "102258269"
---
# <a name="caspolexe-code-access-security-policy-tool"></a><span data-ttu-id="4e4fa-104">Caspol.exe（代码访问安全策略工具）</span><span class="sxs-lookup"><span data-stu-id="4e4fa-104">Caspol.exe (Code Access Security Policy Tool)</span></span>

<span data-ttu-id="4e4fa-105">代码访问安全性 (CAS) 策略工具 (Caspol.exe) 使用户和管理员可修改计算机策略级别、用户策略级别和企业策略级别的安全策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-105">The Code Access Security (CAS) Policy tool (Caspol.exe) enables users and administrators to modify security policy for the machine policy level, the user policy level, and the enterprise policy level.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="4e4fa-106">从 .NET Framework 4 开始，Caspol.exe 不再影响 CAS 策略，除非将 [\<legacyCasPolicy> 元素](../configure-apps/file-schema/runtime/netfx40-legacysecuritypolicy-element.md)设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-106">Starting with the .NET Framework 4, Caspol.exe does not affect CAS policy unless the [\<legacyCasPolicy> element](../configure-apps/file-schema/runtime/netfx40-legacysecuritypolicy-element.md) is set to `true`.</span></span> <span data-ttu-id="4e4fa-107">CasPol.exe 显示或修改的任何设置将只会影响选择使用 CAS 策略的应用程序。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-107">Any settings shown or modified by CasPol.exe will only affect applications that opt into using CAS policy.</span></span> <span data-ttu-id="4e4fa-108">有关详细信息，请参阅[安全更改](/previous-versions/dotnet/framework/security/security-changes)。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-108">For more information, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4e4fa-109">64 位计算机同时包括 64 位和 32 位版本的安全策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-109">64-bit computers include both 64-bit and 32-bit versions of security policy.</span></span> <span data-ttu-id="4e4fa-110">若要确保你的策略更改同时应用于 32 位和 64 位应用程序，请同时运行 Caspol.exe 的 32 位和 64 位版本。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-110">To ensure that your policy changes apply to both 32-bit and 64-bit applications, run both the 32-bit and 64-bit versions of Caspol.exe.</span></span>  
  
 <span data-ttu-id="4e4fa-111">代码访问安全策略工具自动随 .NET Framework 和 Visual Studio 一起安装。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-111">The Code Access Security Policy tool is automatically installed with .NET Framework and with Visual Studio.</span></span> <span data-ttu-id="4e4fa-112">可以在 32 位系统的 %windir%\Microsoft.NET\Framework\\*version* 中或是 64 位系统的 %windir%\Microsoft.NET\Framework64\\*version* 中找到 Caspol.exe。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-112">You can find Caspol.exe in %windir%\Microsoft.NET\Framework\\*version* on 32-bit systems or %windir%\Microsoft.NET\Framework64\\*version* on 64-bit systems.</span></span> <span data-ttu-id="4e4fa-113">（例如，对于 64 位系统上的 .NET Framework 4，相应的位置是 %windir%\Microsoft.NET\Framework64\v4.030319\caspol.exe。）如果计算机并行运行多个 .NET Framework 版本，则可能会安装该工具的多个版本。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-113">(For example, the location is %windir%\Microsoft.NET\Framework64\v4.030319\caspol.exe for .NET Framework 4 on a 64-bit system.) Multiple versions of the tool might be installed if your computer is running multiple versions of .NET Framework side by side.</span></span> <span data-ttu-id="4e4fa-114">可以从安装目录运行该工具。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-114">You can run the tool from the installation directory.</span></span> <span data-ttu-id="4e4fa-115">但是，建议使用[开发人员命令行 shell](/visualstudio/ide/reference/command-prompt-powershell)，这样就不需要导航到安装文件夹。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-115">However, we recommend that you use a [command-line shell for developers](/visualstudio/ide/reference/command-prompt-powershell), which does not require you to navigate to the installation folder.</span></span>  
  
 <span data-ttu-id="4e4fa-116">在命令提示符处，键入以下内容：</span><span class="sxs-lookup"><span data-stu-id="4e4fa-116">At the command prompt, type the following:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="4e4fa-117">语法</span><span class="sxs-lookup"><span data-stu-id="4e4fa-117">Syntax</span></span>  
  
```console
caspol [options]  
```  
  
## <a name="parameters"></a><span data-ttu-id="4e4fa-118">参数</span><span class="sxs-lookup"><span data-stu-id="4e4fa-118">Parameters</span></span>  
  
|<span data-ttu-id="4e4fa-119">选项</span><span class="sxs-lookup"><span data-stu-id="4e4fa-119">Option</span></span>|<span data-ttu-id="4e4fa-120">描述</span><span class="sxs-lookup"><span data-stu-id="4e4fa-120">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="4e4fa-121">-addfulltrust assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-121">**-addfulltrust** *assembly_file*</span></span><br /><br /> <span data-ttu-id="4e4fa-122">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-122">or</span></span><br /><br /> <span data-ttu-id="4e4fa-123">-af assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-123">**-af** *assembly_file*</span></span>|<span data-ttu-id="4e4fa-124">将实现自定义安全对象（如自定义权限或自定义成员资格条件）的程序集添加到特定策略级别的完全信任程序集列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-124">Adds an assembly that implements a custom security object (such as a custom permission or a custom membership condition) to the full trust assembly list for a specific policy level.</span></span> <span data-ttu-id="4e4fa-125">*assembly_file* 参数指定要添加的程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-125">The *assembly_file* argument specifies the assembly to add.</span></span> <span data-ttu-id="4e4fa-126">此文件必须用[强名称](../../standard/assembly/strong-named.md)签名。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-126">This file must be signed with a [strong name](../../standard/assembly/strong-named.md).</span></span> <span data-ttu-id="4e4fa-127">可以通过[强名称工具 (Sn.exe)](sn-exe-strong-name-tool.md) 使用强名称对程序集进行签名。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-127">You can sign an assembly with a strong name using the [Strong Name Tool (Sn.exe)](sn-exe-strong-name-tool.md).</span></span><br /><br /> <span data-ttu-id="4e4fa-128">每当将包含自定义权限的权限集添加到策略时，必须将实现该自定义权限的程序集添加到该策略级别的完全信任列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-128">Whenever a permission set containing a custom permission is added to policy, the assembly implementing the custom permission must be added to the full trust list for that policy level.</span></span> <span data-ttu-id="4e4fa-129">对于实现用于安全策略（如计算机策略）的自定义安全对象（如自定义代码组或成员资格条件）的程序集，应该总是将其添加到完全信任程序集列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-129">Assemblies that implement custom security objects (such as custom code groups or membership conditions) used in a security policy (such as the machine policy) should always be added to the full trust assembly list.</span></span> <span data-ttu-id="4e4fa-130">**注意：** 如果实现自定义安全对象的程序集引用了其他程序集，则必须首先将被引用的程序集添加到完全信任程序集列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-130">**Caution:**  If the assembly implementing the custom security object references other assemblies, you must first add the referenced assemblies to the full trust assembly list.</span></span> <span data-ttu-id="4e4fa-131">使用 Visual Basic、C++ 和 JScript 创建的自定义安全对象分别引用 Microsoft.VisualBasic.dll、Microsoft.VisualC.dll 和 Microsoft.JScript.dll。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-131">Custom security objects created using Visual Basic, C++, and JScript reference either Microsoft.VisualBasic.dll, Microsoft.VisualC.dll, or Microsoft.JScript.dll, respectively.</span></span> <span data-ttu-id="4e4fa-132">默认情况下，完全信任程序集列表中不包含这些程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-132">These assemblies are not in the full trust assembly list by default.</span></span> <span data-ttu-id="4e4fa-133">在添加自定义安全对象之前，必须将相应的程序集添加到完全信任列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-133">You must add the appropriate assembly to the full trust list before you add a custom security object.</span></span> <span data-ttu-id="4e4fa-134">如果不这样做，将会破坏安全系统，导致所有程序集都无法加载。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-134">Failure to do so will break the security system, causing all assemblies to fail to load.</span></span> <span data-ttu-id="4e4fa-135">在这种情况中，Caspol.exe **-all -reset** 选项不会修复安全系统。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-135">In this situation, the Caspol.exe **-all -reset** option will not repair security.</span></span> <span data-ttu-id="4e4fa-136">若要修复安全系统，必须手动编辑安全文件，移除自定义安全对象。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-136">To repair security, you must manually edit the security files to remove the custom security object.</span></span>|  
|<span data-ttu-id="4e4fa-137">**-addgroup** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-137">**-addgroup** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span></span><br /><br /> <span data-ttu-id="4e4fa-138">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-138">or</span></span><br /><br /> <span data-ttu-id="4e4fa-139">**-ag** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-139">**-ag** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span></span>|<span data-ttu-id="4e4fa-140">将新的代码组添加到代码组层次结构中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-140">Adds a new code group to the code group hierarchy.</span></span> <span data-ttu-id="4e4fa-141">可以指定 *parent_label* 或 *parent_name*。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-141">You can specify either the *parent_label* or *parent_name*.</span></span> <span data-ttu-id="4e4fa-142">*parent_label* 参数指定代码组的标签（如 1.</span><span class="sxs-lookup"><span data-stu-id="4e4fa-142">The *parent_label* argument specifies the label (such as 1.</span></span> <span data-ttu-id="4e4fa-143">或 1.1.），该代码组是要添加的代码组的父级。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-143">or 1.1.) of the code group that is the parent of the code group being added.</span></span> <span data-ttu-id="4e4fa-144">*parent_name* 参数指定代码组的名称，该代码组是要添加的代码组的父级。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-144">The *parent_name* argument specifies the name of the code group that is the parent of the code group being added.</span></span> <span data-ttu-id="4e4fa-145">因为 *parent_label* 和 *parent_name* 可互换使用，所以 Caspol.exe 必须能够区分它们。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-145">Because *parent_label* and *parent_name* can be used interchangeably, Caspol.exe must be able to distinguish between them.</span></span> <span data-ttu-id="4e4fa-146">因此，*parent_name* 不能以数字开头。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-146">Therefore, *parent_name* cannot begin with a number.</span></span> <span data-ttu-id="4e4fa-147">此外，*parent_name* 只能包含 A-Z、0-9 和下划线字符。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-147">Additionally, *parent_name* can only contain A-Z, 0-9 and the underscore character.</span></span><br /><br /> <span data-ttu-id="4e4fa-148">*mship* 参数指定新代码组的成员资格条件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-148">The *mship* argument specifies the membership condition for the new code group.</span></span> <span data-ttu-id="4e4fa-149">有关详细信息，请参见参阅本节后面的 *mship* 参数表。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-149">For more information, see the table of *mship* arguments later in this section.</span></span><br /><br /> <span data-ttu-id="4e4fa-150">*pset_name* 参数是将与新代码组关联的权限集的名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-150">The *pset_name* argument is the name of the permission set that will be associated with the new code group.</span></span> <span data-ttu-id="4e4fa-151">还可以为新代码组设置一个或多个 *flags*。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-151">You can also set one or more *flags* for the new group.</span></span> <span data-ttu-id="4e4fa-152">有关详细信息，请参阅本节后面的 *flags* 参数表。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-152">For more information, see the table of *flags* arguments later in this section.</span></span>|  
|<span data-ttu-id="4e4fa-153">**-addpset** {*psfile* &#124; *psfile* p *set_name*}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-153">**-addpset** {*psfile* &#124; *psfile* p *set_name*}</span></span><br /><br /> <span data-ttu-id="4e4fa-154">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-154">or</span></span><br /><br /> <span data-ttu-id="4e4fa-155">-ap {named_psfile &#124; psfile pset_name}   </span><span class="sxs-lookup"><span data-stu-id="4e4fa-155">**-ap** {*named* _ *psfile* &#124; *psfile* *pset_name*}</span></span>|<span data-ttu-id="4e4fa-156">将新的命名权限集添加到策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-156">Adds a new named permission set to policy.</span></span> <span data-ttu-id="4e4fa-157">权限集必须用 XML 编写并存储在 .xml 文件中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-157">The permission set must be authored in XML and stored in an .xml file.</span></span> <span data-ttu-id="4e4fa-158">如果 XML 文件包含权限集的名称，则只指定该文件 (*psfile*)。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-158">If the XML file contains the name of the permission set, only that file (*psfile*) is specified.</span></span> <span data-ttu-id="4e4fa-159">如果 XML 文件不包含权限集名称，则必须同时指定 XML 文件名 (*psfile*) 和权限集名称 (*pset_name*)。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-159">If the XML file does not contain the permission set name, you must specify both the XML file name (*psfile*) and the permission set name (*pset_name*).</span></span><br /><br /> <span data-ttu-id="4e4fa-160">请注意，权限集中使用的所有权限都必须在全局程序集缓存中包含的程序集中进行定义。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-160">Note that all permissions used in a permission set must be defined in assemblies contained in the global assembly cache.</span></span>|  
|<span data-ttu-id="4e4fa-161">**-a**[**ll**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-161">**-a**[**ll**]</span></span>|<span data-ttu-id="4e4fa-162">指示此选项后面的所有选项都应用于计算机策略、用户策略和企业策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-162">Indicates that all options following this one apply to the machine, user, and enterprise policies.</span></span> <span data-ttu-id="4e4fa-163">**-all** 选项始终引用当前登录的用户的策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-163">The **-all** option always refers to the policy of the currently logged-on user.</span></span> <span data-ttu-id="4e4fa-164">查看 **-customall** 选项，引用当前用户以外的用户的用户策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-164">See the **-customall** option to refer to the user policy of a user other than the current user.</span></span>|  
|<span data-ttu-id="4e4fa-165">**-chggroup** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="4e4fa-165">**-chggroup** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span></span><br /><br /> <span data-ttu-id="4e4fa-166">flags `}`</span><span class="sxs-lookup"><span data-stu-id="4e4fa-166">*flags* `}`</span></span><br /><br /> <span data-ttu-id="4e4fa-167">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-167">or</span></span><br /><br /> <span data-ttu-id="4e4fa-168">**-cg** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="4e4fa-168">**-cg** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span></span><br /><br /> <span data-ttu-id="4e4fa-169">flags `}`</span><span class="sxs-lookup"><span data-stu-id="4e4fa-169">*flags* `}`</span></span>|<span data-ttu-id="4e4fa-170">更改代码组的成员资格条件、权限集或者 **exclusive**、**levelfinal**、**name** 或 **description** 标志的设置。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-170">Changes a code group's membership condition, permission set, or the settings of the **exclusive**, **levelfinal**, **name**, or **description** flags.</span></span> <span data-ttu-id="4e4fa-171">可以指定 *label* 和 *name* 中的任意一个。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-171">You can specify either the *label* or *name*.</span></span> <span data-ttu-id="4e4fa-172">*label* 参数指定代码组的标签（如 1.</span><span class="sxs-lookup"><span data-stu-id="4e4fa-172">The *label* argument specifies the label (such as 1.</span></span> <span data-ttu-id="4e4fa-173">或 1.1.）。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-173">or 1.1.) of the code group.</span></span> <span data-ttu-id="4e4fa-174">*name* 参数指定要更改的代码组的名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-174">The *name* argument specifies the name of the code group to change.</span></span> <span data-ttu-id="4e4fa-175">因为 *label* 和 *name* 可互换使用，所以 Caspol.exe 必须能够区分它们。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-175">Because *label* and *name* can be used interchangeably, Caspol.exe must be able to distinguish between them.</span></span> <span data-ttu-id="4e4fa-176">因此，*name* 不能以数字开头。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-176">Therefore, *name* cannot begin with a number.</span></span> <span data-ttu-id="4e4fa-177">此外，*name* 只能包含 A-Z、0-9 和下划线字符。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-177">Additionally, *name* can only contain A-Z, 0-9 and the underscore character.</span></span><br /><br /> <span data-ttu-id="4e4fa-178">*pset_name* 参数指定与代码组关联的权限集的名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-178">The *pset_name* argument specifies the name of the permission set to associate with the code group.</span></span> <span data-ttu-id="4e4fa-179">有关 *mship* 和 *flags* 参数的信息，请参见本节后面的表。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-179">See the tables later in this section for information on the *mship* and *flags* arguments.</span></span>|  
|<span data-ttu-id="4e4fa-180">-chgpset  psfile pset_name</span><span class="sxs-lookup"><span data-stu-id="4e4fa-180">**-chgpset**  *psfile pset_name*</span></span><br /><br /> <span data-ttu-id="4e4fa-181">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-181">or</span></span><br /><br /> <span data-ttu-id="4e4fa-182">-cp psfile pset_name</span><span class="sxs-lookup"><span data-stu-id="4e4fa-182">**-cp** *psfile pset_name*</span></span>|<span data-ttu-id="4e4fa-183">更改命名权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-183">Changes a named permission set.</span></span> <span data-ttu-id="4e4fa-184">*psfile* 参数为权限集提供新的定义；它是 XML 格式的序列化权限集文件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-184">The *psfile* argument supplies the new definition for the permission set; it is a serialized permission set file in XML format.</span></span> <span data-ttu-id="4e4fa-185">*pset_name* 参数指定要更改的权限集的名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-185">The *pset_name* argument specifies the name of the permission set you want to change.</span></span>|  
|<span data-ttu-id="4e4fa-186">-customall  path</span><span class="sxs-lookup"><span data-stu-id="4e4fa-186">**-customall**  *path*</span></span><br /><br /> <span data-ttu-id="4e4fa-187">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-187">or</span></span><br /><br /> <span data-ttu-id="4e4fa-188">-ca  path</span><span class="sxs-lookup"><span data-stu-id="4e4fa-188">**-ca**  *path*</span></span>|<span data-ttu-id="4e4fa-189">指示此选项后面的所有选项都应用于计算机策略、企业策略和指定的自定义用户策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-189">Indicates that all options following this one apply to the machine, enterprise, and the specified custom user policies.</span></span> <span data-ttu-id="4e4fa-190">必须用 *path* 参数指定自定义用户的安全配置文件的位置。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-190">You must specify the location of the custom user's security configuration file with the *path* argument.</span></span>|  
|<span data-ttu-id="4e4fa-191">**-cu**[**stomuser**] *path*</span><span class="sxs-lookup"><span data-stu-id="4e4fa-191">**-cu**[**stomuser**] *path*</span></span>|<span data-ttu-id="4e4fa-192">允许管理不属于当前 Caspol.exe 正代表其运行的用户的自定义用户策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-192">Allows the administration of a custom user policy that does not belong to the user on whose behalf Caspol.exe is currently running.</span></span> <span data-ttu-id="4e4fa-193">必须用 *path* 参数指定自定义用户的安全配置文件的位置。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-193">You must specify the location of the custom user's security configuration file with the *path* argument.</span></span>|  
|<span data-ttu-id="4e4fa-194">**-enterprise**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-194">**-enterprise**</span></span><br /><br /> <span data-ttu-id="4e4fa-195">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-195">or</span></span><br /><br /> <span data-ttu-id="4e4fa-196">**-en**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-196">**-en**</span></span>|<span data-ttu-id="4e4fa-197">指示此选项后面的所有选项都应用于企业级策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-197">Indicates that all options following this one apply to the enterprise level policy.</span></span> <span data-ttu-id="4e4fa-198">非企业管理员用户尽管可以查看企业级策略，但没有足够的权限修改它。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-198">Users who are not enterprise administrators do not have sufficient rights to modify the enterprise policy, although they can view it.</span></span> <span data-ttu-id="4e4fa-199">在非企业方案中，默认情况下此策略不干预计算机策略和用户策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-199">In nonenterprise scenarios, this policy, by default, does not interfere with machine and user policy.</span></span>|  
|<span data-ttu-id="4e4fa-200">**-e**[**xecution**] {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-200">**-e**[**xecution**] {**on** &#124; **off**}</span></span>|<span data-ttu-id="4e4fa-201">打开或关闭在代码开始执行前检查运行权限的机制。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-201">Turns on or off the mechanism that checks for the permission to run before code starts to execute.</span></span> <span data-ttu-id="4e4fa-202">**注意：** 在 .NET Framework 4 及更高版本中，此开关已删除。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-202">**Note:**  This switch is removed in the .NET Framework 4 and later versions.</span></span> <span data-ttu-id="4e4fa-203">有关详细信息，请参阅[安全更改](/previous-versions/dotnet/framework/security/security-changes)。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-203">For more information, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span>|  
|<span data-ttu-id="4e4fa-204">**-f**[**orce**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-204">**-f**[**orce**]</span></span>|<span data-ttu-id="4e4fa-205">取消此工具的自销毁测试并按照用户的指定更改策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-205">Suppresses the tool's self-destruct test and changes the policy as specified by the user.</span></span> <span data-ttu-id="4e4fa-206">通常，Caspol.exe 会检查任何策略的更改是否会妨碍 Caspol.exe 本身的正常运行；如果是，则 Caspol.exe 不会保存策略更改，并会输出错误消息。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-206">Normally, Caspol.exe checks whether any policy changes would prevent Caspol.exe itself from running properly; if so, Caspol.exe does not save the policy change and prints an error message.</span></span> <span data-ttu-id="4e4fa-207">若即使在策略更改会妨碍 Caspol.exe 本身运行的情况下也要强制 Caspol.exe 更改策略，则使用 **–force** 选项。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-207">To force Caspol.exe to change policy even if this prevents Caspol.exe itself from running, use the **–force** option.</span></span>|  
|<span data-ttu-id="4e4fa-208">**-h**[**elp**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-208">**-h**[**elp**]</span></span>|<span data-ttu-id="4e4fa-209">显示 Caspol.exe 的命令语法和选项。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-209">Displays command syntax and options for Caspol.exe.</span></span>|  
|<span data-ttu-id="4e4fa-210">**-l**[**ist**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-210">**-l**[**ist**]</span></span>|<span data-ttu-id="4e4fa-211">列出代码组层次结构及指定的计算机、用户、企业或所有策略级别的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-211">Lists the code group hierarchy and the permission sets for the specified machine, user, enterprise, or all policy levels.</span></span> <span data-ttu-id="4e4fa-212">Caspol.exe 首先显示代码组的标签，如果名称不是 null 的话，后面接着显示名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-212">Caspol.exe displays the code group's label first, followed by the name, if it is not null.</span></span>|  
|<span data-ttu-id="4e4fa-213">**-listdescription**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-213">**-listdescription**</span></span><br /><br /> <span data-ttu-id="4e4fa-214">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-214">or</span></span><br /><br /> <span data-ttu-id="4e4fa-215">**-ld**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-215">**-ld**</span></span>|<span data-ttu-id="4e4fa-216">列出指定策略级别的所有代码组描述。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-216">Lists all code group descriptions for the specified policy level.</span></span>|  
|<span data-ttu-id="4e4fa-217">**-listfulltrust**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-217">**-listfulltrust**</span></span><br /><br /> <span data-ttu-id="4e4fa-218">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-218">or</span></span><br /><br /> <span data-ttu-id="4e4fa-219">**-lf**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-219">**-lf**</span></span>|<span data-ttu-id="4e4fa-220">列出指定策略级别的完全信任程序集列表的内容。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-220">Lists the contents of the full trust assembly list for the specified policy level.</span></span>|  
|<span data-ttu-id="4e4fa-221">**-listgroups**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-221">**-listgroups**</span></span><br /><br /> <span data-ttu-id="4e4fa-222">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-222">or</span></span><br /><br /> <span data-ttu-id="4e4fa-223">**-lg**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-223">**-lg**</span></span>|<span data-ttu-id="4e4fa-224">显示指定策略级别或全部策略级别的代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-224">Displays the code groups of the specified policy level or all policy levels.</span></span> <span data-ttu-id="4e4fa-225">Caspol.exe 首先显示代码组的标签，如果名称不是 null 的话，后面接着显示名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-225">Caspol.exe displays the code group's label first, followed by the name, if it is not null.</span></span>|  
|<span data-ttu-id="4e4fa-226">**-listpset** or **-lp**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-226">**-listpset** or **-lp**</span></span>|<span data-ttu-id="4e4fa-227">显示指定策略级别或全部策略级别的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-227">Displays the permission sets for the specified policy level or all policy levels.</span></span>|  
|<span data-ttu-id="4e4fa-228">**-m**[**achine**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-228">**-m**[**achine**]</span></span>|<span data-ttu-id="4e4fa-229">指示此选项后面的所有选项都应用于计算机级别策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-229">Indicates that all options following this one apply to the machine level policy.</span></span> <span data-ttu-id="4e4fa-230">非管理员用户尽管可以查看计算机策略，但没有足够的权限修改它。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-230">Users who are not administrators do not have sufficient rights to modify the machine policy, although they can view it.</span></span> <span data-ttu-id="4e4fa-231">对于管理员来说， **-machine** 是默认选项。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-231">For administrators, **-machine** is the default.</span></span>|  
|<span data-ttu-id="4e4fa-232">**-polchgprompt** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-232">**-polchgprompt** {**on** &#124; **off**}</span></span><br /><br /> <span data-ttu-id="4e4fa-233">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-233">or</span></span><br /><br /> <span data-ttu-id="4e4fa-234">**-pp** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-234">**-pp** {**on** &#124; **off**}</span></span>|<span data-ttu-id="4e4fa-235">启用或禁用每当 Caspol.exe 使用可能会导致策略更改的选项运行时所显示的提示。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-235">Enables or disables the prompt that is displayed whenever Caspol.exe is run using an option that would cause policy changes.</span></span>|  
|<span data-ttu-id="4e4fa-236">**-quiet**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-236">**-quiet**</span></span><br /><br /> <span data-ttu-id="4e4fa-237">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-237">or</span></span><br /><br /> <span data-ttu-id="4e4fa-238">**-q**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-238">**-q**</span></span>|<span data-ttu-id="4e4fa-239">暂时禁用通常会为导致策略更改的选项显示的提示。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-239">Temporarily disables the prompt that is normally displayed for an option that causes policy changes.</span></span> <span data-ttu-id="4e4fa-240">全局更改提示设置不会发生更改。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-240">The global change prompt setting does not change.</span></span> <span data-ttu-id="4e4fa-241">应逐个命令地使用此选项以避免对所有的 Caspol.exe 命令禁用提示。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-241">Use the option only on a single command basis to avoid disabling the prompt for all Caspol.exe commands.</span></span>|  
|<span data-ttu-id="4e4fa-242">**-r**[**ecover**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-242">**-r**[**ecover**]</span></span>|<span data-ttu-id="4e4fa-243">从备份文件恢复策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-243">Recovers policy from a backup file.</span></span> <span data-ttu-id="4e4fa-244">每当策略更改时，Caspol.exe 会将旧的策略存储在备份文件中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-244">Whenever a policy change is made, Caspol.exe stores the old policy in a backup file.</span></span>|  
|<span data-ttu-id="4e4fa-245">-remfulltrust assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-245">**-remfulltrust** *assembly_file*</span></span><br /><br /> <span data-ttu-id="4e4fa-246">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-246">or</span></span><br /><br /> <span data-ttu-id="4e4fa-247">-rf  assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-247">**-rf**  *assembly_file*</span></span>|<span data-ttu-id="4e4fa-248">从策略级别的完全信任列表中移除程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-248">Removes an assembly from the full trust list of a policy level.</span></span> <span data-ttu-id="4e4fa-249">如果包含自定义权限的权限集不再由策略使用，则应该执行此操作。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-249">This operation should be performed if a permission set that contains a custom permission is no longer used by policy.</span></span> <span data-ttu-id="4e4fa-250">但是，仅当程序集不再实现任何其他仍在使用的自定义权限时，才应从完全信任列表中移除实现自定义权限的程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-250">However, you should remove an assembly that implements a custom permission from the full trust list only if the assembly does not implement any other custom permissions that are still being used.</span></span> <span data-ttu-id="4e4fa-251">当从列表中移除程序集时，应同时移除它依赖的任何其他程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-251">When you remove an assembly from the list, you should also remove any other assemblies that it depends on.</span></span>|  
|<span data-ttu-id="4e4fa-252">**-remgroup** {*label &#124;name*}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-252">**-remgroup** {*label &#124;name*}</span></span><br /><br /> <span data-ttu-id="4e4fa-253">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-253">or</span></span><br /><br /> <span data-ttu-id="4e4fa-254">**-rg** {l *abel &#124; name*}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-254">**-rg** {l *abel &#124; name*}</span></span>|<span data-ttu-id="4e4fa-255">移除由本身的标签或名称指定的代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-255">Removes the code group specified by either its label or name.</span></span> <span data-ttu-id="4e4fa-256">如果指定的代码组有子代码组，则 Caspol.exe 还将移除所有子代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-256">If the specified code group has child code groups, Caspol.exe also removes all the child code groups.</span></span>|  
|<span data-ttu-id="4e4fa-257">-rempset pset_name</span><span class="sxs-lookup"><span data-stu-id="4e4fa-257">**-rempset** *pset_name*</span></span><br /><br /> <span data-ttu-id="4e4fa-258">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-258">or</span></span><br /><br /> <span data-ttu-id="4e4fa-259">-rp pset_name</span><span class="sxs-lookup"><span data-stu-id="4e4fa-259">**-rp** *pset_name*</span></span>|<span data-ttu-id="4e4fa-260">从策略中移除指定的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-260">Removes the specified permission set from policy.</span></span> <span data-ttu-id="4e4fa-261">*pset_name* 参数指示要移除的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-261">The *pset_name* argument indicates which permission set to remove.</span></span> <span data-ttu-id="4e4fa-262">仅当权限集不与任何代码组关联时，Caspol.exe 才会将其移除。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-262">Caspol.exe removes the permission set only if it is not associated with any code group.</span></span> <span data-ttu-id="4e4fa-263">无法移除默认（内置）权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-263">The default (built-in) permission sets cannot be removed.</span></span>|  
|<span data-ttu-id="4e4fa-264">**-reset**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-264">**-reset**</span></span><br /><br /> <span data-ttu-id="4e4fa-265">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-265">or</span></span><br /><br /> <span data-ttu-id="4e4fa-266">**-rs**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-266">**-rs**</span></span>|<span data-ttu-id="4e4fa-267">使策略返回到默认状态并将其保存到磁盘上。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-267">Returns policy to its default state and persists it to disk.</span></span> <span data-ttu-id="4e4fa-268">每当已更改的策略似乎无法修复并且你想使用安装默认值重新开始时，这非常有用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-268">This is useful whenever a changed policy seems to be beyond repair and you want to start over with the installation defaults.</span></span> <span data-ttu-id="4e4fa-269">当要使用默认策略作为修改特定安全配置文件的起点时，重置也非常方便。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-269">Resetting can also be convenient when you want to use the default policy as a starting point for modifications to specific security configuration files.</span></span> <span data-ttu-id="4e4fa-270">有关详细信息，请参阅[手动编辑安全配置文件](#cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1)。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-270">For more information, see [Manually Editing the Security Configuration Files](#cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1).</span></span>|  
|<span data-ttu-id="4e4fa-271">**-resetlockdown**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-271">**-resetlockdown**</span></span><br /><br /> <span data-ttu-id="4e4fa-272">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-272">or</span></span><br /><br /> <span data-ttu-id="4e4fa-273">**-rsld**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-273">**-rsld**</span></span>|<span data-ttu-id="4e4fa-274">将策略返回到限制更多的默认状态版本，并将其保存到磁盘；创建以前的计算机策略的备份，并将其保存到名为 `security.config.bac` 的文件中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-274">Returns policy to a more restrictive version of the default state and persists it to disk; creates a backup of the previous machine policy and persists it to a file called `security.config.bac`.</span></span>  <span data-ttu-id="4e4fa-275">锁定的策略类似于默认策略，但锁定的策略不向 `Local Intranet`、`Trusted Sites` 和 `Internet` 区域中的代码以及没有子代码组的对应代码组授予权限。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-275">The locked down policy is similar to the default policy, except that the policy grants no permission to code from the `Local Intranet`, `Trusted Sites`, and `Internet` zones and the corresponding code groups have no child code groups.</span></span>|  
|<span data-ttu-id="4e4fa-276">-resolvegroup assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-276">**-resolvegroup** *assembly_file*</span></span><br /><br /> <span data-ttu-id="4e4fa-277">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-277">or</span></span><br /><br /> <span data-ttu-id="4e4fa-278">-rsg  assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-278">**-rsg**  *assembly_file*</span></span>|<span data-ttu-id="4e4fa-279">显示特定的程序集 (*assembly_file*) 所属的代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-279">Shows the code groups that a specific assembly (*assembly_file*) belongs to.</span></span> <span data-ttu-id="4e4fa-280">默认情况下，此选项显示程序集所属的计算机、用户和企业策略级别。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-280">By default, this option displays the machine, user, and enterprise policy levels to which the assembly belongs.</span></span> <span data-ttu-id="4e4fa-281">若要只查看一个策略级别，请将此选项与 **-machine**、 **-user** 或 **-enterprise** 选项之一一起使用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-281">To view only one policy level, use this option with either the **-machine**, **-user**, or **-enterprise** option.</span></span>|  
|<span data-ttu-id="4e4fa-282">-resolveperm assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-282">**-resolveperm** *assembly_file*</span></span><br /><br /> <span data-ttu-id="4e4fa-283">or</span><span class="sxs-lookup"><span data-stu-id="4e4fa-283">or</span></span><br /><br /> <span data-ttu-id="4e4fa-284">-rsp assembly_file</span><span class="sxs-lookup"><span data-stu-id="4e4fa-284">**-rsp** *assembly_file*</span></span>|<span data-ttu-id="4e4fa-285">显示在允许运行程序集的情况下指定的（或默认的）安全策略级别将会授予程序集的所有权限。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-285">Displays all permissions that the specified (or default) level of security policy would grant the assembly if the assembly were allowed to run.</span></span> <span data-ttu-id="4e4fa-286">*assembly_file* 参数指定程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-286">The *assembly_file* argument specifies the assembly.</span></span> <span data-ttu-id="4e4fa-287">如果指定 **-all** 选项，则 Caspol.exe 将基于用户策略、计算机策略和企业策略计算程序集的权限；否则，应用默认的行为规则。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-287">If you specify the **-all** option, Caspol.exe calculates the permissions for the assembly based on user, machine, and enterprise policy; otherwise, default behavior rules apply.</span></span>|  
|<span data-ttu-id="4e4fa-288">**-s**[**ecurity**] {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-288">**-s**[**ecurity**] {**on** &#124; **off**}</span></span>|<span data-ttu-id="4e4fa-289">打开或关闭代码访问安全性。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-289">Turns code access security on or off.</span></span> <span data-ttu-id="4e4fa-290">指定 **-s off** 选项不会禁用基于角色的安全性。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-290">Specifying the **-s off** option does not disable role-based security.</span></span> <span data-ttu-id="4e4fa-291">**注意：** 在 .NET Framework 4 及更高版本中，此开关已删除。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-291">**Note:**  This switch is removed in the .NET Framework 4 and later versions.</span></span> <span data-ttu-id="4e4fa-292">有关详细信息，请参阅[安全更改](/previous-versions/dotnet/framework/security/security-changes)。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-292">For more information, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span> <span data-ttu-id="4e4fa-293">注意：当禁用代码访问安全性时，所有代码访问要求都会成功。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-293">**Caution:**  When code access security is disabled, all code access demands succeed.</span></span> <span data-ttu-id="4e4fa-294">禁用代码访问安全性会使系统容易受到恶意代码（如病毒和蠕虫）的攻击。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-294">Disabling code access security makes the system vulnerable to attacks by malicious code such as viruses and worms.</span></span> <span data-ttu-id="4e4fa-295">关闭安全性会在某些方面提高性能，但应该只有在已采取其他安全性措施以确保整个系统安全性不受破坏时才可以使用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-295">Turning off security gains some extra performance but should only be done when other security measures have been taken to help make sure overall system security is not breached.</span></span> <span data-ttu-id="4e4fa-296">其他的安全防范措施包括与公共网络断开连接、从物理上保证计算机的安全等等。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-296">Examples of other security precautions include disconnecting from public networks, physically securing computers, and so on.</span></span>|  
|<span data-ttu-id="4e4fa-297">**-u**[**ser**]</span><span class="sxs-lookup"><span data-stu-id="4e4fa-297">**-u**[**ser**]</span></span>|<span data-ttu-id="4e4fa-298">指示此选项后面的所有选项都应用于 Caspol.exe 正在代表其运行的用户的用户级别策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-298">Indicates that all options following this one apply to the user level policy for the user on whose behalf Caspol.exe is running.</span></span> <span data-ttu-id="4e4fa-299">对于非管理员用户来说， **-user** 是默认选项。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-299">For nonadministrative users, **-user** is the default.</span></span>|  
|<span data-ttu-id="4e4fa-300">**-?**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-300">**-?**</span></span>|<span data-ttu-id="4e4fa-301">显示 Caspol.exe 的命令语法和选项。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-301">Displays command syntax and options for Caspol.exe.</span></span>|  
  
 <span data-ttu-id="4e4fa-302">指定代码组的成员资格条件的 *mship* 参数可以与 **-addgroup** 选项和 **-chggroup** 选项一起使用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-302">The *mship* argument, which specifies the membership condition for a code group, can be used with the **-addgroup** and **-chggroup** options.</span></span> <span data-ttu-id="4e4fa-303">每个 *mship* 参数都作为 .NET Framework 类实现。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-303">Each *mship* argument is implemented as a .NET Framework class.</span></span> <span data-ttu-id="4e4fa-304">若要指定 *mship*，请使用下列参数之一。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-304">To specify *mship,* use one of the following.</span></span>  
  
|<span data-ttu-id="4e4fa-305">参数</span><span class="sxs-lookup"><span data-stu-id="4e4fa-305">Argument</span></span>|<span data-ttu-id="4e4fa-306">描述</span><span class="sxs-lookup"><span data-stu-id="4e4fa-306">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="4e4fa-307">**-allcode**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-307">**-allcode**</span></span>|<span data-ttu-id="4e4fa-308">指定所有代码。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-308">Specifies all code.</span></span> <span data-ttu-id="4e4fa-309">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.AllMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-309">For more information about this membership condition, see <xref:System.Security.Policy.AllMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-310">**-appdir**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-310">**-appdir**</span></span>|<span data-ttu-id="4e4fa-311">指定应用程序目录。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-311">Specifies the application directory.</span></span> <span data-ttu-id="4e4fa-312">如果指定 **–appdir** 作为成员资格条件，则代码的 URL 证据将与代码的应用程序目录证据进行比较。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-312">If you specify **–appdir** as the membership condition, the URL evidence of code is compared with the application directory evidence of that code.</span></span> <span data-ttu-id="4e4fa-313">如果两个证据值相同，则满足此成员资格条件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-313">If both evidence values are the same, this membership condition is satisfied.</span></span> <span data-ttu-id="4e4fa-314">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.ApplicationDirectoryMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-314">For more information about this membership condition, see <xref:System.Security.Policy.ApplicationDirectoryMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-315">-custom  xmlfile</span><span class="sxs-lookup"><span data-stu-id="4e4fa-315">**-custom**  *xmlfile*</span></span>|<span data-ttu-id="4e4fa-316">添加自定义成员资格条件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-316">Adds a custom membership condition.</span></span> <span data-ttu-id="4e4fa-317">强制性 *xmlfile* 参数指定包含自定义成员资格条件的 XML 序列化的 .xml 文件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-317">The mandatory *xmlfile* argument specifies the .xml file that contains XML serialization of the custom membership condition.</span></span>|  
|<span data-ttu-id="4e4fa-318">-hash hashAlg {-hex hashValue &#124; -file assembly_file }</span><span class="sxs-lookup"><span data-stu-id="4e4fa-318">**-hash** *hashAlg* {**-hex** *hashValue* &#124; **-file** *assembly_file* }</span></span>|<span data-ttu-id="4e4fa-319">指定具有给定程序集哈希的代码。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-319">Specifies code that has the given assembly hash.</span></span> <span data-ttu-id="4e4fa-320">若要使用哈希作为代码组成员资格条件，则必须指定哈希值或程序集文件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-320">To use a hash as a code group membership condition, you must specify either the hash value or the assembly file.</span></span> <span data-ttu-id="4e4fa-321">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.HashMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-321">For more information about this membership condition, see <xref:System.Security.Policy.HashMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-322">-pub { -cert cert_file_name &#124; </span><span class="sxs-lookup"><span data-stu-id="4e4fa-322">**-pub** { **-cert** *cert_file_name* &#124;</span></span><br /><br /> <span data-ttu-id="4e4fa-323">-file signed_file_name &#124; -hex  hex_string }</span><span class="sxs-lookup"><span data-stu-id="4e4fa-323">**-file** *signed_file_name* &#124; **-hex**  *hex_string* }</span></span>|<span data-ttu-id="4e4fa-324">指定具有给定软件发行者的代码，软件发行者由证书文件、文件上的签名或 X509 证书的十六进制表示形式来指示。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-324">Specifies code that has the given software publisher, as denoted by a certificate file, a signature on a file, or the hexadecimal representation of an X509 certificate.</span></span> <span data-ttu-id="4e4fa-325">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.PublisherMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-325">For more information about this membership condition, see <xref:System.Security.Policy.PublisherMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-326">-site website</span><span class="sxs-lookup"><span data-stu-id="4e4fa-326">**-site** *website*</span></span>|<span data-ttu-id="4e4fa-327">指定具有给定源站点的代码。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-327">Specifies code that has the given site of origin.</span></span> <span data-ttu-id="4e4fa-328">例如：</span><span class="sxs-lookup"><span data-stu-id="4e4fa-328">For example:</span></span><br /><br /> `-site** www.proseware.com`<br /><br /> <span data-ttu-id="4e4fa-329">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.SiteMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-329">For more information about this membership condition, see <xref:System.Security.Policy.SiteMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-330">-strong -file file_name {name &#124; -noname} {version &#124; -noversion} </span><span class="sxs-lookup"><span data-stu-id="4e4fa-330">**-strong -file** *file_name* {*name* &#124; **-noname**} {*version* &#124; **-noversion**}</span></span>|<span data-ttu-id="4e4fa-331">指定具有特定强名称的代码，强名称由文件名、字符串形式的程序集名称和 *major*.*minor*.*build*.*revision* 格式的程序集版本指示。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-331">Specifies code that has a specific strong name, as designated by the file name, the assembly name as a string, and the assembly version in the format *major*.*minor*.*build*.*revision*.</span></span> <span data-ttu-id="4e4fa-332">例如：</span><span class="sxs-lookup"><span data-stu-id="4e4fa-332">For example:</span></span><br /><br /> <span data-ttu-id="4e4fa-333">**-strong -file** myAssembly.exe myAssembly 1.2.3.4</span><span class="sxs-lookup"><span data-stu-id="4e4fa-333">**-strong -file** myAssembly.exe myAssembly 1.2.3.4</span></span><br /><br /> <span data-ttu-id="4e4fa-334">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.StrongNameMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-334">For more information about this membership condition, see <xref:System.Security.Policy.StrongNameMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-335">-url URL</span><span class="sxs-lookup"><span data-stu-id="4e4fa-335">**-url** *URL*</span></span>|<span data-ttu-id="4e4fa-336">指定源自给定 URL 的代码。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-336">Specifies code that originates from the given URL.</span></span> <span data-ttu-id="4e4fa-337">URL 必须包含一个协议，如 `http://` 或 `ftp://`。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-337">The URL must include a protocol, such as `http://` or `ftp://`.</span></span> <span data-ttu-id="4e4fa-338">此外，可以使用通配符 (\*) 指定来自特定 URL 的多个程序集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-338">Additionally, a wildcard character (\*) can be used to specify multiple assemblies from a particular URL.</span></span> <span data-ttu-id="4e4fa-339">**注意：** 由于 URL 可以用多个名称标识，使用 URL 作为成员条件不是确定代码标识的安全方式。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-339">**Note:**  Because a URL can be identified using multiple names, using a URL as a membership condition is not a safe way to ascertain the identity of code.</span></span> <span data-ttu-id="4e4fa-340">应尽可能使用强名称成员条件、发行者成员条件或哈希成员条件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-340">Where possible, use a strong name membership condition, a publisher membership condition, or the hash membership condition.</span></span> <br /><br /> <span data-ttu-id="4e4fa-341">有关此成员资格条件的详细信息，请参阅 <xref:System.Security.Policy.UrlMembershipCondition?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-341">For more information about this membership condition, see <xref:System.Security.Policy.UrlMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="4e4fa-342">-zone zonename</span><span class="sxs-lookup"><span data-stu-id="4e4fa-342">**-zone** *zonename*</span></span>|<span data-ttu-id="4e4fa-343">指定具有给定源区域的代码。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-343">Specifies code with the given zone of origin.</span></span> <span data-ttu-id="4e4fa-344">*Zonename* 参数可以是下列值之一：**MyComputer**、**Intranet**、**Trusted**、**Internet** 或 **Untrusted**。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-344">The *zonename* argument can be one of the following values: **MyComputer**, **Intranet**, **Trusted**, **Internet**, or **Untrusted**.</span></span> <span data-ttu-id="4e4fa-345">有关此成员资格条件的更多信息，请参见 <xref:System.Security.Policy.ZoneMembershipCondition> 类。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-345">For more information about this membership condition, see the <xref:System.Security.Policy.ZoneMembershipCondition> Class.</span></span>|  
  
 <span data-ttu-id="4e4fa-346">可与 **–addgroup** 和 **–chggroup** 选项一起使用的 *flags* 参数，可使用下列参数之一指定。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-346">The *flags* argument, which can be used with the **–addgroup** and **–chggroup** options, is specified using one of the following.</span></span>  
  
|<span data-ttu-id="4e4fa-347">参数</span><span class="sxs-lookup"><span data-stu-id="4e4fa-347">Argument</span></span>|<span data-ttu-id="4e4fa-348">描述</span><span class="sxs-lookup"><span data-stu-id="4e4fa-348">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="4e4fa-349">-description “description”</span><span class="sxs-lookup"><span data-stu-id="4e4fa-349">**-description** "*description*"</span></span>|<span data-ttu-id="4e4fa-350">与 **–addgroup** 选项一起使用时，指定要添加的代码组的描述。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-350">If used with the **–addgroup** option, specifies the description for a code group to add.</span></span> <span data-ttu-id="4e4fa-351">与 **–chggroup** 选项一起使用时，指定要编辑的代码组的描述。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-351">If used with the **–chggroup** option, specifies the description for a code group to edit.</span></span> <span data-ttu-id="4e4fa-352">*description* 参数必须用双引号引起来。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-352">The *description* argument must be enclosed in double quotes.</span></span>|  
|<span data-ttu-id="4e4fa-353">**-exclusive** {**on**&#124;**off**}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-353">**-exclusive** {**on**&#124;**off**}</span></span>|<span data-ttu-id="4e4fa-354">设置为 **on** 时，指示当某些代码符合代码组的成员资格条件时，只考虑与正在添加或修改的代码组关联的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-354">When set to **on**, indicates that only the permission set associated with the code group you are adding or modifying is considered when some code fits the membership condition of the code group.</span></span> <span data-ttu-id="4e4fa-355">当此选项设置为 **off** 时，Caspol.exe 考虑策略级别中所有匹配的代码组的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-355">When this option is set to **off**, Caspol.exe considers the permission sets of all matching code groups in the policy level.</span></span>|  
|<span data-ttu-id="4e4fa-356">**-levelfinal** {**on**&#124;**off**}</span><span class="sxs-lookup"><span data-stu-id="4e4fa-356">**-levelfinal** {**on**&#124;**off**}</span></span>|<span data-ttu-id="4e4fa-357">当设置为 **on** 时，指示不考虑低于已添加或修改的代码组所在的级别的策略级别。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-357">When set to **on**, indicates that no policy level below the level in which the added or modified code group occurs is considered.</span></span> <span data-ttu-id="4e4fa-358">此选项通常在计算机策略级别上使用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-358">This option is typically used at the machine policy level.</span></span> <span data-ttu-id="4e4fa-359">例如，如果在计算机级别上为代码组设置此标志，并且某个代码与此代码组的成员资格条件匹配，则 Caspol.exe 不会计算或应用此代码的用户级别策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-359">For example, if you set this flag for a code group at the machine level and some code matches this code group's membership condition, Caspol.exe does not calculate or apply the user level policy for this code.</span></span>|  
|<span data-ttu-id="4e4fa-360">-name “name”</span><span class="sxs-lookup"><span data-stu-id="4e4fa-360">**-name** "*name*"</span></span>|<span data-ttu-id="4e4fa-361">与 **–addgroup** 选项一起使用时，指定要添加的代码组的脚本名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-361">If used with the **–addgroup** option, specifies the scripting name for a code group to add.</span></span> <span data-ttu-id="4e4fa-362">与 **-chggroup** 选项一起使用时，指定要编辑的代码组的脚本名称。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-362">If used with the **-chggroup** option, specifies the scripting name for a code group to edit.</span></span> <span data-ttu-id="4e4fa-363">*name* 参数必须用双引号引起。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-363">The *name* argument must be enclosed in double quotes.</span></span> <span data-ttu-id="4e4fa-364">*name* 参数不能以数字开头，只能包含 A-Z、0-9 和下划线字符。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-364">The *name* argument cannot begin with a number, and can only contain A-Z, 0-9, and the underscore character.</span></span> <span data-ttu-id="4e4fa-365">代码组可以按此 *name* 而非其数字标签引用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-365">Code groups can be referred to by this *name* instead of by their numeric label.</span></span> <span data-ttu-id="4e4fa-366">*name* 对于撰写脚本也非常有用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-366">The *name* is also highly useful for scripting purposes.</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="4e4fa-367">备注</span><span class="sxs-lookup"><span data-stu-id="4e4fa-367">Remarks</span></span>  

 <span data-ttu-id="4e4fa-368">安全策略使用三个策略级别来表示：计算机策略、用户策略和企业策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-368">Security policy is expressed using three policy levels: machine policy, user policy, and enterprise policy.</span></span> <span data-ttu-id="4e4fa-369">程序集收到的权限集由这三个策略级别允许的权限集的交集确定。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-369">The set of permissions that an assembly receives is determined by the intersection of the permission sets allowed by these three policy levels.</span></span> <span data-ttu-id="4e4fa-370">每个策略级别都用代码组的分层结构表示。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-370">Each policy level is represented by a hierarchical structure of code groups.</span></span> <span data-ttu-id="4e4fa-371">每个代码组都有一个确定哪个代码是该组成员的成员资格条件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-371">Every code group has a membership condition that determines which code is a member of that group.</span></span> <span data-ttu-id="4e4fa-372">命名权限集也与每个代码组关联。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-372">A named permission set is also associated with each code group.</span></span> <span data-ttu-id="4e4fa-373">此权限集指定运行时允许满足成员资格条件的代码拥有的权限。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-373">This permission set specifies the permissions the runtime allows code that satisfies the membership condition to have.</span></span> <span data-ttu-id="4e4fa-374">代码组层次结构连同其关联的命名权限集一起定义并维护每个安全策略级别。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-374">A code group hierarchy, along with its associated named permission sets, defines and maintains each level of security policy.</span></span> <span data-ttu-id="4e4fa-375">可以使用 **–user**、 **-customuser**、 **–machine** 和 **-enterprise** 选项设置安全策略级别。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-375">You can use the **–user**, **-customuser**, **–machine** and **-enterprise** options to set the level of security policy.</span></span>  
  
 <span data-ttu-id="4e4fa-376">有关安全策略以及运行时如何确定授予代码何种权限的更多信息，请参见[安全策略管理](/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-376">For more information about security policy and how the runtime determines which permissions to grant to code, see [Security Policy Management](/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)).</span></span>  
  
## <a name="referencing-code-groups-and-permission-sets"></a><span data-ttu-id="4e4fa-377">引用代码组和权限集</span><span class="sxs-lookup"><span data-stu-id="4e4fa-377">Referencing Code Groups and Permission Sets</span></span>  

 <span data-ttu-id="4e4fa-378">为使在层次结构中引用代码组更容易， **-list** 选项显示了代码组的缩进式列表及其数字标签（1、1.1、1.1.1 依此类推）。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-378">To facilitate references to code groups in a hierarchy, the **-list** option displays an indented list of code groups along with their numerical labels (1, 1.1, 1.1.1, and so on).</span></span> <span data-ttu-id="4e4fa-379">其他以代码组为目标的命令行操作也使用数字标签来引用特定的代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-379">The other command-line operations that target code groups also use the numerical labels to refer to specific code groups.</span></span>  
  
 <span data-ttu-id="4e4fa-380">命名权限集按其名称引用。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-380">Named permission sets are referenced by their names.</span></span> <span data-ttu-id="4e4fa-381">**–list** 选项显示代码组的列表，后面紧跟在该策略中可用的命名权限集的列表。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-381">The **–list** option displays the list of code groups followed by a list of named permission sets available in that policy.</span></span>  
  
## <a name="caspolexe-behavior"></a><span data-ttu-id="4e4fa-382">Caspol.exe 行为</span><span class="sxs-lookup"><span data-stu-id="4e4fa-382">Caspol.exe Behavior</span></span>  

 <span data-ttu-id="4e4fa-383">**-s**[**ecurity**] {**on** &#124; **off**} 之外的所有选项使用与 Caspol.exe 一起安装的 .NET Framework 的版本。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-383">All options except **-s**[**ecurity**] {**on** &#124; **off**} use the version of the .NET Framework that Caspol.exe was installed with.</span></span> <span data-ttu-id="4e4fa-384">如果运行的 Caspol.exe 是与运行时的 *X* 版本一起安装的，则更改只应用于该版本。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-384">If you run the Caspol.exe that was installed with version *X* of the runtime, the changes apply only to that version.</span></span> <span data-ttu-id="4e4fa-385">运行时的其他并行安装（如果有）不受影响。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-385">Other side-by-side installations of the runtime, if any, are not affected.</span></span> <span data-ttu-id="4e4fa-386">如果不是在特定运行时版本的目录中从命令行运行 Caspol.exe，则从路径中的第一个运行时版本目录（通常是安装的最新的运行时版本）中执行此工具。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-386">If you run Caspol.exe from the command line without being in a directory for a specific runtime version, the tool is executed from the first runtime version directory in the path (usually the most recent runtime version installed).</span></span>  
  
 <span data-ttu-id="4e4fa-387">**-s**[**ecurity**] {**on** &#124; **off**} 选项是整个计算机范围的操作。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-387">The **-s**[**ecurity**] {**on** &#124; **off**} option is a computer-wide operation.</span></span> <span data-ttu-id="4e4fa-388">关闭代码访问安全性将终止对计算机上的所有托管代码和所有用户的安全性检查。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-388">Turning off code access security terminates security checks for all managed code and for all users on the computer.</span></span> <span data-ttu-id="4e4fa-389">如果同时安装了 .NET Framework 的多个版本，则此命令将关闭计算机上安装的每个版本的安全性。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-389">If side-by-side versions of the .NET Framework are installed, this command turns off security for every version installed on the computer.</span></span> <span data-ttu-id="4e4fa-390">尽管 **-list** 选项表明已经关闭安全性，但对于其他用户，没有任何其他指示清楚表明安全性已关闭。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-390">Although the **-list** option shows that security is turned off, nothing else clearly indicates for other users that security has been turned off.</span></span>  
  
 <span data-ttu-id="4e4fa-391">当没有管理权限的用户运行 Caspol.exe 时，除非指定了 **–machine** 选项，否则所有选项都将引用用户级别策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-391">When a user without administrative rights runs Caspol.exe, all options refer to the user level policy unless the **–machine** option is specified.</span></span> <span data-ttu-id="4e4fa-392">当管理员运行 Caspol.exe 时，除非指定了 **–user** 选项，否则所有选项都将引用计算机策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-392">When an administrator runs Caspol.exe, all options refer to the machine policy unless the **–user** option is specified.</span></span>  
  
 <span data-ttu-id="4e4fa-393">Caspol.exe 必须被授予等效于 **Everything** 权限集的权限才能运行。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-393">Caspol.exe must be granted the equivalent of the **Everything** permission set to function.</span></span> <span data-ttu-id="4e4fa-394">该工具有保护机制，可防止以阻碍授予 Caspol.exe 运行所需权限的方式修改策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-394">The tool has a protective mechanism that prevents policy from being modified in ways that would prevent Caspol.exe from being granted the permissions it needs to run.</span></span> <span data-ttu-id="4e4fa-395">如果尝试做这种更改，Caspol.exe 将通知你所请求的策略更改会中断该工具的运行，并且策略更改被拒绝。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-395">If you try to make such changes, Caspol.exe notifies you that the requested policy change will break the tool, and the policy change is rejected.</span></span> <span data-ttu-id="4e4fa-396">可以通过使用 **–force** 选项为给定的命令关闭此保护机制。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-396">You can turn this protective mechanism off for a given command by using the **–force** option.</span></span>  
  
<a name="cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1"></a>

## <a name="manually-editing-the-security-configuration-files"></a><span data-ttu-id="4e4fa-397">手动编辑安全配置文件</span><span class="sxs-lookup"><span data-stu-id="4e4fa-397">Manually Editing the Security Configuration Files</span></span>  

 <span data-ttu-id="4e4fa-398">三个安全配置文件与 Caspol.exe 支持的三个策略级别相对应：一个用于计算机策略，一个用于给定用户的策略，一个用于企业策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-398">Three security configuration files correspond to the three policy levels supported by Caspol.exe: one for the machine policy, one for a given user's policy, and one for the enterprise policy.</span></span> <span data-ttu-id="4e4fa-399">仅当使用 Caspol.exe 更改了计算机、用户或企业策略时，才会在磁盘上创建这些文件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-399">These files are created on disk only when machine, user, or enterprise policy is changed using Caspol.exe.</span></span> <span data-ttu-id="4e4fa-400">如果需要，可以使用 Caspol.exe 中的 **–reset** 选项将默认安全策略保存到磁盘。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-400">You can use the **–reset** option in Caspol.exe to save the default security policy to disk, if needed.</span></span>  
  
 <span data-ttu-id="4e4fa-401">多数情况下，不建议手动编辑安全配置文件。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-401">In most cases, manually editing the security configuration files is not recommended.</span></span> <span data-ttu-id="4e4fa-402">但在某些情况下可能需要修改这些文件，如当管理员想编辑特定用户的安全配置文件时。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-402">But there might be scenarios in which modifying these files becomes necessary, such as when an administrator wants to edit the security configuration for a particular user.</span></span>  
  
## <a name="examples"></a><span data-ttu-id="4e4fa-403">示例</span><span class="sxs-lookup"><span data-stu-id="4e4fa-403">Examples</span></span>  

 <span data-ttu-id="4e4fa-404">**-addfulltrust**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-404">**-addfulltrust**</span></span>  
  
 <span data-ttu-id="4e4fa-405">假设已经将一个包含自定义权限的权限集添加到计算机策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-405">Assume that a permission set containing a custom permission has been added to machine policy.</span></span> <span data-ttu-id="4e4fa-406">该自定义权限在 `MyPerm.exe` 中实现，而 `MyPerm.exe` 引用 `MyOther.exe` 中的类。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-406">This custom permission is implemented in `MyPerm.exe`, and `MyPerm.exe` references classes in `MyOther.exe`.</span></span> <span data-ttu-id="4e4fa-407">这两个程序集都必须添加到完全信任程序集列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-407">Both assemblies must be added to the full trust assembly list.</span></span> <span data-ttu-id="4e4fa-408">下面的命令将 `MyPerm.exe` 程序集添加到计算机策略的完全信任列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-408">The following command adds the `MyPerm.exe` assembly to the full trust list for the machine policy.</span></span>  
  
```console  
caspol -machine -addfulltrust MyPerm.exe  
```  
  
 <span data-ttu-id="4e4fa-409">下面的命令将 `MyOther.exe` 程序集添加到计算机策略的完全信任列表中。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-409">The following command adds the `MyOther.exe` assembly to the full trust list for the machine policy.</span></span>  
  
```console  
caspol -machine -addfulltrust MyOther.exe  
```  
  
 <span data-ttu-id="4e4fa-410">**-addgroup**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-410">**-addgroup**</span></span>  
  
 <span data-ttu-id="4e4fa-411">下面的命令将子代码组添加到计算机策略代码组层次结构的根位置。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-411">The following command adds a child code group to the root of the machine policy code group hierarchy.</span></span> <span data-ttu-id="4e4fa-412">新的代码组是 **Internet** 区域的成员，并与 **Execution** 权限集关联。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-412">The new code group is a member of the **Internet** zone and is associated with the **Execution** permission set.</span></span>  
  
```console  
caspol -machine -addgroup 1.  -zone Internet Execution  
```  
  
 <span data-ttu-id="4e4fa-413">下面的命令将添加一个子代码组，该代码组授予共享 \\\netserver\netshare 本地 Intranet 权限。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-413">The following command adds a child code group that gives the share \\\netserver\netshare local intranet permissions.</span></span>  
  
```console  
caspol -machine -addgroup 1. -url \\netserver\netshare\* LocalIntranet  
```  
  
 <span data-ttu-id="4e4fa-414">**-addpset**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-414">**-addpset**</span></span>  
  
 <span data-ttu-id="4e4fa-415">下面的命令将 `Mypset` 权限集添加到用户策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-415">The following command adds the `Mypset` permission set to the user policy.</span></span>  
  
```console  
caspol -user -addpset Mypset.xml Mypset  
```  
  
 <span data-ttu-id="4e4fa-416">**-chggroup**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-416">**-chggroup**</span></span>  
  
 <span data-ttu-id="4e4fa-417">下面的命令将标记为 1.2. 的代码组的用户策略中的权限集</span><span class="sxs-lookup"><span data-stu-id="4e4fa-417">The following command changes the permission set in the user policy of the code group labeled 1.2.</span></span> <span data-ttu-id="4e4fa-418">更改为 **Execution** 权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-418">to the **Execution** permission set.</span></span>  
  
```console  
caspol -user -chggroup 1.2. Execution  
```  
  
 <span data-ttu-id="4e4fa-419">下面的命令更改标记为 1.2.1. 的代码组的默认策略中的成员资格条件，</span><span class="sxs-lookup"><span data-stu-id="4e4fa-419">The following command changes the membership condition in the default policy of the code group labeled 1.2.1.</span></span> <span data-ttu-id="4e4fa-420">并更改 **exclusive** 标志的设置。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-420">and changes the setting of the **exclusive** flag.</span></span> <span data-ttu-id="4e4fa-421">该成员资格条件被定义为源自 **Internet** 区域的代码，并且 **exclusive** 标志已打开。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-421">The membership condition is defined to be code that originates from the **Internet** zone and the **exclusive** flag is switched on.</span></span>  
  
```console  
caspol -chggroup 1.2.1. -zone Internet -exclusive on  
```  
  
 <span data-ttu-id="4e4fa-422">**-chgpset**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-422">**-chgpset**</span></span>  
  
 <span data-ttu-id="4e4fa-423">下面的命令将名为 `Mypset` 的权限集更改为包含在 `newpset.xml` 中的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-423">The following command changes the permission set with name `Mypset` to the permission set contained in `newpset.xml`.</span></span> <span data-ttu-id="4e4fa-424">请注意，当前版本不支持更改正在由代码组层次结构使用的权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-424">Note that the current release does not support changing permission sets that are being used by the code group hierarchy.</span></span>  
  
```console  
caspol -chgpset Mypset newpset.xml  
```  
  
 <span data-ttu-id="4e4fa-425">**-force**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-425">**-force**</span></span>  
  
 <span data-ttu-id="4e4fa-426">下面的命令使用户策略的根代码组（标记为 1）与 **Nothing** 命名权限集关联。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-426">The following command causes the user policy's root code group (labeled 1) to be associated with the **Nothing** named permission set.</span></span> <span data-ttu-id="4e4fa-427">这将阻止 Caspol.exe 运行。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-427">This prevents Caspol.exe from running.</span></span>  
  
```console  
caspol -force -user -chggroup 1 Nothing  
```  
  
 <span data-ttu-id="4e4fa-428">**-recover**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-428">**-recover**</span></span>  
  
 <span data-ttu-id="4e4fa-429">下面的命令恢复最近保存的计算机策略。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-429">The following command recovers the most recently saved machine policy.</span></span>  
  
```console  
caspol -machine -recover  
```  
  
 <span data-ttu-id="4e4fa-430">**-remgroup**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-430">**-remgroup**</span></span>  
  
 <span data-ttu-id="4e4fa-431">下面的命令移除标记为 1.1 的代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-431">The following command removes the code group labeled 1.1.</span></span> <span data-ttu-id="4e4fa-432">如果该代码组有任何子代码组，则这些代码组也将被删除。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-432">If this code group has any child code groups, those groups are also deleted.</span></span>  
  
```console  
caspol -remgroup 1.1.  
```  
  
 <span data-ttu-id="4e4fa-433">**-rempset**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-433">**-rempset**</span></span>  
  
 <span data-ttu-id="4e4fa-434">下面的命令从用户策略中移除 **Execution** 权限集。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-434">The following command removes the **Execution** permission set from the user policy.</span></span>  
  
```console  
caspol -user -rempset Execution  
```  
  
 <span data-ttu-id="4e4fa-435">下面的命令从用户策略级别中移除 `Mypset`。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-435">The following command removes `Mypset` from the user policy level.</span></span>  
  
```console  
caspol -rempset MyPset  
```  
  
 <span data-ttu-id="4e4fa-436">**-resolvegroup**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-436">**-resolvegroup**</span></span>  
  
 <span data-ttu-id="4e4fa-437">下面的命令显示 `myassembly` 所属的计算机策略的所有代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-437">The following command shows all code groups of the machine policy that `myassembly` belongs to.</span></span>  
  
```console  
caspol -machine -resolvegroup myassembly  
```  
  
 <span data-ttu-id="4e4fa-438">下面的命令显示 `myassembly` 所属的计算机策略、企业策略和指定的自定义用户策略的所有代码组。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-438">The following command shows all code groups of the machine, enterprise, and specified custom user policy that `myassembly` belongs to.</span></span>  
  
```console  
caspol -customall "c:\config_test\security.config" -resolvegroup myassembly  
```  
  
 <span data-ttu-id="4e4fa-439">**-resolveperm**</span><span class="sxs-lookup"><span data-stu-id="4e4fa-439">**-resolveperm**</span></span>  
  
 <span data-ttu-id="4e4fa-440">下面的命令基于计算机策略级别和用户策略级别计算 `testassembly` 的权限。</span><span class="sxs-lookup"><span data-stu-id="4e4fa-440">The following command calculates the permissions for `testassembly` based on the machine and user policy levels.</span></span>  
  
```console  
caspol -all -resolveperm testassembly  
```  
  
## <a name="see-also"></a><span data-ttu-id="4e4fa-441">请参阅</span><span class="sxs-lookup"><span data-stu-id="4e4fa-441">See also</span></span>

- [<span data-ttu-id="4e4fa-442">工具</span><span class="sxs-lookup"><span data-stu-id="4e4fa-442">Tools</span></span>](index.md)
- [<span data-ttu-id="4e4fa-443">开发人员命令行 shell</span><span class="sxs-lookup"><span data-stu-id="4e4fa-443">Developer command-line shells</span></span>](/visualstudio/ide/reference/command-prompt-powershell)

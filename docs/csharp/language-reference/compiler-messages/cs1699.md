---
description: 编译器警告（等级 1）CS1699
title: 编译器警告（等级 1）CS1699
ms.date: 07/20/2015
f1_keywords:
- CS1699
helpviewer_keywords:
- CS1699
ms.assetid: acf4b57d-8534-4417-9324-65415b5676ae
ms.openlocfilehash: 06363cd590286d0f68267f0704ec47a0deb4156b
ms.sourcegitcommit: 0bb8074d524e0dcf165430b744bb143461f17026
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/15/2021
ms.locfileid: "103477603"
---
# <a name="compiler-warning-level-1-cs1699"></a><span data-ttu-id="176e3-103">编译器警告（等级 1）CS1699</span><span class="sxs-lookup"><span data-stu-id="176e3-103">Compiler Warning (level 1) CS1699</span></span>

<span data-ttu-id="176e3-104">使用命令行选项“compiler_option”或适当的项目设置代替“attribute_name”</span><span class="sxs-lookup"><span data-stu-id="176e3-104">Use command line option "compiler_option" or appropriate project settings instead of "attribute_name"</span></span>  
  
 <span data-ttu-id="176e3-105">若要为程序集签名，需要指定密钥文件。</span><span class="sxs-lookup"><span data-stu-id="176e3-105">In order to sign an assembly, it is necessary to specify a key file.</span></span> <span data-ttu-id="176e3-106">在 C# 2.0 之前，在源代码中使用 CLR 属性指定密钥文件。</span><span class="sxs-lookup"><span data-stu-id="176e3-106">Prior to C# 2.0, you specified the key file using CLR attributes in source code.</span></span> <span data-ttu-id="176e3-107">这些属性现已弃用。</span><span class="sxs-lookup"><span data-stu-id="176e3-107">These attributes are now deprecated.</span></span>  
  
 <span data-ttu-id="176e3-108">从 C# 2.0 开始，应使用“项目设计器”的“签名页”或程序集链接器来指定密钥文件。</span><span class="sxs-lookup"><span data-stu-id="176e3-108">Beginning with C# 2.0, you should use the **Signing Page** of the **Project Designer** or the Assembly Linker to specify the key file.</span></span>  
  
 <span data-ttu-id="176e3-109">“项目设计器”的“签名”页是首选方法；有关详细信息，请参阅[“项目设计器”->“签名”页](/visualstudio/ide/reference/signing-page-project-designer)和[管理程序集和清单签名](/visualstudio/ide/managing-assembly-and-manifest-signing)。</span><span class="sxs-lookup"><span data-stu-id="176e3-109">The **Signing Page** of the **Project Designer** is the preferred method; for more information, see [Signing Page, Project Designer](/visualstudio/ide/reference/signing-page-project-designer) and [Managing Assembly and Manifest Signing](/visualstudio/ide/managing-assembly-and-manifest-signing).</span></span>  
  
 <span data-ttu-id="176e3-110">[如何：使用强名称为程序集签名](../../../standard/assembly/sign-strong-name.md)使用以下编译器选项：</span><span class="sxs-lookup"><span data-stu-id="176e3-110">The [How to: Sign an Assembly with a Strong Name](../../../standard/assembly/sign-strong-name.md) uses the following compiler options:</span></span>  
  
- <span data-ttu-id="176e3-111">[KeyFile（C# 编译器选项）](../compiler-options/security.md#keyfile)而不是 <xref:System.Reflection.AssemblyKeyFileAttribute> 属性。</span><span class="sxs-lookup"><span data-stu-id="176e3-111">[**KeyFile** (C# Compiler Options)](../compiler-options/security.md#keyfile) instead of the <xref:System.Reflection.AssemblyKeyFileAttribute> attribute.</span></span>  
  
- <span data-ttu-id="176e3-112">[KeyContainer（C# 编译器选项）](../compiler-options/security.md#keycontainer)而不是 <xref:System.Reflection.AssemblyKeyNameAttribute>。</span><span class="sxs-lookup"><span data-stu-id="176e3-112">[**KeyContainer** (C# Compiler Options)](../compiler-options/security.md#keycontainer) instead of <xref:System.Reflection.AssemblyKeyNameAttribute>.</span></span>  
  
- <span data-ttu-id="176e3-113">[DelaySign（C# 编译器选项）](../compiler-options/security.md#delaysign)而不是 <xref:System.Reflection.AssemblyDelaySignAttribute>。</span><span class="sxs-lookup"><span data-stu-id="176e3-113">[**DelaySign** (C# Compiler Options)](../compiler-options/security.md#delaysign) instead of <xref:System.Reflection.AssemblyDelaySignAttribute>.</span></span>  
  
 <span data-ttu-id="176e3-114">这些属性由于以下原因已启用：</span><span class="sxs-lookup"><span data-stu-id="176e3-114">These attributes have been deprecated for the following reasons:</span></span>  
  
- <span data-ttu-id="176e3-115">由于属性嵌入在由编译器生成的二进制文件中，因此存在安全问题。</span><span class="sxs-lookup"><span data-stu-id="176e3-115">There were security issues due to the attributes being embedded in the binary files produced by the compiler.</span></span> <span data-ttu-id="176e3-116">拥有你的二进制文件的所有人也会拥有在其中存储的密钥。</span><span class="sxs-lookup"><span data-stu-id="176e3-116">Everyone who had your binary also had the keys stored in it.</span></span>  
  
- <span data-ttu-id="176e3-117">由于属性中指定的路径相对于当前工作目录（可能会在集成开发环境 (IDE) 中更改）或输出目录，因此存在可用性问题。</span><span class="sxs-lookup"><span data-stu-id="176e3-117">There were usability issues due to the fact that the path specified in the attributes was relative to the current working directory, which could change in the integrated development environment (IDE), or to the output directory.</span></span> <span data-ttu-id="176e3-118">因此，大多数情况下密钥文件有可能是 ..\\\\..\\\mykey.snk。</span><span class="sxs-lookup"><span data-stu-id="176e3-118">Thus, most times the key file is likely to be ..\\\\..\\\mykey.snk.</span></span> <span data-ttu-id="176e3-119">属性也使项目系统更加难以为附属程序集正确签名。</span><span class="sxs-lookup"><span data-stu-id="176e3-119">Attributes also make it more difficult for the project system to properly sign satellite assemblies.</span></span> <span data-ttu-id="176e3-120">使用编译器选项而不是这些属性时，可以使用密钥的完全限定路径和文件名而不会在输出文件中嵌入任何内容；项目系统和源代码管理系统可以在项目四处移动时正确操作该完整路径；项目系统可以维护密钥文件的项目相对路径，并仍然将完整路径传递给编译器；其他生成程序可以通过直接向编译器传递正确路径而不是生成具有正确属性的源文件，更轻松地为输出签名。</span><span class="sxs-lookup"><span data-stu-id="176e3-120">When you use the compiler options instead of these attributes, you can use a fully qualified path and file name for the key without anything being embedded in the output file; the project system and source code control system can properly manipulate that full path when projects are moved around; the project system can maintain a project-relative path to the key file, and still pass a full path to the compiler; other build programs can more easily sign outputs by passing the proper path directly to the compiler instead of generating a source file with the correct attributes.</span></span>  
  
- <span data-ttu-id="176e3-121">将属性与友元程序集结合使用可能会影响编译器效率。</span><span class="sxs-lookup"><span data-stu-id="176e3-121">Using attributes with friend assemblies can hamper compiler efficiency.</span></span> <span data-ttu-id="176e3-122">使用属性时，编译器在必须决定是否授予友元关系时不知道该密钥是什么，因此必须进行猜测。</span><span class="sxs-lookup"><span data-stu-id="176e3-122">When you use attributes, the compiler does not know what the key is when it has to decide whether or not to grant friendship and so it has to guess.</span></span> <span data-ttu-id="176e3-123">编译结束时，编译器一旦最终知道密钥，便能够验证猜测。</span><span class="sxs-lookup"><span data-stu-id="176e3-123">At the end of compilation, the compiler is able to verify the guess once it finally knows the key.</span></span> <span data-ttu-id="176e3-124">使用编译器选项指定密钥文件时，编译器可以立即决定是否授予友元关系。</span><span class="sxs-lookup"><span data-stu-id="176e3-124">When the key file is specified with a compiler option, the compiler can immediately decide whether to grant friendship.</span></span>  
  
## <a name="example"></a><span data-ttu-id="176e3-125">示例</span><span class="sxs-lookup"><span data-stu-id="176e3-125">Example</span></span>  

 <span data-ttu-id="176e3-126">以下示例生成 CS1699。</span><span class="sxs-lookup"><span data-stu-id="176e3-126">The following sample generates CS1699.</span></span> <span data-ttu-id="176e3-127">若要解决该错误，请移除属性，并使用 **/delaysign** 进行编译。</span><span class="sxs-lookup"><span data-stu-id="176e3-127">To resolve the error, remove the attribute and compile with **/delaysign**.</span></span>  
  
```csharp  
// CS1699.cs  
// compile with: /target:library  
[assembly:System.Reflection.AssemblyDelaySign(true)]   // CS1699  
```  
  
## <a name="see-also"></a><span data-ttu-id="176e3-128">另请参阅</span><span class="sxs-lookup"><span data-stu-id="176e3-128">See also</span></span>

- [<span data-ttu-id="176e3-129">“项目设计器”-&gt;“签名”页</span><span class="sxs-lookup"><span data-stu-id="176e3-129">Signing Page, Project Designer</span></span>](/visualstudio/ide/reference/signing-page-project-designer)
- [<span data-ttu-id="176e3-130">管理程序集签名和清单签名</span><span class="sxs-lookup"><span data-stu-id="176e3-130">Managing Assembly and Manifest Signing</span></span>](/visualstudio/ide/managing-assembly-and-manifest-signing)
- [<span data-ttu-id="176e3-131">如何：使用强名称为程序集签名</span><span class="sxs-lookup"><span data-stu-id="176e3-131">How to: Sign an Assembly with a Strong Name</span></span>](../../../standard/assembly/sign-strong-name.md)

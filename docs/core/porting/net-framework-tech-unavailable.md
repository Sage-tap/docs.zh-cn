---
title: .NET Framework 技术在 .NET Core 和 .NET 5+ 上不可用
titleSuffix: ''
description: 了解在 .NET Core 和 .NET 5.0 及更高版本上不可用的 .NET Framework 技术。
author: cartermp
ms.date: 03/08/2021
ms.openlocfilehash: cd273e95c5c889b900cb8ff744e8c49bb1ce69c4
ms.sourcegitcommit: 46cfed35d79d70e08c313b9c664c7e76babab39e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/10/2021
ms.locfileid: "102604926"
---
# <a name="net-framework-technologies-unavailable-on-net-core-and-net-5"></a><span data-ttu-id="a4cd4-103">.NET Framework 技术在 .NET Core 和 .NET 5+ 上不可用</span><span class="sxs-lookup"><span data-stu-id="a4cd4-103">.NET Framework technologies unavailable on .NET Core and .NET 5+</span></span>

<span data-ttu-id="a4cd4-104">一些适用于 .NET Framework 库的技术不可用于 .NET 5 及更高版本（和 .NET Core），例如应用域、远程处理和代码访问安全性 (CAS)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-104">Several technologies available to .NET Framework libraries aren't available for use with .NET 5+ (and .NET Core), such as app domains, remoting, and code access security (CAS).</span></span> <span data-ttu-id="a4cd4-105">如果你的库依赖于本页中列出的一项或多项技术，请考虑使用提及的替代方法。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-105">If your libraries rely on one or more of the technologies listed on this page, consider the alternative approaches mentioned.</span></span>

<span data-ttu-id="a4cd4-106">有关 API 兼容性的详细信息，请参阅 [.NET 中断性变更](../compatibility/breaking-changes.md)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-106">For more information on API compatibility, see [Breaking changes in .NET](../compatibility/breaking-changes.md).</span></span>

## <a name="application-domains"></a><span data-ttu-id="a4cd4-107">应用程序域</span><span class="sxs-lookup"><span data-stu-id="a4cd4-107">Application domains</span></span>

<span data-ttu-id="a4cd4-108">应用程序域 (AppDomain) 可将应用相互隔离。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-108">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="a4cd4-109">AppDomain 需要运行时支持，并且耗费的资源成本较高。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-109">AppDomains require runtime support and are resource-expensive.</span></span> <span data-ttu-id="a4cd4-110">不支持创建其他应用域，也尚未计划在将来添加此功能。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-110">Creating more app domains isn't supported, and there are no plans to add this capability in the future.</span></span> <span data-ttu-id="a4cd4-111">对于代码隔离，将流程或容器用作备用。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-111">For code isolation, use separate processes or containers as an alternative.</span></span> <span data-ttu-id="a4cd4-112">若要动态加载程序集，请使用 <xref:System.Runtime.Loader.AssemblyLoadContext> 类。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-112">To dynamically load assemblies, use the <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="a4cd4-113">.NET 5+ 公开了一些 <xref:System.AppDomain> API 曲面，以便可以更轻松地从 .NET Framework 进行代码迁移。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-113">To make code migration from .NET Framework easier, .NET 5+ exposes some of the <xref:System.AppDomain> API surface.</span></span> <span data-ttu-id="a4cd4-114">一些 API 可正常工作（例如 <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>），一些成员不会执行任何操作（例如 <xref:System.AppDomain.SetCachePath%2A>），也有一些会引发 <xref:System.PlatformNotSupportedException>（例如 <xref:System.AppDomain.CreateDomain%2A>）。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-114">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span> <span data-ttu-id="a4cd4-115">对照 [dotnet/runtime GitHub 存储库](https://github.com/dotnet/runtime)中的 [`System.AppDomain` 引用源](https://github.com/dotnet/runtime/blob/master/src/libraries/System.Private.CoreLib/src/System/AppDomain.cs)检查所使用的类型。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-115">Check the types you use against the [`System.AppDomain` reference source](https://github.com/dotnet/runtime/blob/master/src/libraries/System.Private.CoreLib/src/System/AppDomain.cs) in the [dotnet/runtime GitHub repository](https://github.com/dotnet/runtime).</span></span> <span data-ttu-id="a4cd4-116">确保选择与已实现的版本相匹配的分支。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-116">Make sure to select the branch that matches your implemented version.</span></span>

## <a name="remoting"></a><span data-ttu-id="a4cd4-117">远程处理</span><span class="sxs-lookup"><span data-stu-id="a4cd4-117">Remoting</span></span>

<span data-ttu-id="a4cd4-118">.NET 5 及更高版本（和 .NET Core）不支持 .NET 远程处理。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-118">.NET Remoting isn't supported on .NET 5+ (and .NET Core).</span></span> <span data-ttu-id="a4cd4-119">.NET 远程处理被认为是存在问题的体系结构。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-119">.NET remoting was identified as a problematic architecture.</span></span> <span data-ttu-id="a4cd4-120">它用于在不再受支持的应用程序域之间进行通信。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-120">It's used for communicating across application domains, which are no longer supported.</span></span> <span data-ttu-id="a4cd4-121">同样，远程处理也需要运行时支持，进行维护的成本较高。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-121">Also, remoting requires runtime support, which is expensive to maintain.</span></span>

<span data-ttu-id="a4cd4-122">对于跨进程通信，可将进程间通信 (IPC) 机制视为远程处理的备用方案，如 <xref:System.IO.Pipes> 类或 <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> 类。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-122">For communication across processes, consider inter-process communication (IPC) mechanisms as an alternative to remoting, such as the <xref:System.IO.Pipes> class or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="a4cd4-123">对于跨计算机的通信，可将基于网络的解决方案用作备用方案。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-123">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="a4cd4-124">最好使用低开销纯文本协议，例如 HTTP。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-124">Preferably, use a low-overhead plain text protocol, such as HTTP.</span></span> <span data-ttu-id="a4cd4-125">此处，ASP.NET Core 使用的 Web 服务器 [Kestrel Web 服务器](/aspnet/core/fundamentals/servers/kestrel)是一个选择。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-125">The [Kestrel web server](/aspnet/core/fundamentals/servers/kestrel), which is the web server used by ASP.NET Core, is an option here.</span></span> <span data-ttu-id="a4cd4-126">也可考虑将 <xref:System.Net.Sockets> 用于基于网络的跨计算机的方案。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-126">Also, consider using <xref:System.Net.Sockets> for network-based, cross-machine scenarios.</span></span> <span data-ttu-id="a4cd4-127">有关更多选项，请参阅 [.NET 开放源代码开发人员项目：消息传送](https://github.com/Microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-127">For more options, see [.NET Open Source Developer Projects: Messaging](https://github.com/Microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging).</span></span>

## <a name="code-access-security-cas"></a><span data-ttu-id="a4cd4-128">代码访问安全性 (CAS)</span><span class="sxs-lookup"><span data-stu-id="a4cd4-128">Code access security (CAS)</span></span>

<span data-ttu-id="a4cd4-129">沙盒依赖为托管应用程序或库使用或运行提供资源的运行时或框架进行限制，其[在 .NET Framework 上不受支持](../../framework/misc/code-access-security.md)，因此在 .NET Core 和 .NET 5+ 上也不受支持。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-129">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, [isn't supported on .NET Framework](../../framework/misc/code-access-security.md) and therefore is also not supported on .NET Core and .NET 5+.</span></span> <span data-ttu-id="a4cd4-130">.NET Framework 和运行时中存在太多发生特权提升以继续将 CAS 视为安全边界的情况。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-130">There are too many cases in the .NET Framework and the runtime where an elevation of privileges occurs to continue treating CAS as a security boundary.</span></span> <span data-ttu-id="a4cd4-131">此外，CAS 使实现更加复杂，通常会对无意使用它的应用程序造成正确性-性能影响。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-131">Also, CAS makes the implementation more complicated and often has correctness-performance implications for applications that don't intend to use it.</span></span>

<span data-ttu-id="a4cd4-132">可使用操作系统提供的安全边界，例如虚拟化、容器或具有最少特权集的用于运行进程的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-132">Use security boundaries provided by the operating system, such as virtualization, containers, or user accounts, for running processes with the minimum set of privileges.</span></span>

## <a name="security-transparency"></a><span data-ttu-id="a4cd4-133">安全透明度</span><span class="sxs-lookup"><span data-stu-id="a4cd4-133">Security transparency</span></span>

<span data-ttu-id="a4cd4-134">与 CAS 相似，借助安全透明度可以通过声明性方式将沙盒代码与安全关键代码隔离，但是[不再支持将它作为安全边界](../../framework/misc/security-transparent-code.md)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-134">Similar to CAS, security transparency separates sandboxed code from security critical code in a declarative fashion but is [no longer supported as a security boundary](../../framework/misc/security-transparent-code.md).</span></span> <span data-ttu-id="a4cd4-135">Silverlight 大规模使用了此功能。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-135">This feature is heavily used by Silverlight.</span></span>

<span data-ttu-id="a4cd4-136">可使用操作系统提供的安全边界，例如虚拟化、容器或用于运行进程的用户帐户具有最少的一组特权。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-136">Use security boundaries provided by the operating system, such as virtualization, containers, or user accounts, for running processes with the least set of privileges.</span></span>

## <a name="systementerpriseservices"></a><span data-ttu-id="a4cd4-137">System.EnterpriseServices</span><span class="sxs-lookup"><span data-stu-id="a4cd4-137">System.EnterpriseServices</span></span>

<span data-ttu-id="a4cd4-138">.NET Core 和 .NET 5 及更高版本不支持 <xref:System.EnterpriseServices?displayProperty=fullName> (COM+)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-138"><xref:System.EnterpriseServices?displayProperty=fullName> (COM+) isn't supported by .NET Core and .NET 5+.</span></span>

## <a name="workflow-foundation-and-wcf"></a><span data-ttu-id="a4cd4-139">Workflow Foundation 和 WCF</span><span class="sxs-lookup"><span data-stu-id="a4cd4-139">Workflow Foundation and WCF</span></span>

<span data-ttu-id="a4cd4-140">.NET 5+（包括 .NET Core）不支持 Windows Workflow Foundation (WF) 和 Windows Communication Foundation (WCF)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-140">Windows Workflow Foundation (WF) and Windows Communication Foundation (WCF) are not supported in .NET 5+ (including .NET Core).</span></span> <span data-ttu-id="a4cd4-141">有关替代方法，请参阅 [CoreWF](https://github.com/UiPath/corewf) 和 [CoreWCF](https://github.com/CoreWCF/CoreWCF)。</span><span class="sxs-lookup"><span data-stu-id="a4cd4-141">For alternatives, see [CoreWF](https://github.com/UiPath/corewf) and [CoreWCF](https://github.com/CoreWCF/CoreWCF).</span></span>

## <a name="see-also"></a><span data-ttu-id="a4cd4-142">请参阅</span><span class="sxs-lookup"><span data-stu-id="a4cd4-142">See also</span></span>

- [<span data-ttu-id="a4cd4-143">有关从 .NET Framework 移植到 .NET 的概述</span><span class="sxs-lookup"><span data-stu-id="a4cd4-143">Overview of porting from .NET Framework to .NET</span></span>](index.md)

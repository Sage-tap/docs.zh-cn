---
description: 了解详细信息：调试 LINQ to DataSet 查询
title: 调试 LINQ to DataSet 查询
ms.date: 03/30/2017
ms.assetid: f4c54015-8ce2-4c5c-8d18-7038144cc66d
ms.openlocfilehash: f1293ba195c96d6868fdd5bfee50e8734f9cecc4
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/06/2021
ms.locfileid: "99651218"
---
# <a name="debugging-linq-to-dataset-queries"></a><span data-ttu-id="dcdc9-103">调试 LINQ to DataSet 查询</span><span class="sxs-lookup"><span data-stu-id="dcdc9-103">Debugging LINQ to DataSet Queries</span></span>

<span data-ttu-id="dcdc9-104">Visual Studio 支持调试 LINQ to DataSet 代码。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-104">Visual Studio supports the debugging of LINQ to DataSet code.</span></span> <span data-ttu-id="dcdc9-105">不过，调试 LINQ to DataSet 代码和非 LINQ to DataSet 托管代码之间存在一些差异。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-105">However, there are some differences between debugging LINQ to DataSet code and non-LINQ to DataSet managed code.</span></span> <span data-ttu-id="dcdc9-106">大多数调试功能都使用 LINQ to DataSet 语句，包括单步执行、设置断点以及查看调试器窗口中显示的结果。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-106">Most debugging features work with LINQ to DataSet statements, including stepping, setting breakpoints, and viewing results that are shown in debugger windows.</span></span> <span data-ttu-id="dcdc9-107">但是，中延迟的查询执行具有一些副作用，你应该在调试 LINQ to DataSet 代码时考虑这些副作用，并且在使用 "编辑并继续" 时会有一些限制。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-107">However, deferred query execution in has some side effects that you should consider while debugging LINQ to DataSet code and there are some limitations to using Edit and Continue.</span></span> <span data-ttu-id="dcdc9-108">本主题讨论与非 LINQ to DataSet 托管代码 LINQ to DataSet 唯一的调试方面。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-108">This topic discusses aspects of debugging that are unique to LINQ to DataSet compared to non-LINQ to DataSet managed code.</span></span>  
  
## <a name="viewing-results"></a><span data-ttu-id="dcdc9-109">查看结果</span><span class="sxs-lookup"><span data-stu-id="dcdc9-109">Viewing Results</span></span>  

 <span data-ttu-id="dcdc9-110">您可以使用 "数据提示"、"监视窗口" 和 "快速监视" 对话框查看 LINQ to DataSet 语句的结果。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-110">You can view the result of a LINQ to DataSet statement by using DataTips, the Watch window, and the QuickWatch dialog box.</span></span> <span data-ttu-id="dcdc9-111">使用源窗口，可以将指针暂时停留在源窗口中的查询上，这样数据提示就会出现。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-111">By using a source window, you can pause the pointer on a query in the source window and a DataTip will appear.</span></span> <span data-ttu-id="dcdc9-112">可以复制 LINQ to DataSet 变量，并将其粘贴到监视窗口或 "快速监视" 对话框中。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-112">You can copy a LINQ to DataSet variable and paste it into the Watch window or the QuickWatch dialog box.</span></span> <span data-ttu-id="dcdc9-113">在 LINQ to DataSet 中，不会在创建或声明查询时对其进行计算，而只在执行查询时进行计算。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-113">In LINQ to DataSet, a query is not evaluated when it is created or declared, but only when the query is executed.</span></span> <span data-ttu-id="dcdc9-114">这称为 " *延迟执行*"。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-114">This is called *deferred execution*.</span></span> <span data-ttu-id="dcdc9-115">因此，查询变量直到计算时才有值。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-115">Therefore, the query variable does not have a value until it is evaluated.</span></span> <span data-ttu-id="dcdc9-116">有关详细信息，请参阅 [LINQ to DataSet 中的查询](queries-in-linq-to-dataset.md)。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-116">For more information, see [Queries in LINQ to DataSet](queries-in-linq-to-dataset.md).</span></span>  
  
 <span data-ttu-id="dcdc9-117">调试程序必须计算查询才能显示查询结果。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-117">The debugger must evaluate a query to display the query results.</span></span> <span data-ttu-id="dcdc9-118">当您在调试器中查看 LINQ to DataSet 查询结果时，将发生这种隐式计算，并且它有一些应考虑的效果。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-118">This implicit evaluation occurs when you view a LINQ to DataSet query result in the debugger, and it has some effects you should consider.</span></span> <span data-ttu-id="dcdc9-119">查询的每次计算都需要时间。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-119">Each evaluation of the query takes time.</span></span> <span data-ttu-id="dcdc9-120">展开结果节点需要时间。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-120">Expanding the results node takes time.</span></span> <span data-ttu-id="dcdc9-121">对于某些查询，重复计算可能引起明显的性能损失。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-121">For some queries, repeated evaluation might cause a noticeable performance penalty.</span></span> <span data-ttu-id="dcdc9-122">计算查询也会有副作用，这些副作用会更改数据值或程序的状态。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-122">Evaluating a query can also cause side effects, which are changes to the value of data or the state of your program.</span></span> <span data-ttu-id="dcdc9-123">不是所有查询都具有副作用。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-123">Not all queries have side effects.</span></span> <span data-ttu-id="dcdc9-124">要确定查询能否安全计算而没有副作用，必须了解实现查询的代码。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-124">To determine whether a query can be safely evaluated without side effects, you must understand the code that implements the query.</span></span> <span data-ttu-id="dcdc9-125">有关详细信息，请参阅 [副作用和表达式](/previous-versions/visualstudio/visual-studio-2013/a7a250bs(v=vs.120))。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-125">For more information, see [Side Effects and Expressions](/previous-versions/visualstudio/visual-studio-2013/a7a250bs(v=vs.120)).</span></span>  
  
## <a name="edit-and-continue"></a><span data-ttu-id="dcdc9-126">编辑并继续</span><span class="sxs-lookup"><span data-stu-id="dcdc9-126">Edit and Continue</span></span>  

 <span data-ttu-id="dcdc9-127">"编辑并继续" 不支持 LINQ to DataSet 查询的更改。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-127">Edit and Continue does not support changes to LINQ to DataSet queries.</span></span> <span data-ttu-id="dcdc9-128">如果在调试会话过程中添加、删除或更改 LINQ to DataSet 语句，则会出现一个对话框，告知您 "编辑并继续" 不支持该更改。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-128">If you add, remove, or change a LINQ to DataSet statement during a debugging session, a dialog box appears that tells you the change is not supported by Edit and Continue.</span></span> <span data-ttu-id="dcdc9-129">此时，可以撤消更改，或停止调试会话并对编辑的代码重新启动新会话。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-129">At that point, you can either undo the changes or stop the debugging session and restart a new session with the edited code.</span></span>  
  
 <span data-ttu-id="dcdc9-130">此外，"编辑并继续" 不支持更改 LINQ to DataSet 语句中使用的变量的类型或值。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-130">In addition, Edit and Continue does not support changing the type or the value of a variable that is used in a LINQ to DataSet statement.</span></span> <span data-ttu-id="dcdc9-131">同样，可以撤消更改，或停止并重新启动调试会话。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-131">Again, you can either undo the changes or stop and restart the debugging session.</span></span>  
  
 <span data-ttu-id="dcdc9-132">在 Visual Studio 的 Visual c # 中，不能对包含 LINQ to DataSet 查询的方法中的任何代码使用 "编辑并继续"。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-132">In Visual C# in Visual Studio, you cannot use Edit and Continue on any code in a method that contains a LINQ to DataSet query.</span></span>  
  
 <span data-ttu-id="dcdc9-133">在 Visual Studio Visual Basic 中，可以对非 LINQ to DataSet 代码使用 "编辑并继续"，即使是在包含 LINQ to DataSet 查询的方法中也是如此。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-133">In Visual Basic in Visual Studio, you can use Edit and Continue on non-LINQ to DataSet code, even in a method that contains a LINQ to DataSet query.</span></span> <span data-ttu-id="dcdc9-134">您可以在 LINQ to DataSet 语句之前添加或移除代码，即使这些更改会影响 LINQ to DataSet 查询的行号。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-134">You can add or remove code before the LINQ to DataSet statement, even if the changes affect line number of the LINQ to DataSet query.</span></span> <span data-ttu-id="dcdc9-135">非 LINQ to DataSet 代码的 Visual Basic 调试体验与引入 LINQ to DataSet 之前相同。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-135">Your Visual Basic debugging experience for non-LINQ to DataSet code remains the same as it was before LINQ to DataSet was introduced.</span></span> <span data-ttu-id="dcdc9-136">不过，除非停止调试以应用更改，否则不能更改、添加或删除 LINQ to DataSet 查询。</span><span class="sxs-lookup"><span data-stu-id="dcdc9-136">You cannot change, add, or remove a LINQ to DataSet query, however, unless you stop debugging to apply the changes.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dcdc9-137">请参阅</span><span class="sxs-lookup"><span data-stu-id="dcdc9-137">See also</span></span>

- [<span data-ttu-id="dcdc9-138">调试托管代码</span><span class="sxs-lookup"><span data-stu-id="dcdc9-138">Debugging Managed Code</span></span>](/visualstudio/debugger/debugging-managed-code)
- [<span data-ttu-id="dcdc9-139">编程指南</span><span class="sxs-lookup"><span data-stu-id="dcdc9-139">Programming Guide</span></span>](programming-guide-linq-to-dataset.md)

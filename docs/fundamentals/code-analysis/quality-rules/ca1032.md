---
title: CA1032：实现标准异常构造函数（代码分析）
description: 了解代码分析规则 CA1032：实现标准异常构造函数
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1032
- ImplementStandardExceptionConstructors
helpviewer_keywords:
- CA1032
- ImplementStandardExceptionConstructors
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 3a95ca2c1d08e0ec6f003c77f15a75b9db9446e2
ms.sourcegitcommit: 05d0087dfca85aac9ca2960f86c5efd218bf833f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/30/2021
ms.locfileid: "99547266"
---
# <a name="ca1032-implement-standard-exception-constructors"></a><span data-ttu-id="62049-103">CA1032:实现标准异常构造函数</span><span class="sxs-lookup"><span data-stu-id="62049-103">CA1032: Implement standard exception constructors</span></span>

| <span data-ttu-id="62049-104">项</span><span class="sxs-lookup"><span data-stu-id="62049-104">Item</span></span>                                     | <span data-ttu-id="62049-105">“值”</span><span class="sxs-lookup"><span data-stu-id="62049-105">Value</span></span>            |
|------------------------------------------|------------------|
| <span data-ttu-id="62049-106">RuleId</span><span class="sxs-lookup"><span data-stu-id="62049-106">RuleId</span></span>                                   | <span data-ttu-id="62049-107">CA1032</span><span class="sxs-lookup"><span data-stu-id="62049-107">CA1032</span></span>           |
| <span data-ttu-id="62049-108">类别</span><span class="sxs-lookup"><span data-stu-id="62049-108">Category</span></span>                                 | [<span data-ttu-id="62049-109">Microsoft.Design</span><span class="sxs-lookup"><span data-stu-id="62049-109">Microsoft.Design</span></span>](design-warnings.md) |
| <span data-ttu-id="62049-110">修复是中断修复还是非中断修复</span><span class="sxs-lookup"><span data-stu-id="62049-110">Fix is breaking or non-breaking</span></span> | <span data-ttu-id="62049-111">非中断</span><span class="sxs-lookup"><span data-stu-id="62049-111">Non-breaking</span></span>     |

## <a name="cause"></a><span data-ttu-id="62049-112">原因</span><span class="sxs-lookup"><span data-stu-id="62049-112">Cause</span></span>

<span data-ttu-id="62049-113">类型扩展了 <xref:System.Exception?displayProperty=fullName>，但未声明所有必需的构造函数。</span><span class="sxs-lookup"><span data-stu-id="62049-113">A type extends <xref:System.Exception?displayProperty=fullName> but doesn't declare all the required constructors.</span></span>

## <a name="rule-description"></a><span data-ttu-id="62049-114">规则说明</span><span class="sxs-lookup"><span data-stu-id="62049-114">Rule description</span></span>

<span data-ttu-id="62049-115">异常类型必须实现以下三个公共构造函数：</span><span class="sxs-lookup"><span data-stu-id="62049-115">Exception types must implement the following three public constructors:</span></span>

- <span data-ttu-id="62049-116">公共 NewException()</span><span class="sxs-lookup"><span data-stu-id="62049-116">public NewException()</span></span>

- <span data-ttu-id="62049-117">公共 NewException(string)</span><span class="sxs-lookup"><span data-stu-id="62049-117">public NewException(string)</span></span>

- <span data-ttu-id="62049-118">公共 NewException(string, Exception)</span><span class="sxs-lookup"><span data-stu-id="62049-118">public NewException(string, Exception)</span></span>

<span data-ttu-id="62049-119">如果不能提供完整的构造函数集，要正确处理异常将变得比较困难。</span><span class="sxs-lookup"><span data-stu-id="62049-119">Failure to provide the full set of constructors can make it difficult to correctly handle exceptions.</span></span> <span data-ttu-id="62049-120">例如，具有签名 `NewException(string, Exception)` 的构造函数用于创建由其他异常引起的异常。</span><span class="sxs-lookup"><span data-stu-id="62049-120">For example, the constructor that has the signature `NewException(string, Exception)` is used to create exceptions that are caused by other exceptions.</span></span> <span data-ttu-id="62049-121">如果没有此构造函数，你无法创建和引发包含内部（嵌套）异常的自定义异常实例，在这种情况下，托管代码应执行此操作。</span><span class="sxs-lookup"><span data-stu-id="62049-121">Without this constructor, you can't create and throw an instance of your custom exception that contains an inner (nested) exception, which is what managed code should do in such a situation.</span></span>

<span data-ttu-id="62049-122">有关详细信息，请参阅 [CA2229：实现序列化构造函数](ca2229.md)。</span><span class="sxs-lookup"><span data-stu-id="62049-122">For more information, see [CA2229: Implement serialization constructors](ca2229.md).</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="62049-123">如何解决冲突</span><span class="sxs-lookup"><span data-stu-id="62049-123">How to fix violations</span></span>

<span data-ttu-id="62049-124">若要修复此规则的冲突，请将缺少的构造函数添加到异常，并确保它们具有正确的可访问性。</span><span class="sxs-lookup"><span data-stu-id="62049-124">To fix a violation of this rule, add the missing constructors to the exception, and make sure that they have the correct accessibility.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="62049-125">何时禁止显示警告</span><span class="sxs-lookup"><span data-stu-id="62049-125">When to suppress warnings</span></span>

<span data-ttu-id="62049-126">当冲突是由于对公共构造函数使用不同的访问级别而引起时，可以安全地禁止显示此规则的警告。</span><span class="sxs-lookup"><span data-stu-id="62049-126">It's safe to suppress a warning from this rule when the violation is caused by using a different access level for the public constructors.</span></span> <span data-ttu-id="62049-127">此外，如果你正在构建可移植类库 (PCL)，则可以禁止显示 `NewException(SerializationInfo, StreamingContext)` 构造函数的相关警告。</span><span class="sxs-lookup"><span data-stu-id="62049-127">Additionally, it's okay to suppress the warning for the `NewException(SerializationInfo, StreamingContext)` constructor if you're building a Portable Class Library (PCL).</span></span>

[!INCLUDE [suppress-warning](../../../../includes/code-analysis/suppress-warning.md)]

## <a name="example"></a><span data-ttu-id="62049-128">示例</span><span class="sxs-lookup"><span data-stu-id="62049-128">Example</span></span>

<span data-ttu-id="62049-129">以下示例包含与此规则冲突的异常类型和正确实现的异常类型。</span><span class="sxs-lookup"><span data-stu-id="62049-129">The following example contains an exception type that violates this rule and an exception type that is correctly implemented.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1032.cs" id="snippet1":::

## <a name="see-also"></a><span data-ttu-id="62049-130">另请参阅</span><span class="sxs-lookup"><span data-stu-id="62049-130">See also</span></span>

[<span data-ttu-id="62049-131">CA2229:实现序列化构造函数</span><span class="sxs-lookup"><span data-stu-id="62049-131">CA2229: Implement serialization constructors</span></span>](ca2229.md)
